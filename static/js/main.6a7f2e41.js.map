{"version":3,"file":"static/js/main.6a7f2e41.js","mappings":"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","sources":["app/firebaseConfig.js","app/screens/user/UserHomeScreen.js","app/screens/user/UserProfileScreen.js","app/screens/user/AddDonationScreen.js","app/screens/user/BoxFinderScreen.js","app/contexts/UserContext.js","app/screens/ChatListScreen.js","app/screens/ChatScreen.js","app/navigation/ChatNavigator.js","app/navigation/UserNavigator.js","app/screens/admin/ManageEventsScreen.js","app/screens/admin/AdminProfileScreen.js","app/screens/admin/ManageDonationBoxesScreen.js","app/screens/admin/ManageDonationsScreen.js","app/navigation/AdminNavigator.js","app/screens/organizer/OrganizerProfileScreen.js","app/screens/organizer/AddEventScreen.js","app/navigation/OrganizerNavigator.js","app/screens/auth/SignInScreen.js","app/screens/auth/SignUpScreen.js","app/screens/auth/ForgotPasswordScreen.js","app/navigation/AuthNavigator.js","App.js","index.js","webpack/bootstrap","webpack/runtime/chunk loaded","webpack/runtime/compat get default export","webpack/runtime/define property getters","webpack/runtime/global","webpack/runtime/hasOwnProperty shorthand","webpack/runtime/make namespace object","webpack/runtime/publicPath","webpack/runtime/jsonp chunk loading","webpack/startup"],"sourcesContent":["import { initializeApp } from \"firebase/app\";\r\nimport { getAuth } from \"firebase/auth\";\r\nimport { getFirestore } from \"firebase/firestore\";\r\nimport { getStorage } from 'firebase/storage';\r\n\r\nconst firebaseConfig = {\r\n     apiKey: \"AIzaSyD7npo_-9KAwTJCxwRtzgceJt4_bostfss\",\r\n    authDomain: \"donateit-80076.firebaseapp.com\",\r\n    projectId: \"donateit-80076\",\r\n    storageBucket: \"donateit-80076.firebasestorage.app\",\r\n    messagingSenderId: \"916451582794\",\r\n    appId: \"1:916451582794:web:efb23b8735dad5dd5217b3\",\r\n    measurementId: \"G-D999GEXDBT\"\r\n};\r\n\r\nconst app = initializeApp(firebaseConfig);\r\nconst auth = getAuth(app);\r\nconst db = getFirestore(app);\r\nconst storage = getStorage(app);\r\n\r\nexport { auth,db,storage};","import React, { useEffect, useState } from 'react';\r\nimport { View, Text, FlatList, ActivityIndicator, TouchableOpacity, Alert, StyleSheet } from 'react-native';\r\nimport { auth, db } from '../../firebaseConfig';\r\nimport { doc, getDoc, setDoc, serverTimestamp } from 'firebase/firestore';\r\nimport axios from 'axios';\r\nimport { Ionicons } from '@expo/vector-icons';\r\n\r\nexport default function UserHomeScreen({ navigation }) {\r\n  // State initialization\r\n  const [events, setEvents] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [selectedEvent, setSelectedEvent] = useState(null);\r\n  const [chatLoading, setChatLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [organizerStatus, setOrganizerStatus] = useState({\r\n    exists: false,\r\n    name: 'Event Organizer',\r\n    email: ''\r\n  });\r\n\r\n  const fetchEvents = async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await axios.get('http://localhost:5000/api/user/events', {\r\n        timeout: 10000\r\n      });\r\n      \r\n      if (!response.data) {\r\n        throw new Error('Empty response from server');\r\n      }\r\n\r\n      const eventsWithOrganizerStatus = await Promise.all(\r\n        response.data.map(async (event) => {\r\n          try {\r\n            const exists = event.organizer_id \r\n              ? await verifyOrganizer(event.organizer_id)\r\n              : false;\r\n            return {\r\n              ...event,\r\n              organizerId: event.organizer_id,\r\n              organizerExists: exists,\r\n              organizerName: exists ? (await getDoc(doc(db, 'users', event.organizer_id))).data().displayName || 'Organizer' : 'Organizer'\r\n            };\r\n          } catch (err) {\r\n            console.error('Error processing event:', err);\r\n            return {\r\n              ...event,\r\n              organizerId: event.organizer_id,\r\n              organizerExists: false,\r\n              organizerName: 'Organizer',\r\n              error: true\r\n            };\r\n          }\r\n        })\r\n      );\r\n\r\n      setEvents(eventsWithOrganizerStatus);\r\n    } catch (error) {\r\n      setError(error.message || 'Failed to load events');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const verifyOrganizer = async (organizerId) => {\r\n    try {\r\n      const organizerRef = doc(db, 'users', organizerId);\r\n      const organizerSnap = await getDoc(organizerRef);\r\n      return organizerSnap.exists();\r\n    } catch (error) {\r\n      console.error('Organizer verification failed:', error);\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const handleSelectEvent = async (event) => {\r\n    setSelectedEvent(event);\r\n    \r\n    if (event.organizerId) {\r\n      try {\r\n        const organizerRef = doc(db, 'users', event.organizerId);\r\n        const organizerSnap = await getDoc(organizerRef);\r\n        \r\n        if (organizerSnap.exists()) {\r\n          const organizerData = organizerSnap.data();\r\n          setOrganizerStatus({\r\n            exists: true,\r\n            name: organizerData.displayName || 'Event Organizer',\r\n            email: organizerData.email || ''\r\n          });\r\n        } else {\r\n          setOrganizerStatus({\r\n            exists: false,\r\n            name: 'Event Organizer',\r\n            email: ''\r\n          });\r\n        }\r\n      } catch (error) {\r\n        console.error('Organizer fetch error:', error);\r\n        setOrganizerStatus({\r\n          exists: false,\r\n          name: 'Event Organizer',\r\n          email: ''\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleChatWithOrganizer = async () => {\r\n    setChatLoading(true);\r\n    try {\r\n      if (!selectedEvent?.organizerId) {\r\n        throw new Error('This event has no organizer assigned');\r\n      }\r\n\r\n      const currentUser = auth.currentUser;\r\n      if (!currentUser?.uid) {\r\n        throw new Error('Please sign in to chat');\r\n      }\r\n\r\n      const chatId = `${selectedEvent._id}_${currentUser.uid}_${selectedEvent.organizerId}`;\r\n\r\n      const defaultOrganizerInfo = {\r\n        name: 'Event Organizer',\r\n        email: '',\r\n        photoURL: null\r\n      };\r\n\r\n      let organizerInfo = defaultOrganizerInfo;\r\n      try {\r\n        const organizerRef = doc(db, 'users', selectedEvent.organizerId);\r\n        const organizerSnap = await getDoc(organizerRef);\r\n        if (organizerSnap.exists()) {\r\n          const data = organizerSnap.data();\r\n          organizerInfo = {\r\n            name: data.displayName || data.name || defaultOrganizerInfo.name,\r\n            email: data.email || defaultOrganizerInfo.email,\r\n            photoURL: data.photoURL || defaultOrganizerInfo.photoURL\r\n          };\r\n        }\r\n      } catch (error) {\r\n        console.log('Using default organizer info due to error:', error);\r\n      }\r\n\r\n      await setDoc(doc(db, 'chats', chatId), {\r\n        id: chatId,\r\n        participants: [currentUser.uid, selectedEvent.organizerId],\r\n        participantInfo: {\r\n          [currentUser.uid]: {\r\n            name: currentUser.displayName || 'User',\r\n            email: currentUser.email || '',\r\n            photoURL: currentUser.photoURL || null\r\n          },\r\n          [selectedEvent.organizerId]: organizerInfo\r\n        },\r\n        eventId: selectedEvent._id,\r\n        eventName: selectedEvent.name,\r\n        createdAt: serverTimestamp(),\r\n        lastMessage: \"Chat started\",\r\n        lastMessageAt: serverTimestamp()\r\n      }, { merge: true });\r\n\r\n      navigation.navigate('Chats', {\r\n        screen: 'ChatList',\r\n        params: { refresh: Date.now() }\r\n      });\r\n      \r\n      setTimeout(() => {\r\n        navigation.navigate('Chats', {\r\n          screen: 'ChatScreen',\r\n          params: {\r\n            chatId,\r\n            otherUserId: selectedEvent.organizerId,\r\n            otherUserName: organizerInfo.name,\r\n            eventName: selectedEvent.name\r\n          }\r\n        });\r\n      }, 300);\r\n\r\n    } catch (error) {\r\n      console.error('Chat creation failed:', error);\r\n      Alert.alert(\r\n        'Error',\r\n        error.message,\r\n        [{ text: 'OK' }]\r\n      );\r\n    } finally {\r\n      setChatLoading(false);\r\n    }\r\n  };\r\n\r\n  const renderEvent = ({ item }) => (\r\n    <TouchableOpacity \r\n      onPress={() => handleSelectEvent(item)}\r\n      style={[\r\n        styles.eventCard,\r\n        selectedEvent?._id === item._id && styles.selectedEventCard\r\n      ]}\r\n    >\r\n      <View style={styles.eventHeaderContainer}>\r\n        <Text style={styles.eventTitle}>{item.name}</Text>\r\n        <Ionicons name=\"chevron-forward\" size={20} color=\"#555\" />\r\n      </View>\r\n      <Text style={styles.eventBy}>Hosted by {item.organizerName}</Text>\r\n      <Text style={styles.eventDescription} numberOfLines={2}>\r\n        {item.description}\r\n      </Text>\r\n      <View style={styles.eventDetails}>\r\n        <View style={styles.detailItem}>\r\n          <Ionicons name=\"calendar\" size={14} color=\"#555\" />\r\n          <Text style={styles.detailText}>\r\n            {new Date(item.date).toLocaleDateString('en-US', {\r\n              month: 'short',\r\n              day: 'numeric',\r\n              year: 'numeric'\r\n            })}\r\n          </Text>\r\n        </View>\r\n        <View style={styles.detailItem}>\r\n          <Ionicons name=\"location\" size={14} color=\"#555\" />\r\n          <Text style={styles.detailText} numberOfLines={1}>\r\n            {item.location.address}\r\n          </Text>\r\n        </View>\r\n      </View>\r\n    </TouchableOpacity>\r\n  );\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = navigation.addListener('focus', fetchEvents);\r\n    fetchEvents();\r\n    return unsubscribe;\r\n  }, [navigation]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <View style={styles.loadingContainer}>\r\n        <ActivityIndicator size=\"large\" color=\"#000\" />\r\n        <Text style={styles.loadingText}>Loading events...</Text>\r\n      </View>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <View style={styles.errorContainer}>\r\n        <Ionicons name=\"warning\" size={50} color=\"#000\" />\r\n        <Text style={styles.errorText}>Error loading events</Text>\r\n        <Text style={styles.errorSubText}>{error}</Text>\r\n        <TouchableOpacity \r\n          style={styles.retryButton}\r\n          onPress={fetchEvents}\r\n        >\r\n          <Text style={styles.retryButtonText}>Try Again</Text>\r\n        </TouchableOpacity>\r\n      </View>\r\n    );\r\n  }\r\n\r\n  if (selectedEvent) {\r\n    return (\r\n      <View style={styles.detailContainer}>\r\n        <TouchableOpacity \r\n          onPress={() => setSelectedEvent(null)} \r\n          style={styles.backButton}\r\n        >\r\n          <Ionicons name=\"arrow-back\" size={24} color=\"#000\" />\r\n          <Text style={styles.backButtonText}>All Events</Text>\r\n        </TouchableOpacity>\r\n        \r\n        <View style={styles.eventImagePlaceholder} />\r\n        \r\n        <Text style={styles.detailTitle}>{selectedEvent.name}</Text>\r\n        <Text style={styles.detailOrganizer}>Organized by {organizerStatus.name}</Text>\r\n        \r\n        <View style={styles.section}>\r\n          <Text style={styles.sectionTitle}>About this event</Text>\r\n          <Text style={styles.detailDescription}>{selectedEvent.description}</Text>\r\n        </View>\r\n        \r\n        <View style={styles.section}>\r\n          <Text style={styles.sectionTitle}>Details</Text>\r\n          <View style={styles.detailRow}>\r\n            <Ionicons name=\"calendar\" size={20} color=\"#000\" style={styles.detailIcon} />\r\n            <View>\r\n              <Text style={styles.detailLabel}>Date</Text>\r\n              <Text style={styles.detailValue}>\r\n                {new Date(selectedEvent.date).toLocaleDateString('en-US', {\r\n                  weekday: 'long',\r\n                  month: 'long',\r\n                  day: 'numeric',\r\n                  year: 'numeric'\r\n                })}\r\n              </Text>\r\n            </View>\r\n          </View>\r\n          \r\n          <View style={styles.detailRow}>\r\n            <Ionicons name=\"location\" size={20} color=\"#000\" style={styles.detailIcon} />\r\n            <View>\r\n              <Text style={styles.detailLabel}>Location</Text>\r\n              <Text style={styles.detailValue}>{selectedEvent.location.address}</Text>\r\n            </View>\r\n          </View>\r\n        </View>\r\n        \r\n        <View style={styles.footer}>\r\n          {chatLoading ? (\r\n            <ActivityIndicator size=\"small\" color=\"#000\" />\r\n          ) : (\r\n            <TouchableOpacity \r\n              style={styles.chatButton}\r\n              onPress={handleChatWithOrganizer}\r\n            >\r\n              <Ionicons name=\"chatbubble-ellipses\" size={20} color=\"#fff\" />\r\n              <Text style={styles.chatButtonText}>Message Organizer</Text>\r\n            </TouchableOpacity>\r\n          )}\r\n        </View>\r\n      </View>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <View style={styles.headerContainer}>\r\n        <Text style={styles.header}>Upcoming Events</Text>\r\n        {/* <TouchableOpacity>\r\n          <Ionicons name=\"search\" size={24} color=\"#000\" />\r\n        </TouchableOpacity> */}\r\n      </View>\r\n      \r\n      {events.length === 0 ? (\r\n        <View style={styles.emptyContainer}>\r\n          <Ionicons name=\"calendar\" size={50} color=\"#aaa\" />\r\n          <Text style={styles.emptyText}>No events available</Text>\r\n          <Text style={styles.emptySubText}>Check back later for new events</Text>\r\n          <TouchableOpacity \r\n            style={styles.refreshButton}\r\n            onPress={fetchEvents}\r\n          >\r\n            <Text style={styles.refreshButtonText}>Refresh</Text>\r\n          </TouchableOpacity>\r\n        </View>\r\n      ) : (\r\n        <FlatList\r\n          data={events}\r\n          keyExtractor={(item) => item._id}\r\n          renderItem={renderEvent}\r\n          contentContainerStyle={styles.listContent}\r\n          showsVerticalScrollIndicator={false}\r\n        />\r\n      )}\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    padding: 16,\r\n    backgroundColor: '#fff',\r\n  },\r\n  headerContainer: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    marginBottom: 24,\r\n  },\r\n  header: {\r\n    fontSize: 28,\r\n    fontWeight: '700',\r\n    color: '#000',\r\n  },\r\n  eventCard: {\r\n    backgroundColor: '#fff',\r\n    borderRadius: 12,\r\n    padding: 16,\r\n    marginBottom: 16,\r\n    borderWidth: 1,\r\n    borderColor: '#eee',\r\n    shadowColor: '#000',\r\n    shadowOffset: { width: 0, height: 1 },\r\n    shadowOpacity: 0.05,\r\n    shadowRadius: 2,\r\n    elevation: 1,\r\n  },\r\n  selectedEventCard: {\r\n    borderColor: '#000',\r\n  },\r\n  eventHeaderContainer: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    marginBottom: 8,\r\n  },\r\n  eventTitle: {\r\n    fontSize: 18,\r\n    fontWeight: '600',\r\n    color: '#000',\r\n    flex: 1,\r\n  },\r\n  eventBy: {\r\n    color: '#555',\r\n    fontSize: 14,\r\n    marginBottom: 8,\r\n  },\r\n  eventDescription: {\r\n    color: '#333',\r\n    fontSize: 14,\r\n    marginBottom: 12,\r\n    lineHeight: 20,\r\n  },\r\n  eventDetails: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n  },\r\n  detailItem: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    flex: 1,\r\n  },\r\n  detailText: {\r\n    color: '#555',\r\n    fontSize: 13,\r\n    marginLeft: 6,\r\n  },\r\n  loadingContainer: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    backgroundColor: '#fff',\r\n  },\r\n  loadingText: {\r\n    marginTop: 16,\r\n    color: '#555',\r\n  },\r\n  errorContainer: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    padding: 24,\r\n    backgroundColor: '#fff',\r\n  },\r\n  errorText: {\r\n    fontSize: 18,\r\n    fontWeight: '600',\r\n    color: '#000',\r\n    marginTop: 16,\r\n  },\r\n  errorSubText: {\r\n    fontSize: 14,\r\n    color: '#555',\r\n    marginTop: 8,\r\n    textAlign: 'center',\r\n    marginBottom: 24,\r\n  },\r\n  retryButton: {\r\n    backgroundColor: '#000',\r\n    paddingHorizontal: 24,\r\n    paddingVertical: 12,\r\n    borderRadius: 8,\r\n  },\r\n  retryButtonText: {\r\n    color: '#fff',\r\n    fontWeight: '600',\r\n  },\r\n  emptyContainer: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    padding: 24,\r\n  },\r\n  emptyText: {\r\n    fontSize: 18,\r\n    fontWeight: '600',\r\n    color: '#000',\r\n    marginTop: 16,\r\n  },\r\n  emptySubText: {\r\n    fontSize: 14,\r\n    color: '#555',\r\n    marginTop: 8,\r\n    marginBottom: 24,\r\n  },\r\n  refreshButton: {\r\n    borderWidth: 1,\r\n    borderColor: '#000',\r\n    paddingHorizontal: 24,\r\n    paddingVertical: 12,\r\n    borderRadius: 8,\r\n  },\r\n  refreshButtonText: {\r\n    color: '#000',\r\n    fontWeight: '600',\r\n  },\r\n  detailContainer: {\r\n    flex: 1,\r\n    backgroundColor: '#fff',\r\n  },\r\n  backButton: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    padding: 16,\r\n  },\r\n  backButtonText: {\r\n    fontSize: 16,\r\n    color: '#000',\r\n    marginLeft: 8,\r\n  },\r\n  eventImagePlaceholder: {\r\n    height: 200,\r\n    backgroundColor: '#eee',\r\n    width: '100%',\r\n  },\r\n  detailTitle: {\r\n    fontSize: 24,\r\n    fontWeight: '700',\r\n    color: '#000',\r\n    marginHorizontal: 16,\r\n    marginTop: 16,\r\n  },\r\n  detailOrganizer: {\r\n    fontSize: 16,\r\n    color: '#555',\r\n    marginHorizontal: 16,\r\n    marginBottom: 24,\r\n  },\r\n  section: {\r\n    marginHorizontal: 16,\r\n    marginBottom: 24,\r\n  },\r\n  sectionTitle: {\r\n    fontSize: 18,\r\n    fontWeight: '600',\r\n    color: '#000',\r\n    marginBottom: 12,\r\n  },\r\n  detailDescription: {\r\n    fontSize: 15,\r\n    color: '#333',\r\n    lineHeight: 22,\r\n  },\r\n  detailRow: {\r\n    flexDirection: 'row',\r\n    marginBottom: 16,\r\n  },\r\n  detailIcon: {\r\n    marginRight: 16,\r\n  },\r\n  detailLabel: {\r\n    fontSize: 14,\r\n    color: '#555',\r\n    marginBottom: 2,\r\n  },\r\n  detailValue: {\r\n    fontSize: 16,\r\n    color: '#000',\r\n  },\r\n  footer: {\r\n    padding: 16,\r\n    borderTopWidth: 1,\r\n    borderTopColor: '#eee',\r\n  },\r\n  chatButton: {\r\n    backgroundColor: '#000',\r\n    flexDirection: 'row',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    padding: 16,\r\n    borderRadius: 8,\r\n  },\r\n  chatButtonText: {\r\n    color: '#fff',\r\n    fontWeight: '600',\r\n    marginLeft: 8,\r\n  },\r\n  listContent: {\r\n    paddingBottom: 16,\r\n  },\r\n});","import React, { useEffect, useState } from 'react';\r\nimport {\r\n  View,\r\n  Text,\r\n  Alert,\r\n  ActivityIndicator,\r\n  FlatList,\r\n  TouchableOpacity,\r\n  ScrollView,\r\n  Image,\r\n  SafeAreaView,\r\n  StyleSheet,\r\n  Platform\r\n} from 'react-native';\r\nimport { auth, db } from '../../firebaseConfig';\r\nimport axios from 'axios';\r\nimport { collection, query, where, getDocs, doc, addDoc, setDoc, serverTimestamp } from 'firebase/firestore';\r\nimport { Ionicons } from '@expo/vector-icons';\r\nimport { sendPasswordResetEmail } from \"firebase/auth\";\r\n\r\n\r\nexport default function UserProfileScreen({ navigation }) {\r\n  const [profile, setProfile] = useState(null);\r\n  const [donations, setDonations] = useState([]);\r\n  const [selectedDonation, setSelectedDonation] = useState(null);\r\n  const [error, setError] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const logout = async () => {\r\n    await auth.signOut();\r\n  };\r\n\r\n  const navigateToChat = (chatParams) => {\r\n    navigation.navigate('Chats');\r\n    setTimeout(() => {\r\n      navigation.navigate('Chats', { \r\n        screen: 'ChatScreen',\r\n        params: chatParams\r\n      });\r\n    }, 100);\r\n  };\r\n\r\n   const handleResetPassword = async () => {\r\n      try {\r\n        const user = auth.currentUser;\r\n        if (!user) {\r\n          Alert.alert(\"Error\", \"User not authenticated\");\r\n          return;\r\n        }\r\n        await sendPasswordResetEmail(auth, user.email);\r\n        Alert.alert(\"Success\", \"Password reset email sent. Please check your inbox.\");\r\n      } catch (error) {\r\n        console.error(\"Error sending password reset email:\", error);\r\n        Alert.alert(\"Error\", \"Failed to send password reset email\");\r\n      }\r\n    };\r\n\r\n  const handleContactAdmin = async () => {\r\n    try {\r\n      const adminUserId = \"VlNgmUErG7QjqCC5hhLkPoyDb0P2\";\r\n      const currentUser = auth.currentUser;\r\n      if (!currentUser) {\r\n        Alert.alert(\"Error\", \"You must be logged in to contact admin\");\r\n        return;\r\n      }\r\n\r\n      const chatData = await getOrCreateAdminChat(\r\n        adminUserId, \r\n        \"Admin\", \r\n        selectedDonation ? selectedDonation._id : null,\r\n        selectedDonation ? `Donation: ${selectedDonation.category || 'Untitled'}` : \"General Inquiry\"\r\n      );\r\n\r\n      const chatParams = {\r\n        chatId: chatData.chatId,\r\n        otherUserId: adminUserId,\r\n        otherUserName: \"Admin\",\r\n        eventName: chatData.eventName\r\n      };\r\n      \r\n      navigateToChat(chatParams);\r\n      \r\n    } catch (error) {\r\n      console.error(\"Error contacting admin:\", error);\r\n      Alert.alert(\"Error\", \"Failed to open chat with admin. Please try again later.\");\r\n    }\r\n  };\r\n\r\n  const checkExistingAdminChat = async (adminUserId) => {\r\n    try {\r\n      const currentUser = auth.currentUser;\r\n      if (!currentUser) return null;\r\n\r\n      const chatsRef = collection(db, \"chats\");\r\n      const chatKey = [currentUser.uid, adminUserId].sort().join('_');\r\n      \r\n      const chatDocsQuery = await getDocs(query(\r\n        chatsRef,\r\n        where(\"chatKey\", \"==\", chatKey)\r\n      ));\r\n      \r\n      if (!chatDocsQuery.empty) {\r\n        const chatDoc = chatDocsQuery.docs[0];\r\n        return {\r\n          id: chatDoc.id,\r\n          ...chatDoc.data()\r\n        };\r\n      }\r\n      \r\n      return null;\r\n    } catch (error) {\r\n      console.error(\"Error checking for existing admin chat:\", error);\r\n      return null;\r\n    }\r\n  };\r\n\r\n  const getOrCreateAdminChat = async (adminUserId, adminName, donationId, donationName) => {\r\n    try {\r\n      const currentUser = auth.currentUser;\r\n      if (!currentUser) throw new Error(\"User not authenticated\");\r\n      \r\n      const existingChat = await checkExistingAdminChat(adminUserId);\r\n      \r\n      if (existingChat) {\r\n        return {\r\n          chatId: existingChat.id,\r\n          otherUserId: adminUserId,\r\n          otherUserName: existingChat.participantInfo?.[adminUserId]?.name || adminName,\r\n          eventName: donationName || existingChat.eventName || \"Admin Chat\"\r\n        };\r\n      }\r\n\r\n      const chatKey = [currentUser.uid, adminUserId].sort().join('_');\r\n      \r\n      const newChat = {\r\n        participants: [currentUser.uid, adminUserId],\r\n        participantInfo: {\r\n          [currentUser.uid]: {\r\n            name: currentUser.displayName || \"User\",\r\n            photoURL: currentUser.photoURL || null\r\n          },\r\n          [adminUserId]: {\r\n            name: adminName,\r\n            photoURL: null\r\n          }\r\n        },\r\n        donationId: donationId,\r\n        eventName: donationName || \"Admin Chat\",\r\n        lastMessage: \"\",\r\n        lastMessageAt: serverTimestamp(),\r\n        createdAt: serverTimestamp(),\r\n        chatKey: chatKey\r\n      };\r\n\r\n      const newChatRef = doc(collection(db, \"chats\"));\r\n      await setDoc(newChatRef, newChat);\r\n      \r\n      const messagesRef = collection(db, 'chats', newChatRef.id, 'messages');\r\n      await addDoc(messagesRef, {\r\n        text: donationId \r\n          ? `Hello! I need help with my donation (${donationName}).` \r\n          : \"Hello! I need some assistance.\",\r\n        senderId: currentUser.uid,\r\n        senderName: currentUser.displayName || \"User\",\r\n        createdAt: serverTimestamp()\r\n      });\r\n      \r\n      await setDoc(newChatRef, {\r\n        lastMessage: donationId \r\n          ? `Hello! I need help with my donation (${donationName}).` \r\n          : \"Hello! I need some assistance.\",\r\n        lastMessageAt: serverTimestamp()\r\n      }, { merge: true });\r\n      \r\n      return {\r\n        chatId: newChatRef.id,\r\n        otherUserId: adminUserId,\r\n        otherUserName: adminName,\r\n        eventName: donationName || \"Admin Chat\"\r\n      };\r\n    } catch (error) {\r\n      console.error(\"Error in getOrCreateAdminChat:\", error);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const fetchProfileAndDonations = async () => {\r\n      try {\r\n        setLoading(true);\r\n        const currentUser = auth.currentUser;\r\n        const token = await currentUser.getIdToken();\r\n\r\n        const profileRes = await axios.get('http://localhost:5000/api/user/user-details', {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        });\r\n        setProfile(profileRes.data);\r\n\r\n        const donationsRes = await axios.get('http://localhost:5000/api/user/donations', {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        });\r\n        const userDonations = donationsRes.data.filter(\r\n          (donation) => donation.uid === currentUser.uid\r\n        );\r\n        setDonations(userDonations);\r\n      } catch (err) {\r\n        const message = err.response?.data?.message || err.message;\r\n        Alert.alert('Error', message);\r\n        setError(message);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchProfileAndDonations();\r\n  }, []);\r\n\r\n  if (loading) {\r\n    return (\r\n      <View style={styles.loadingContainer}>\r\n        <ActivityIndicator size=\"large\" color=\"#000\" />\r\n        <Text style={styles.loadingText}>Loading profile...</Text>\r\n      </View>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <View style={styles.errorContainer}>\r\n        <Ionicons name=\"warning\" size={40} color=\"#000\" />\r\n        <Text style={styles.errorText}>{error}</Text>\r\n        <TouchableOpacity \r\n          style={styles.retryButton}\r\n          onPress={() => {\r\n            setError(null);\r\n            setLoading(true);\r\n            fetchProfileAndDonations();\r\n          }}\r\n        >\r\n          <Text style={styles.retryButtonText}>Try Again</Text>\r\n        </TouchableOpacity>\r\n      </View>\r\n    );\r\n  }\r\n\r\n  const renderDonation = ({ item }) => (\r\n    <TouchableOpacity \r\n      onPress={() => setSelectedDonation(item)}\r\n      style={styles.donationCard}\r\n    >\r\n      <View style={styles.donationHeader}>\r\n        <Ionicons name=\"gift\" size={20} color=\"#000\" />\r\n        <Text style={styles.donationTitle}>{item.category || 'Untitled'}</Text>\r\n      </View>\r\n      {item.donationDescription && (\r\n        <Text style={styles.donationDescription} numberOfLines={2}>\r\n          {item.donationDescription}\r\n        </Text>\r\n      )}\r\n      {item.availability && (\r\n        <View style={styles.donationDateContainer}>\r\n          <Ionicons name=\"time\" size={14} color=\"#666\" />\r\n          <Text style={styles.donationDate}>{item.availability}</Text>\r\n        </View>\r\n      )}\r\n    </TouchableOpacity>\r\n  );\r\n\r\n  if (selectedDonation) {\r\n    return (\r\n      <SafeAreaView style={styles.detailContainer}>\r\n        <TouchableOpacity \r\n          onPress={() => setSelectedDonation(null)} \r\n          style={styles.backButton}\r\n        >\r\n          <Ionicons name=\"arrow-back\" size={24} color=\"#000\" />\r\n          <Text style={styles.backButtonText}>Back to Donations</Text>\r\n        </TouchableOpacity>\r\n\r\n        <ScrollView \r\n          showsVerticalScrollIndicator={false}\r\n          contentContainerStyle={styles.detailScrollContent}\r\n        >\r\n          <View style={styles.detailContent}>\r\n            <Text style={styles.detailTitle}>{selectedDonation.category || 'Donation'}</Text>\r\n            \r\n            <View style={styles.detailSection}>\r\n              <Text style={styles.sectionLabel}>DESCRIPTION</Text>\r\n              <Text style={styles.sectionText}>\r\n                {selectedDonation.description || 'No description provided'}\r\n              </Text>\r\n            </View>\r\n            \r\n            <View style={styles.detailSection}>\r\n              <Text style={styles.sectionLabel}>AVAILABILITY</Text>\r\n              <View style={styles.infoRow}>\r\n                <Ionicons name=\"calendar-outline\" size={16} color=\"#666\" style={styles.infoIcon} />\r\n                <Text style={styles.sectionText}>\r\n                  {selectedDonation.availability || 'Not specified'}\r\n                </Text>\r\n              </View>\r\n            </View>\r\n\r\n             <View style={styles.detailSection}>\r\n              <Text style={styles.sectionLabel}>PICKUP TIME</Text>\r\n              <View style={styles.infoRow}>\r\n                <Ionicons name=\"calendar-outline\" size={16} color=\"#666\" style={styles.infoIcon} />\r\n                <Text style={styles.sectionText}>\r\n                  {selectedDonation.dateTime || 'Not specified'}\r\n                </Text>\r\n              </View>\r\n            </View>\r\n\r\n              <View style={styles.detailSection}>\r\n              <Text style={styles.sectionLabel}>ASSIGNEE</Text>\r\n              <View style={styles.infoRow}>\r\n                <Ionicons name=\"person-outline\" size={16} color=\"#666\" style={styles.infoIcon} />\r\n                <Text style={styles.sectionText}>\r\n                  {selectedDonation.assignee || 'Not specified'}\r\n                </Text>\r\n              </View>\r\n            </View>\r\n            \r\n            \r\n            {selectedDonation.address?.address && (\r\n              <View style={styles.detailSection}>\r\n                <Text style={styles.sectionLabel}>LOCATION</Text>\r\n                <View style={styles.infoRow}>\r\n                  <Ionicons name=\"location-outline\" size={16} color=\"#666\" style={styles.infoIcon} />\r\n                  <Text style={styles.sectionText}>\r\n                    {selectedDonation.address.address}\r\n                  </Text>\r\n                </View>\r\n              </View>\r\n            )}\r\n\r\n            {selectedDonation.images?.length > 0 && (\r\n              <View style={styles.detailSection}>\r\n                <Text style={styles.sectionLabel}>PHOTOS</Text>\r\n                <ScrollView \r\n                  horizontal \r\n                  showsHorizontalScrollIndicator={false}\r\n                  contentContainerStyle={styles.photosContainer}\r\n                >\r\n                  {selectedDonation.images.map((photoUrl, idx) => (\r\n                    <Image\r\n                      key={idx}\r\n                      source={{ uri: photoUrl }}\r\n                      style={styles.donationImage}\r\n                    />\r\n                  ))}\r\n                </ScrollView>\r\n              </View>\r\n            )}\r\n\r\n            <TouchableOpacity \r\n              style={styles.contactButton}\r\n              onPress={handleContactAdmin}\r\n            >\r\n              <Ionicons name=\"chatbubble-outline\" size={20} color=\"#fff\" />\r\n              <Text style={styles.contactButtonText}>Contact Admin About This Donation</Text>\r\n            </TouchableOpacity>\r\n          </View>\r\n        </ScrollView>\r\n      </SafeAreaView>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <SafeAreaView style={styles.container}>\r\n      <ScrollView \r\n        showsVerticalScrollIndicator={false}\r\n        contentContainerStyle={styles.scrollContent}\r\n      >\r\n        <View style={styles.profileHeader}>\r\n          <View style={styles.profileImageContainer}>\r\n            <Ionicons name=\"person-circle-outline\" size={80} color=\"#000\" />\r\n          </View>\r\n          <Text style={styles.profileName}>{profile?.name || 'User'}</Text>\r\n          <Text style={styles.profileEmail}>{profile?.email}</Text>\r\n        </View>\r\n\r\n        <View style={styles.section}>\r\n          <View style={styles.sectionHeader}>\r\n            <Ionicons name=\"list-outline\" size={20} color=\"#000\" />\r\n            <Text style={styles.sectionTitle}>Your Donations</Text>\r\n          </View>\r\n          \r\n          {donations.length === 0 ? (\r\n            <View style={styles.emptyState}>\r\n              <Ionicons name=\"archive-outline\" size={40} color=\"#999\" />\r\n              <Text style={styles.emptyText}>No donations posted yet</Text>\r\n            </View>\r\n          ) : (\r\n            <FlatList\r\n              data={donations}\r\n              keyExtractor={(item) => item._id}\r\n              renderItem={renderDonation}\r\n              contentContainerStyle={styles.listContent}\r\n              scrollEnabled={false}\r\n            />\r\n          )}\r\n        </View>\r\n      </ScrollView>\r\n\r\n      <View style={styles.footer}>\r\n        <TouchableOpacity \r\n          style={styles.actionButton}\r\n          onPress={handleResetPassword}\r\n        >\r\n          <Ionicons name=\"key-outline\" size={20} color=\"#000\" />\r\n          <Text style={styles.actionButtonText}>Reset Password</Text>\r\n          <Ionicons name=\"chevron-forward\" size={20} color=\"#666\" />\r\n        </TouchableOpacity>\r\n\r\n        <TouchableOpacity \r\n          style={styles.actionButton}\r\n          onPress={handleContactAdmin}\r\n        >\r\n          <Ionicons name=\"headset-outline\" size={20} color=\"#000\" />\r\n          <Text style={styles.actionButtonText}>Contact Admin</Text>\r\n           <Ionicons name=\"chevron-forward\" size={20} color=\"#666\" />\r\n        </TouchableOpacity>\r\n        \r\n        <TouchableOpacity \r\n          style={styles.logoutButton}\r\n          onPress={logout}\r\n        >\r\n          <Ionicons name=\"log-out-outline\" size={20} color=\"#fff\" />\r\n          <Text style={styles.logoutText}>Log Out</Text>\r\n        </TouchableOpacity>\r\n      </View>\r\n    </SafeAreaView>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  // Base container styles\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: '#fff',\r\n  },\r\n  scrollContent: {\r\n    padding: 16,\r\n    paddingBottom: 100,\r\n  },\r\n  detailScrollContent: {\r\n    padding: 16,\r\n  },\r\n   actionButton: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    justifyContent: 'space-between',\r\n    padding: 16,\r\n    backgroundColor: '#fff',\r\n    borderRadius: 8,\r\n    borderWidth: 1,\r\n    borderColor: '#eee',\r\n    marginBottom: 16,\r\n  },\r\n  actionButtonText: {\r\n    flex: 1,\r\n    fontSize: 16,\r\n    color: '#000',\r\n    marginLeft: 12,\r\n  },\r\n  // Loading and error states\r\n  loadingContainer: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    backgroundColor: '#fff',\r\n  },\r\n  loadingText: {\r\n    marginTop: 16,\r\n    color: '#000',\r\n    fontSize: 16,\r\n  },\r\n  errorContainer: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    padding: 24,\r\n    backgroundColor: '#fff',\r\n  },\r\n  errorText: {\r\n    fontSize: 16,\r\n    color: '#000',\r\n    marginTop: 16,\r\n    textAlign: 'center',\r\n    marginBottom: 24,\r\n  },\r\n  retryButton: {\r\n    backgroundColor: '#000',\r\n    paddingHorizontal: 24,\r\n    paddingVertical: 12,\r\n    borderRadius: 8,\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n  },\r\n  retryButtonText: {\r\n    color: '#fff',\r\n    fontWeight: '600',\r\n    marginLeft: 8,\r\n  },\r\n  \r\n  // Profile header\r\n  profileHeader: {\r\n    alignItems: 'center',\r\n    marginBottom: 24,\r\n    padding: 20,\r\n    backgroundColor: '#fff',\r\n    borderRadius: 12,\r\n    borderWidth: 1,\r\n    borderColor: '#eee',\r\n  },\r\n  profileImageContainer: {\r\n    backgroundColor: '#f5f5f5',\r\n    borderRadius: 40,\r\n    padding: 8,\r\n  },\r\n  profileName: {\r\n    fontSize: 22,\r\n    fontWeight: '600',\r\n    marginTop: 12,\r\n    color: '#000',\r\n    textAlign: 'center',\r\n  },\r\n  profileEmail: {\r\n    fontSize: 16,\r\n    color: '#666',\r\n    marginTop: 4,\r\n    textAlign: 'center',\r\n  },\r\n  \r\n  // Main content sections\r\n  section: {\r\n    marginBottom: 16,\r\n    backgroundColor: '#fff',\r\n    borderRadius: 12,\r\n    padding: 20,\r\n    borderWidth: 1,\r\n    borderColor: '#eee',\r\n  },\r\n  sectionHeader: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    marginBottom: 16,\r\n  },\r\n  sectionTitle: {\r\n    fontSize: 18,\r\n    fontWeight: '600',\r\n    color: '#000',\r\n    marginLeft: 8,\r\n  },\r\n  \r\n  // Donation cards\r\n  donationCard: {\r\n    backgroundColor: '#fff',\r\n    borderRadius: 8,\r\n    padding: 16,\r\n    marginBottom: 12,\r\n    borderWidth: 1,\r\n    borderColor: '#eee',\r\n  },\r\n  donationHeader: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    marginBottom: 8,\r\n  },\r\n  donationTitle: {\r\n    fontSize: 16,\r\n    fontWeight: '600',\r\n    color: '#000',\r\n    marginLeft: 8,\r\n  },\r\n  donationDescription: {\r\n    fontSize: 14,\r\n    color: '#333',\r\n    marginBottom: 8,\r\n    lineHeight: 20,\r\n  },\r\n  donationDateContainer: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    marginTop: 4,\r\n  },\r\n  donationDate: {\r\n    fontSize: 12,\r\n    color: '#666',\r\n    marginLeft: 4,\r\n  },\r\n  listContent: {\r\n    paddingBottom: 8,\r\n  },\r\n  \r\n  // Empty state\r\n  emptyState: {\r\n    alignItems: 'center',\r\n    padding: 24,\r\n  },\r\n  emptyText: {\r\n    fontSize: 16,\r\n    color: '#999',\r\n    marginTop: 16,\r\n  },\r\n  \r\n  // Footer buttons\r\n  footer: {\r\n    position: 'absolute',\r\n    bottom: 0,\r\n    left: 0,\r\n    right: 0,\r\n    padding: 16,\r\n    backgroundColor: '#fff',\r\n    borderTopWidth: 1,\r\n    borderTopColor: '#eee',\r\n  },\r\n  contactAdminButton: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    padding: 16,\r\n    backgroundColor: '#000',\r\n    borderRadius: 8,\r\n    marginBottom: 12,\r\n  },\r\n  contactAdminText: {\r\n    fontSize: 16,\r\n    fontWeight: '500',\r\n    color: '#fff',\r\n    marginLeft: 8,\r\n  },\r\n  logoutButton: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    padding: 16,\r\n    backgroundColor: '#333',\r\n    borderRadius: 8,\r\n  },\r\n  logoutText: {\r\n    fontSize: 16,\r\n    fontWeight: '500',\r\n    color: '#fff',\r\n    marginLeft: 8,\r\n  },\r\n  \r\n  // Detail view styles\r\n  detailContainer: {\r\n    flex: 1,\r\n    backgroundColor: '#fff',\r\n  },\r\n  detailContent: {\r\n    paddingBottom: 100,\r\n  },\r\n  backButton: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    padding: 16,\r\n    paddingBottom: 8,\r\n  },\r\n  backButtonText: {\r\n    fontSize: 16,\r\n    color: '#000',\r\n    marginLeft: 8,\r\n    fontWeight: '500',\r\n  },\r\n  detailTitle: {\r\n    fontSize: 24,\r\n    fontWeight: '700',\r\n    color: '#000',\r\n    marginBottom: 24,\r\n    marginTop: 8,\r\n    paddingHorizontal: 16,\r\n  },\r\n  detailSection: {\r\n    marginBottom: 24,\r\n    backgroundColor: '#fff',\r\n    borderRadius: 8,\r\n    padding: 20,\r\n    borderWidth: 1,\r\n    borderColor: '#eee',\r\n    marginHorizontal: 16,\r\n  },\r\n  sectionLabel: {\r\n    fontSize: 13,\r\n    fontWeight: '700',\r\n    color: '#666',\r\n    marginBottom: 12,\r\n    textTransform: 'uppercase',\r\n    letterSpacing: 1,\r\n  },\r\n  sectionText: {\r\n    fontSize: 16,\r\n    color: '#000',\r\n    lineHeight: 24,\r\n  },\r\n  infoRow: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    marginTop: 8,\r\n  },\r\n  infoIcon: {\r\n    marginRight: 8,\r\n  },\r\n  photosContainer: {\r\n    paddingVertical: 8,\r\n  },\r\n  donationImage: {\r\n    width: 150,\r\n    height: 150,\r\n    borderRadius: 8,\r\n    marginRight: 12,\r\n    backgroundColor: '#f5f5f5',\r\n  },\r\n  contactButton: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    padding: 16,\r\n    backgroundColor: '#000',\r\n    borderRadius: 8,\r\n    marginTop: 16,\r\n    marginBottom: 24,\r\n    marginHorizontal: 16,\r\n  },\r\n  contactButtonText: {\r\n    fontSize: 16,\r\n    fontWeight: '500',\r\n    color: '#fff',\r\n    marginLeft: 8,\r\n  },\r\n});","import React, { useState, useRef, useEffect } from 'react';\r\nimport { \r\n  View, \r\n  Text, \r\n  TextInput, \r\n  Alert, \r\n  Image, \r\n  TouchableOpacity, \r\n  ScrollView, \r\n  Platform,\r\n  ActivityIndicator,\r\n  StyleSheet \r\n} from 'react-native';\r\nimport { Picker } from '@react-native-picker/picker';\r\nimport * as ImagePicker from 'expo-image-picker';\r\nimport { GeoPoint } from 'firebase/firestore';\r\nimport axios from 'axios';\r\nimport { auth } from '../../firebaseConfig'; \r\nimport { GooglePlacesAutocomplete } from 'react-native-google-places-autocomplete';\r\nimport { Ionicons } from '@expo/vector-icons';\r\n\r\nconst MAPS_KEY = \"AIzaSyDw26V3Tw0g6tXKWX5ruHx8nAl6eJrn7vI\";\r\n\r\nconst AddDonationScreen = () => {\r\n  const [donationCategory, setDonationCategory] = useState('groceries');\r\n  const [donationDescription, setDonationDescription] = useState('');\r\n  const [donationPhotos, setDonationPhotos] = useState([]);\r\n  const [pickupTime, setPickupTime] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [errors, setErrors] = useState({\r\n    description: '',\r\n    photos: '',\r\n    pickupTime: ''\r\n  });\r\n  const [meetingPoint, setMeetingPoint] = useState({\r\n    address: '',\r\n    lat: null,\r\n    lng: null,\r\n    placeId: null\r\n  });\r\n  const [isWebMapsLoaded, setIsWebMapsLoaded] = useState(false);\r\n  \r\n  const meetingPointRef = useRef(null);\r\n  const webAutocompleteRefs = {\r\n    meetingPoint: useRef(null)\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (Platform.OS === 'web' && isWebMapsLoaded) {\r\n      try {\r\n        const meetingInput = document.getElementById('meeting-point-input');\r\n        if (meetingInput && !webAutocompleteRefs.meetingPoint.current) {\r\n          webAutocompleteRefs.meetingPoint.current = new window.google.maps.places.Autocomplete(\r\n            meetingInput,\r\n            {\r\n              types: ['geocode', 'establishment'],\r\n              componentRestrictions: { country: 'us' },\r\n              fields: ['formatted_address', 'geometry', 'place_id']\r\n            }\r\n          );\r\n          \r\n          webAutocompleteRefs.meetingPoint.current.addListener('place_changed', () => {\r\n            const place = webAutocompleteRefs.meetingPoint.current.getPlace();\r\n            if (!place.geometry) return;\r\n            \r\n            handleMeetingPointSelect(null, {\r\n              description: place.formatted_address,\r\n              geometry: { location: place.geometry.location },\r\n              place_id: place.place_id\r\n            });\r\n          });\r\n        }\r\n      } catch (error) {\r\n        console.error('Error initializing autocomplete:', error);\r\n      }\r\n    }\r\n  }, [isWebMapsLoaded]);\r\n\r\n  useEffect(() => {\r\n    if (Platform.OS === 'web') {\r\n      if (window.google && window.google.maps) {\r\n        setIsWebMapsLoaded(true);\r\n        return;\r\n      }\r\n\r\n      const scriptId = 'google-maps-script';\r\n      if (document.getElementById(scriptId)) {\r\n        setIsWebMapsLoaded(true);\r\n        return;\r\n      }\r\n\r\n      const script = document.createElement('script');\r\n      script.id = scriptId;\r\n      script.src = `https://maps.googleapis.com/maps/api/js?key=${MAPS_KEY}&libraries=places`;\r\n      script.async = true;\r\n      script.defer = true;\r\n      \r\n      script.onload = () => {\r\n        console.log('Google Maps script loaded successfully');\r\n        setIsWebMapsLoaded(true);\r\n      };\r\n      \r\n      script.onerror = () => {\r\n        console.error('Failed to load Google Maps script');\r\n        Alert.alert('Error', 'Failed to load maps functionality');\r\n      };\r\n\r\n      document.head.appendChild(script);\r\n\r\n      return () => {\r\n        if (document.head.contains(script)) {\r\n          document.head.removeChild(script);\r\n        }\r\n      };\r\n    }\r\n  }, []);\r\n\r\n  const handleMeetingPointSelect = async (data, details = null) => {\r\n    let address, lat, lng, placeId;\r\n    \r\n    if (Platform.OS === 'web') {\r\n      if (!details) return;\r\n      \r\n      address = details.description;\r\n      lat = details.geometry.location.lat();\r\n      lng = details.geometry.location.lng();\r\n      placeId = details.place_id;\r\n    } else {\r\n      if (!details) {\r\n        console.warn('No details for place:', data?.description);\r\n        return;\r\n      }\r\n      \r\n      address = data.description;\r\n      lat = details.geometry?.location?.lat || null;\r\n      lng = details.geometry?.location?.lng || null;\r\n      placeId = details.place_id;\r\n    }\r\n    \r\n    setMeetingPoint({ address, lat, lng, placeId });\r\n    \r\n    if (Platform.OS !== 'web' && meetingPointRef.current) {\r\n      meetingPointRef.current.setAddressText(address);\r\n      meetingPointRef.current.blur();\r\n    }\r\n  };\r\n\r\n  const renderLocationInput = (label, key, value, onChangeText) => {\r\n    return (\r\n      <>\r\n        <Text style={styles.label}>{label}</Text>\r\n        <TextInput\r\n          id={`${key}-input`}\r\n          style={styles.input}\r\n          placeholder={`Enter ${label.toLowerCase()}`}\r\n          value={value}\r\n          onChangeText={onChangeText}\r\n          placeholderTextColor=\"#888\"\r\n        />\r\n      </>\r\n    );\r\n  };\r\n\r\n  const renderMobileAutocomplete = (label, ref, onPress) => {\r\n    return (\r\n      <>\r\n        <Text style={styles.label}>{label}</Text>\r\n        <View style={styles.autocompleteWrapper}>\r\n          <GooglePlacesAutocomplete\r\n            placeholder={`Enter ${label.toLowerCase()}`}\r\n            onPress={onPress}\r\n            query={{\r\n              key: MAPS_KEY,\r\n              language: 'en',\r\n              components: 'country:us',\r\n              types: ['geocode', 'establishment']\r\n            }}\r\n            styles={{\r\n              textInput: styles.input,\r\n              listView: styles.dropdown,\r\n              description: styles.placeDescription\r\n            }}\r\n            ref={ref}\r\n            fetchDetails\r\n            enablePoweredByContainer={false}\r\n            debounce={300}\r\n            keepResultsAfterBlur={false}\r\n            listViewDisplayed=\"auto\"\r\n            renderRow={(item) => <Text style={styles.placeItem}>{item.description}</Text>}\r\n          />\r\n        </View>\r\n      </>\r\n    );\r\n  };\r\n\r\n  const requestPermissions = async () => {\r\n    if (Platform.OS !== 'web') {\r\n      const { status } = await ImagePicker.requestMediaLibraryPermissionsAsync();\r\n      if (status !== 'granted') {\r\n        Alert.alert('Permission Denied', 'We need access to your photos to select images.');\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  };\r\n\r\n  const handleChoosePhotosMobile = async () => {\r\n    const hasPermission = await requestPermissions();\r\n    if (!hasPermission) return;\r\n\r\n    try {\r\n      const result = await ImagePicker.launchImageLibraryAsync({\r\n        mediaType: ImagePicker.MediaTypeOptions.Images,\r\n        quality: 0.5,\r\n        allowsMultipleSelection: true,\r\n        selectionLimit: 5,\r\n      });\r\n\r\n      if (!result.canceled) {\r\n        const selectedPhotos = result.assets.map((asset) => asset.uri);\r\n\r\n        if (selectedPhotos.length > 5) {\r\n          setErrors(prev => ({...prev, photos: 'Maximum 5 photos allowed'}));\r\n          return;\r\n        }\r\n\r\n        setDonationPhotos(selectedPhotos);\r\n        setErrors(prev => ({...prev, photos: ''}));\r\n      }\r\n    } catch (error) {\r\n      console.error('Error picking image:', error);\r\n      Alert.alert('Error', 'Failed to select photos. Please try again.');\r\n    }\r\n  };\r\n\r\n  const handleChoosePhotos = Platform.select({\r\n    ios: handleChoosePhotosMobile,\r\n    android: handleChoosePhotosMobile,\r\n    web: () => document.getElementById('fileInput').click(), \r\n  });\r\n\r\n  const handleFileChange = async (event) => {\r\n    const files = event.target.files;\r\n\r\n    if (files.length > 5) {\r\n      setErrors(prev => ({...prev, photos: 'Maximum 5 photos allowed'}));\r\n      return;\r\n    }\r\n\r\n    const fileArray = Array.from(files);\r\n    const fileUrls = fileArray.map(file => URL.createObjectURL(file));\r\n    setDonationPhotos(fileUrls);\r\n    setErrors(prev => ({...prev, photos: ''}));\r\n  };\r\n\r\n  const validateForm = () => {\r\n    let isValid = true;\r\n    const newErrors = { description: '', photos: '', pickupTime: '' };\r\n\r\n    if (!donationDescription.trim()) {\r\n      newErrors.description = 'Description is required';\r\n      isValid = false;\r\n    }\r\n\r\n    if (!meetingPoint.address.trim()) {\r\n      newErrors.address = 'Address is required';\r\n      isValid = false;\r\n    }\r\n\r\n    if (!pickupTime.trim()) {\r\n      newErrors.pickupTime = 'Available time and date is required';\r\n      isValid = false;\r\n    }\r\n\r\n    setErrors(newErrors);\r\n    return isValid;\r\n  };\r\n\r\n  // const uploadToCloudinary = async (photo) => {\r\n  //   const data = new FormData();\r\n\r\n  //   if (Platform.OS === 'web') {\r\n  //     const response = await fetch(photo);\r\n  //     const blob = await response.blob();\r\n  //     data.append('file', blob);\r\n  //   } else {\r\n  //     const filename = photo.split('/').pop();\r\n  //     const match = /\\.(\\w+)$/.exec(filename);\r\n  //     const type = match ? `image/${match[1]}` : 'image/jpeg';\r\n\r\n  //     data.append('file', {\r\n  //       uri: photo,\r\n  //       name: filename,\r\n  //       type\r\n  //     });\r\n  //   }\r\n\r\n  //   data.append('upload_preset', 'donations_preset');\r\n  //   data.append('cloud_name', 'do0u4ae7b');\r\n\r\n  //   try {\r\n  //     const res = await fetch('https://api.cloudinary.com/v1_1/do0u4ae7b/image/upload', {\r\n  //       method: 'POST',\r\n  //       body: data,\r\n  //     });\r\n\r\n  //     const result = await res.json();\r\n  //     if (result.secure_url) {\r\n  //       return result.secure_url;\r\n  //     } else {\r\n  //       throw new Error(`Failed to upload image`);\r\n  //     }\r\n  //   } catch (error) {\r\n  //     console.error(`Error uploading image`, error);\r\n  //     throw new Error('Cloudinary upload failed. Please try again.');\r\n  //   }\r\n  // };\r\n\r\n  const uploadToCloudinary = async (photoUri) => {\r\n  // Different handling for web vs mobile\r\n  let file;\r\n  \r\n  if (Platform.OS === 'web') {\r\n    // For web - fetch the blob from the object URL\r\n    const response = await fetch(photoUri);\r\n    file = await response.blob();\r\n  } else {\r\n    // For mobile - create file object\r\n    const filename = photoUri.split('/').pop();\r\n    const match = /\\.(\\w+)$/.exec(filename);\r\n    const type = match ? `image/${match[1]}` : 'image/jpeg';\r\n    \r\n    file = {\r\n      uri: photoUri,\r\n      name: filename,\r\n      type\r\n    };\r\n  }\r\n\r\n  const data = new FormData();\r\n  data.append('file', file);\r\n  data.append('upload_preset', 'donations_preset');\r\n  data.append('cloud_name', 'do0u4ae7b');\r\n\r\n  try {\r\n    const response = await fetch('https://api.cloudinary.com/v1_1/do0u4ae7b/image/upload', {\r\n      method: 'POST',\r\n      body: data,\r\n    });\r\n\r\n    const result = await response.json();\r\n    if (!response.ok) throw new Error(result.message || 'Upload failed');\r\n    return result.secure_url;\r\n  } catch (error) {\r\n    console.error('Upload error:', error);\r\n    throw error;\r\n  }\r\n};\r\n  const handleSubmit = async () => {\r\n    if (!validateForm()) {\r\n      return;\r\n    }\r\n\r\n    const user = auth.currentUser;\r\n    if (!user) {\r\n      Alert.alert('Authentication Error', 'You must be logged in to submit a donation.');\r\n      return;\r\n    }\r\n    \r\n    setIsLoading(true);\r\n    \r\n    try {\r\n      const token = await user.getIdToken();\r\n      const uploadPromises = donationPhotos.map(photo => \r\n      uploadToCloudinary(photo)\r\n        .catch(error => {\r\n          console.error(`Failed to upload image: ${error}`);\r\n          return null; // Continue even if some uploads fail\r\n        })\r\n    );\r\n\r\n    const uploadedUrls = (await Promise.all(uploadPromises))\r\n      .filter(url => url !== null); // Remove failed uploads\r\n\r\n      const donationData = {\r\n        token,\r\n        donationCategory,\r\n        donationDescription,\r\n        donorAddress: {\r\n          address: meetingPoint.address,\r\n          coordinates: new GeoPoint(meetingPoint.lat, meetingPoint.lng),\r\n          placeId: meetingPoint.placeId\r\n        },\r\n        pickupTime,\r\n        donationPhotos: uploadedUrls,\r\n      };\r\n\r\n      const response = await axios.post('http://localhost:5000/api/user/donations', donationData);\r\n      if(response.status === 201){\r\n        Alert.alert('Success', 'Donation added successfully!');\r\n        \r\n        // Reset form\r\n        setDonationCategory('groceries');\r\n        setDonationDescription('');\r\n        setPickupTime('');\r\n        setDonationPhotos([]);\r\n        setMeetingPoint({\r\n          address: '',\r\n          lat: null,\r\n          lng: null,\r\n          placeId: null\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('Error submitting donation:', error);\r\n      const errorMessage = error.response?.data?.message || \r\n                          'Failed to submit donation. Please check your connection and try again.';\r\n      Alert.alert('Submission Error', errorMessage);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <ScrollView style={styles.container}>\r\n      <View style={styles.contentContainer}>\r\n        <Text style={styles.headerText}>Start your pickup Request</Text>\r\n\r\n        {/* Category selection */}\r\n        <View style={styles.inputGroup}>\r\n          <Text style={styles.label}>Category *</Text>\r\n          <View style={styles.pickerContainer}>\r\n            <Picker\r\n              selectedValue={donationCategory}\r\n              onValueChange={setDonationCategory}\r\n              style={styles.picker}\r\n            >\r\n              <Picker.Item label=\"Groceries\" value=\"groceries\" />\r\n              <Picker.Item label=\"Clothing\" value=\"clothing\" />\r\n              <Picker.Item label=\"Furniture\" value=\"furniture\" />\r\n              <Picker.Item label=\"Others\" value=\"others\" />\r\n            </Picker>\r\n          </View>\r\n        </View>\r\n\r\n        {/* Description input */}\r\n        <View style={styles.inputGroup}>\r\n          <Text style={styles.label}>Description *</Text>\r\n          <TextInput\r\n            value={donationDescription}\r\n            onChangeText={(text) => {\r\n              setDonationDescription(text);\r\n              if (text.trim()) {\r\n                setErrors(prev => ({...prev, description: ''}));\r\n              }\r\n            }}\r\n            placeholder=\"Describe the items you're donating\"\r\n            multiline\r\n            style={[styles.input, errors.description ? styles.errorInput : {}]}\r\n            placeholderTextColor=\"#888\"\r\n          />\r\n          {errors.description ? (\r\n            <Text style={styles.errorText}>{errors.description}</Text>\r\n          ) : null}\r\n        </View>\r\n\r\n        {/* Address input */}\r\n        <View style={styles.inputGroup}>\r\n          {Platform.OS === 'web' ? (\r\n            renderLocationInput(\r\n              'Pickup Address',\r\n              'meeting-point',\r\n              meetingPoint.address,\r\n              (text) => setMeetingPoint(prev => ({ ...prev, address: text }))\r\n            )\r\n          ) : (\r\n            renderMobileAutocomplete(\r\n              'Pickup Address',\r\n              meetingPointRef,\r\n              handleMeetingPointSelect\r\n            )\r\n          )}\r\n          {errors.address ? (\r\n            <Text style={styles.errorText}>{errors.address}</Text>\r\n          ) : null}\r\n        </View>\r\n\r\n        {/* Pickup time */}\r\n        <View style={styles.inputGroup}>\r\n          <Text style={styles.label}>Available Time & Date *</Text>\r\n          <TextInput\r\n            value={pickupTime}\r\n            onChangeText={(text) => {\r\n              setPickupTime(text);\r\n              if (text.trim()) {\r\n                setErrors(prev => ({...prev, pickupTime: ''}));\r\n              }\r\n            }}\r\n            placeholder=\"Enter available pickup time and date\"\r\n            style={[styles.input, errors.pickupTime ? styles.errorInput : {}]}\r\n            placeholderTextColor=\"#888\"\r\n          />\r\n          {errors.pickupTime ? (\r\n            <Text style={styles.errorText}>{errors.pickupTime}</Text>\r\n          ) : null}\r\n        </View>\r\n\r\n        {/* Photo upload */}\r\n        <View style={styles.inputGroup}>\r\n          <TouchableOpacity \r\n            onPress={handleChoosePhotos} \r\n            style={styles.uploadButton}\r\n          >\r\n            <Ionicons name=\"images\" size={20} color=\"#000\" style={styles.uploadIcon} />\r\n            <Text style={styles.uploadButtonText}>Upload Donation Photos (Max 5)</Text>\r\n          </TouchableOpacity>\r\n\r\n          {errors.photos ? (\r\n            <Text style={styles.errorText}>{errors.photos}</Text>\r\n          ) : null}\r\n\r\n          {/* File input for web */}\r\n          {Platform.OS === 'web' && (\r\n            <input\r\n              type=\"file\"\r\n              id=\"fileInput\"\r\n              multiple\r\n              accept=\"image/*\"\r\n              onChange={handleFileChange}\r\n              style={{ display: 'none' }}\r\n            />\r\n          )}\r\n        </View>\r\n\r\n        {/* Photo preview */}\r\n        {donationPhotos.length > 0 && (\r\n          <View style={styles.inputGroup}>\r\n            <Text style={styles.photoPreviewText}>Selected Photos:</Text>\r\n            <ScrollView \r\n              horizontal \r\n              showsHorizontalScrollIndicator={false} \r\n              contentContainerStyle={styles.photoScroll}\r\n            >\r\n              {donationPhotos.map((photoUri, index) => (\r\n                <View key={index} style={styles.photoItem}>\r\n                  <Image \r\n                    source={{ uri: photoUri }} \r\n                    style={styles.photo}\r\n                  />\r\n                  <TouchableOpacity \r\n                    onPress={() => {\r\n                      const updatedPhotos = [...donationPhotos];\r\n                      updatedPhotos.splice(index, 1);\r\n                      setDonationPhotos(updatedPhotos);\r\n                    }}\r\n                    style={styles.deleteButton}\r\n                  >\r\n                    <Ionicons name=\"close\" size={16} color=\"#fff\" />\r\n                  </TouchableOpacity>\r\n                </View>\r\n              ))}\r\n            </ScrollView>\r\n          </View>\r\n        )}\r\n\r\n        {/* Submit button */}\r\n        <View style={styles.submitContainer}>\r\n          {isLoading ? (\r\n            <View style={styles.loadingContainer}>\r\n              <ActivityIndicator size=\"large\" color=\"#000\" />\r\n              <Text style={styles.loadingText}>Submitting donation...</Text>\r\n            </View>\r\n          ) : (\r\n            <TouchableOpacity \r\n              onPress={handleSubmit} \r\n              style={styles.submitButton}\r\n            >\r\n              <Text style={styles.submitButtonText}>Add Donation</Text>\r\n            </TouchableOpacity>\r\n          )}\r\n        </View>\r\n\r\n        {/* Required fields notice */}\r\n        <Text style={styles.requiredFieldsText}>\r\n          * Required fields\r\n        </Text>\r\n      </View>\r\n    </ScrollView>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: '#fff',\r\n  },\r\n  contentContainer: {\r\n    padding: 20,\r\n    maxWidth: 800,\r\n    width: '100%',\r\n    alignSelf: 'center',\r\n  },\r\n  headerText: {\r\n    fontSize: 28,\r\n    fontWeight: '700',\r\n    marginBottom: 30,\r\n    textAlign: 'center',\r\n    color: '#000',\r\n  },\r\n  inputGroup: {\r\n    marginBottom: 20,\r\n  },\r\n  label: {\r\n    fontSize: 16,\r\n    fontWeight: '600',\r\n    marginBottom: 8,\r\n    color: '#000',\r\n  },\r\n  pickerContainer: {\r\n    borderWidth: 1,\r\n    borderColor: '#eee',\r\n    borderRadius: 8,\r\n    overflow: 'hidden',\r\n  },\r\n  picker: {\r\n    height: 50,\r\n    backgroundColor: '#fff',\r\n    color: '#000',\r\n  },\r\n  input: {\r\n    height: 50,\r\n    borderWidth: 1,\r\n    borderColor: '#eee',\r\n    marginBottom: 5,\r\n    paddingHorizontal: 15,\r\n    backgroundColor: '#fff',\r\n    borderRadius: 8,\r\n    fontSize: 16,\r\n    color: '#000',\r\n  },\r\n  errorInput: {\r\n    borderColor: '#ff0000',\r\n  },\r\n  errorText: {\r\n    color: 'red',\r\n    fontSize: 14,\r\n    marginTop: 5,\r\n  },\r\n  uploadButton: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    padding: 15,\r\n    borderWidth: 1,\r\n    borderColor: '#eee',\r\n    borderRadius: 8,\r\n    backgroundColor: '#fff',\r\n  },\r\n  uploadIcon: {\r\n    marginRight: 10,\r\n  },\r\n  uploadButtonText: {\r\n    fontSize: 16,\r\n    color: '#000',\r\n    fontWeight: '500',\r\n  },\r\n  photoPreviewText: {\r\n    fontSize: 16,\r\n    fontWeight: '600',\r\n    marginBottom: 10,\r\n    color: '#000',\r\n  },\r\n  photoScroll: {\r\n    flexDirection: 'row',\r\n    paddingVertical: 5,\r\n  },\r\n  photoItem: {\r\n    marginRight: 15,\r\n    position: 'relative',\r\n  },\r\n  photo: {\r\n    width: 100,\r\n    height: 100,\r\n    borderRadius: 8,\r\n    borderWidth: 1,\r\n    borderColor: '#eee',\r\n  },\r\n  deleteButton: {\r\n    position: 'absolute',\r\n    top: -8,\r\n    right: -8,\r\n    backgroundColor: '#000',\r\n    borderRadius: 12,\r\n    width: 24,\r\n    height: 24,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n  },\r\n  submitContainer: {\r\n    marginTop: 20,\r\n    marginBottom: 30,\r\n  },\r\n  submitButton: {\r\n    backgroundColor: '#000',\r\n    padding: 16,\r\n    borderRadius: 8,\r\n    alignItems: 'center',\r\n  },\r\n  submitButtonText: {\r\n    color: '#fff',\r\n    fontSize: 18,\r\n    fontWeight: '600',\r\n  },\r\n  loadingContainer: {\r\n    alignItems: 'center',\r\n    padding: 16,\r\n  },\r\n  loadingText: {\r\n    marginTop: 10,\r\n    color: '#555',\r\n  },\r\n  requiredFieldsText: {\r\n    textAlign: 'center',\r\n    color: '#666',\r\n    fontSize: 14,\r\n  },\r\n  autocompleteWrapper: {\r\n    zIndex: 1,\r\n  },\r\n  dropdown: {\r\n    backgroundColor: '#fff',\r\n    borderWidth: 1,\r\n    borderColor: '#eee',\r\n    borderRadius: 8,\r\n    marginTop: 5,\r\n  },\r\n  placeDescription: {\r\n    color: '#000',\r\n    padding: 10,\r\n  },\r\n  placeItem: {\r\n    padding: 10,\r\n    color: '#000',\r\n  },\r\n});\r\n\r\nexport default AddDonationScreen;","import React, { useEffect, useState, useRef } from \"react\";\r\nimport { \r\n  View, \r\n  StyleSheet, \r\n  Platform, \r\n  Text, \r\n  ScrollView,\r\n  TouchableOpacity,\r\n  Linking,\r\n  ActivityIndicator,\r\n  TextInput\r\n} from \"react-native\";\r\nimport axios from \"axios\";\r\nimport * as Location from 'expo-location';\r\n\r\nexport default function MapScreen() {\r\n  const [boxes, setBoxes] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [userLocation, setUserLocation] = useState(null);\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const [searchResults, setSearchResults] = useState([]);\r\n  const [showSearchResults, setShowSearchResults] = useState(false);\r\n  const [mapZoom, setMapZoom] = useState(13);\r\n  const mapRef = useRef(null);\r\n  const mapInstance = useRef(null);\r\n  const autocompleteService = useRef(null);\r\n  const placesService = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (Platform.OS === \"web\" && window.google) {\r\n      autocompleteService.current = new window.google.maps.places.AutocompleteService();\r\n      placesService.current = new window.google.maps.places.PlacesService(document.createElement('div'));\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        let { status } = await Location.requestForegroundPermissionsAsync();\r\n        \r\n        if (status !== 'granted') {\r\n          setError('Permission to access location was denied');\r\n          const defaultLocation = { latitude: 37.7749, longitude: -122.4194 };\r\n          setUserLocation(defaultLocation);\r\n          fetchNearbyBoxes(defaultLocation.latitude, defaultLocation.longitude);\r\n          return;\r\n        }\r\n        \r\n        const location = await Location.getCurrentPositionAsync({});\r\n        const userCoords = {\r\n          latitude: location.coords.latitude,\r\n          longitude: location.coords.longitude\r\n        };\r\n        setUserLocation(userCoords);\r\n        fetchNearbyBoxes(userCoords.latitude, userCoords.longitude);\r\n      } catch (err) {\r\n        console.error(\"Error getting location:\", err);\r\n        setError('Failed to get your location');\r\n        const defaultLocation = { latitude: 37.7749, longitude: -122.4194 };\r\n        setUserLocation(defaultLocation);\r\n        fetchNearbyBoxes(defaultLocation.latitude, defaultLocation.longitude);\r\n      }\r\n    })();\r\n  }, []);\r\n\r\n  const handleSearchChange = (text) => {\r\n    setSearchQuery(text);\r\n    if (text.length > 2 && Platform.OS === \"web\" && autocompleteService.current) {\r\n      autocompleteService.current.getPlacePredictions(\r\n        { input: text, types: ['geocode'] },\r\n        (predictions, status) => {\r\n          if (status === 'OK') {\r\n            setSearchResults(predictions);\r\n            setShowSearchResults(true);\r\n          } else {\r\n            setShowSearchResults(false);\r\n          }\r\n        }\r\n      );\r\n    } else {\r\n      setShowSearchResults(false);\r\n    }\r\n  };\r\n\r\n  // Handle location selection from search results\r\n  const handleLocationSelect = (place) => {\r\n    setSearchQuery(place.description);\r\n    setShowSearchResults(false);\r\n    \r\n    // Get details of the selected place\r\n    placesService.current.getDetails(\r\n      { placeId: place.place_id },\r\n      (placeDetails, status) => {\r\n        if (status === 'OK' && placeDetails.geometry && placeDetails.geometry.location) {\r\n          const newLocation = {\r\n            latitude: placeDetails.geometry.location.lat(),\r\n            longitude: placeDetails.geometry.location.lng()\r\n          };\r\n          setUserLocation(newLocation);\r\n          fetchNearbyBoxes(newLocation.latitude, newLocation.longitude);\r\n          \r\n          // Center map on selected location\r\n          if (mapInstance.current) {\r\n            mapInstance.current.setCenter({\r\n              lat: newLocation.latitude,\r\n              lng: newLocation.longitude\r\n            });\r\n          }\r\n        }\r\n      }\r\n    );\r\n  };\r\n\r\n  // Fetch nearby donation boxes from MongoDB\r\n  const fetchNearbyBoxes = async (latitude, longitude) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    \r\n    try {\r\n      const response = await axios.get(\r\n        `http://localhost:5000/api/user/donation-boxes?lat=${latitude}&lng=${longitude}&radius=5&limit=10`\r\n      );\r\n      \r\n      const nearbyBoxes = response.data;\r\n      console.log(`Fetched ${nearbyBoxes.length} nearby boxes`);\r\n      \r\n      if (nearbyBoxes.length === 0) {\r\n        console.log(\"No boxes found nearby, trying with a larger radius\");\r\n        const fallbackResponse = await axios.get(\r\n          `http://localhost:5000/api/user/donation-boxes?lat=${latitude}&lng=${longitude}&radius=20&limit=10`\r\n        );\r\n        nearbyBoxes.push(...fallbackResponse.data);\r\n      }\r\n      \r\n      const boxesWithDistance = nearbyBoxes\r\n        .filter(box => box.coordinates && typeof box.coordinates.latitude === 'number' && typeof box.coordinates.longitude === 'number')\r\n        .map(box => {\r\n          const distance = calculateDistance(\r\n            latitude,\r\n            longitude,\r\n            box.coordinates.latitude,\r\n            box.coordinates.longitude\r\n          );\r\n          \r\n          return {\r\n            ...box,\r\n            distance: distance.toFixed(1) + \" miles away\",\r\n            location: {\r\n              coordinates: [box.coordinates.longitude, box.coordinates.latitude]\r\n            }\r\n          };\r\n        });\r\n      \r\n      const sortedBoxes = boxesWithDistance.sort((a, b) => \r\n        parseFloat(a.distance) - parseFloat(b.distance)\r\n      ).slice(0, 10); \r\n      \r\n      setBoxes(sortedBoxes);\r\n      \r\n      if (Platform.OS === \"web\" && window.google?.maps) {\r\n        initializeMap(sortedBoxes);\r\n      }\r\n      \r\n    } catch (apiError) {\r\n      console.error(\"API Error:\", apiError);\r\n      setError(\"Couldn't connect to server. Using sample data.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Calculate distance between coordinates\r\n  const calculateDistance = (lat1, lon1, lat2, lon2) => {\r\n    const R = 3958.8;\r\n    const dLat = (lat2 - lat1) * Math.PI / 180;\r\n    const dLon = (lon2 - lon1) * Math.PI / 180;\r\n    const a = \r\n      Math.sin(dLat/2) * Math.sin(dLat/2) +\r\n      Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) * \r\n      Math.sin(dLon/2) * Math.sin(dLon/2);\r\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\r\n    return R * c;\r\n  };\r\n\r\n  // Open directions in Google Maps\r\n  const openDirections = (lat, lng, name) => {\r\n    const url = Platform.select({\r\n      ios: `maps:0,0?q=${lat},${lng}(${name})`,\r\n      android: `geo:0,0?q=${lat},${lng}(${name})`,\r\n      web: `https://www.google.com/maps/dir/?api=1&destination=${lat},${lng}&destination_place_id=${name}`\r\n    });\r\n    \r\n    Linking.openURL(url);\r\n  };\r\n\r\n  // Handle map zoom controls\r\n  const handleZoomIn = () => {\r\n    if (mapInstance.current) {\r\n      const currentZoom = mapInstance.current.getZoom();\r\n      mapInstance.current.setZoom(currentZoom + 1);\r\n      setMapZoom(currentZoom + 1);\r\n    }\r\n  };\r\n\r\n  const handleZoomOut = () => {\r\n    if (mapInstance.current) {\r\n      const currentZoom = mapInstance.current.getZoom();\r\n      if (currentZoom > 1) {\r\n        mapInstance.current.setZoom(currentZoom - 1);\r\n        setMapZoom(currentZoom - 1);\r\n      }\r\n    }\r\n  };\r\n\r\n  // Initialize Google Maps\r\n  const initializeMap = (boxesToDisplay) => {\r\n    if (!mapRef.current || !window.google?.maps || !userLocation) return;\r\n    \r\n    const map = new window.google.maps.Map(mapRef.current, {\r\n      center: { lat: userLocation.latitude, lng: userLocation.longitude },\r\n      zoom: mapZoom,\r\n      scrollwheel: true, // Enable scroll wheel zooming\r\n      gestureHandling: 'cooperative', // Makes the map require Ctrl+Scroll to zoom, allowing normal page scrolling\r\n      zoomControl: false, // We'll add custom zoom controls\r\n      mapTypeControl: true,\r\n      streetViewControl: false,\r\n      fullscreenControl: true\r\n    });\r\n    \r\n    mapInstance.current = map;\r\n    \r\n    // Add user location marker\r\n    new window.google.maps.Marker({\r\n      position: { lat: userLocation.latitude, lng: userLocation.longitude },\r\n      map,\r\n      title: \"Your Location\",\r\n      icon: {\r\n        url: \"https://maps.google.com/mapfiles/ms/icons/blue-dot.png\"\r\n      }\r\n    });\r\n    \r\n    // Add markers for each donation box\r\n    boxesToDisplay.forEach(box => {\r\n      const marker = new window.google.maps.Marker({\r\n        position: { \r\n          lat: box.location.coordinates[1], \r\n          lng: box.location.coordinates[0] \r\n        },\r\n        map,\r\n        title: box.name\r\n      });\r\n      \r\n      const infoWindow = new window.google.maps.InfoWindow({\r\n        content: `\r\n          <div>\r\n            <h3>${box.name}</h3>\r\n            <p>${box.address}</p>\r\n            <p>${box.distance}</p>\r\n          </div>\r\n        `\r\n      });\r\n      \r\n      marker.addListener(\"click\", () => {\r\n        infoWindow.open(map, marker);\r\n      });\r\n    });\r\n  };\r\n\r\n  // Load Google Maps API\r\n  useEffect(() => {\r\n    if (Platform.OS === \"web\" && !window.google) {\r\n      const script = document.createElement(\"script\");\r\n      script.src = `https://maps.googleapis.com/maps/api/js?key=AIzaSyDSahTexUybVADs-MwPT4MNnWai_-kTr1I&libraries=places`;\r\n      script.async = true;\r\n      script.defer = true;\r\n      script.onload = () => {\r\n        autocompleteService.current = new window.google.maps.places.AutocompleteService();\r\n        placesService.current = new window.google.maps.places.PlacesService(document.createElement('div'));\r\n        if (userLocation && boxes.length > 0) {\r\n          initializeMap(boxes);\r\n        }\r\n      };\r\n      document.head.appendChild(script);\r\n      \r\n      return () => {\r\n        document.head.removeChild(script);\r\n      };\r\n    }\r\n  }, [userLocation, boxes]);\r\n\r\n  if (loading && !boxes.length) {\r\n    return (\r\n      <View style={[styles.container, styles.centered]}>\r\n        <ActivityIndicator size=\"large\" color=\"#007AFF\" />\r\n        <Text style={styles.loadingText}>Finding donation boxes near you...</Text>\r\n      </View>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <ScrollView \r\n      style={styles.mainScrollView}\r\n      contentContainerStyle={styles.mainScrollViewContent}\r\n      showsVerticalScrollIndicator={true}\r\n      persistentScrollbar={true}\r\n    >\r\n      <View style={styles.container}>\r\n        <Text style={styles.header}>DonateIt</Text>\r\n        <Text style={styles.subheader}>Donation boxes near you</Text>\r\n        \r\n        {/* Search Bar */}\r\n        <View style={styles.searchContainer}>\r\n          <TextInput\r\n            style={styles.searchInput}\r\n            placeholder=\"Search for a location...\"\r\n            value={searchQuery}\r\n            onChangeText={handleSearchChange}\r\n          />\r\n          {showSearchResults && (\r\n            <View style={styles.searchResultsContainer}>\r\n              <ScrollView \r\n                style={styles.searchResultsScroll}\r\n                keyboardShouldPersistTaps=\"handled\"\r\n                nestedScrollEnabled={true}\r\n              >\r\n                {searchResults.map((result) => (\r\n                  <TouchableOpacity\r\n                    key={result.place_id}\r\n                    style={styles.searchResultItem}\r\n                    onPress={() => handleLocationSelect(result)}\r\n                  >\r\n                    <Text>{result.description}</Text>\r\n                  </TouchableOpacity>\r\n                ))}\r\n              </ScrollView>\r\n            </View>\r\n          )}\r\n        </View>\r\n        \r\n        {/* Google Maps Integration */}\r\n        {Platform.OS === \"web\" && (\r\n          <View style={styles.mapContainer}>\r\n            <View style={styles.mapHeaderContainer}>\r\n              <Text style={styles.mapLabel}>Donation Boxes Map</Text>\r\n              <View style={styles.mapControlsContainer}>\r\n                <TouchableOpacity \r\n                  style={styles.mapControlButton}\r\n                  onPress={handleZoomIn}\r\n                >\r\n                  <Text style={styles.mapControlText}>+</Text>\r\n                </TouchableOpacity>\r\n                <TouchableOpacity \r\n                  style={styles.mapControlButton}\r\n                  onPress={handleZoomOut}\r\n                >\r\n                  <Text style={styles.mapControlText}>-</Text>\r\n                </TouchableOpacity>\r\n              </View>\r\n            </View>\r\n            \r\n            {error ? (\r\n              <Text style={styles.errorText}>{error}</Text>\r\n            ) : (\r\n              <div\r\n                ref={mapRef}\r\n                style={{\r\n                  width: '100%',\r\n                  height: 300,\r\n                  borderRadius: 8,\r\n                  overflow: 'hidden'\r\n                }}\r\n              />\r\n            )}\r\n            <Text style={styles.mapInstructions}>\r\n              Use Ctrl + Scroll to zoom the map, or the +/- buttons above.\r\n            </Text>\r\n          </View>\r\n        )}\r\n        \r\n        {/* Location info */}\r\n        {userLocation && (\r\n          <View style={styles.locationInfo}>\r\n            <Text style={styles.locationText}>\r\n              {error ? \"Using default location\" : \"Using your current location\"}\r\n            </Text>\r\n            <TouchableOpacity \r\n              style={styles.refreshButton}\r\n              onPress={() => {\r\n                if (userLocation) {\r\n                  fetchNearbyBoxes(userLocation.latitude, userLocation.longitude);\r\n                }\r\n              }}\r\n            >\r\n              <Text style={styles.refreshText}>Refresh</Text>\r\n            </TouchableOpacity>\r\n          </View>\r\n        )}\r\n        \r\n        {/* Nearby Donation Boxes List */}\r\n        <Text style={styles.sectionHeader}>\r\n          Nearby Donation Boxes </Text>\r\n        \r\n        {boxes.length === 0 && !loading ? (\r\n          <Text style={styles.noBoxesText}>No donation boxes found nearby.</Text>\r\n        ) : (\r\n          <View style={styles.scrollContainer}>\r\n            <ScrollView \r\n              style={styles.boxesContainer}\r\n              contentContainerStyle={styles.boxesContentContainer}\r\n              showsVerticalScrollIndicator={true}\r\n              persistentScrollbar={true}\r\n              alwaysBounceVertical={true}\r\n              scrollEventThrottle={16}\r\n              nestedScrollEnabled={true}\r\n            >\r\n              {boxes.map((box) => (\r\n                <View key={box._id || Math.random().toString()} style={styles.boxCard}>\r\n                  <Text style={styles.boxName}>{box.name}</Text>\r\n                  <Text style={styles.boxDistance}>{box.distance}</Text>\r\n                  <Text style={styles.boxAddress}>{box.address}</Text>\r\n                  \r\n                  <TouchableOpacity \r\n                    style={styles.directionsButton}\r\n                    onPress={() => openDirections(\r\n                      box.location.coordinates[1],\r\n                      box.location.coordinates[0],\r\n                      box.name\r\n                    )}\r\n                  >\r\n                    <Text style={styles.directionsText}>Directions</Text>\r\n                  </TouchableOpacity>\r\n                  \r\n                  <View style={styles.divider} />\r\n                </View>\r\n              ))}\r\n            </ScrollView>\r\n          </View>\r\n        )}\r\n      </View>\r\n    </ScrollView>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  mainScrollView: {\r\n    flex: 1,\r\n    backgroundColor: '#fff',\r\n  },\r\n  mainScrollViewContent: {\r\n    flexGrow: 1,\r\n  },\r\n  container: {\r\n    flex: 1,\r\n    padding: 20,\r\n    backgroundColor: '#fff'\r\n  },\r\n  centered: {\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n  },\r\n  header: {\r\n    fontSize: 24,\r\n    fontWeight: 'bold',\r\n    marginBottom: 5,\r\n    color: '#000'\r\n  },\r\n  subheader: {\r\n    fontSize: 16,\r\n    color: '#666',\r\n    marginBottom: 20\r\n  },\r\n  searchContainer: {\r\n    marginBottom: 20,\r\n    position: 'relative',\r\n    zIndex: 10\r\n  },\r\n  searchInput: {\r\n    height: 40,\r\n    borderColor: '#ccc',\r\n    borderWidth: 1,\r\n    borderRadius: 8,\r\n    paddingHorizontal: 10,\r\n    backgroundColor: '#fff'\r\n  },\r\n  searchResultsContainer: {\r\n    position: 'absolute',\r\n    top: 40,\r\n    left: 0,\r\n    right: 0,\r\n    backgroundColor: '#fff',\r\n    borderColor: '#ccc',\r\n    borderWidth: 1,\r\n    borderRadius: 8,\r\n    zIndex: 1000,\r\n    maxHeight: 200,\r\n    overflow: 'hidden'\r\n  },\r\n  searchResultsScroll: {\r\n    maxHeight: 200\r\n  },\r\n  searchResultItem: {\r\n    padding: 10,\r\n    borderBottomColor: '#eee',\r\n    borderBottomWidth: 1\r\n  },\r\n  mapContainer: {\r\n    marginBottom: 20,\r\n    borderRadius: 8,\r\n    overflow: 'hidden',\r\n    borderWidth: 1,\r\n    borderColor: '#eee'\r\n  },\r\n  mapHeaderContainer: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    paddingHorizontal: 10,\r\n    paddingTop: 10,\r\n    paddingBottom: 5\r\n  },\r\n  mapLabel: {\r\n    fontWeight: 'bold',\r\n    fontSize: 16,\r\n    color: '#000',\r\n  },\r\n  mapControlsContainer: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n  },\r\n  mapControlButton: {\r\n    width: 30,\r\n    height: 30,\r\n    backgroundColor: '#f0f0f0',\r\n    borderRadius: 15,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    marginLeft: 8,\r\n    borderWidth: 1,\r\n    borderColor: '#ddd'\r\n  },\r\n  mapControlText: {\r\n    fontSize: 18,\r\n    fontWeight: 'bold',\r\n    color: '#333'\r\n  },\r\n  mapInstructions: {\r\n    fontSize: 12,\r\n    color: '#666',\r\n    fontStyle: 'italic',\r\n    textAlign: 'center',\r\n    paddingVertical: 5\r\n  },\r\n  divider: {\r\n    height: 1,\r\n    backgroundColor: '#eee',\r\n    marginVertical: 15\r\n  },\r\n  sectionHeader: {\r\n    fontSize: 18,\r\n    fontWeight: 'bold',\r\n    marginBottom: 15,\r\n    color: '#000'\r\n  },\r\n  scrollContainer: {\r\n    flex: 1,\r\n    height: Platform.OS === 'web' ? 350 : '60%',\r\n    borderWidth: 1,\r\n    borderColor: '#eee',\r\n    borderRadius: 8,\r\n    overflow: 'hidden'\r\n  },\r\n  boxesContainer: {\r\n    flex: 1,\r\n    height: '100%'\r\n  },\r\n  boxesContentContainer: {\r\n    paddingVertical: 10,\r\n    paddingHorizontal: 5\r\n  },\r\n  boxCard: {\r\n    marginBottom: 15,\r\n    padding: 15,\r\n    backgroundColor: '#f9f9f9',\r\n    borderRadius: 8\r\n  },\r\n  boxName: {\r\n    fontWeight: 'bold',\r\n    fontSize: 16,\r\n    marginBottom: 5,\r\n    color: '#000'\r\n  },\r\n  boxDistance: {\r\n    color: '#666',\r\n    marginBottom: 5,\r\n    fontSize: 14\r\n  },\r\n  boxAddress: {\r\n    color: '#333',\r\n    marginBottom: 10,\r\n    fontSize: 14\r\n  },\r\n  directionsButton: {\r\n    backgroundColor: '#000',\r\n    padding: 10,\r\n    borderRadius: 5,\r\n    alignSelf: 'flex-start',\r\n  },\r\n  directionsText: {\r\n    color: '#fff',\r\n    fontWeight: 'bold'\r\n  },\r\n  locationInfo: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    marginBottom: 15\r\n  },\r\n  locationText: {\r\n    color: '#666',\r\n    fontSize: 14\r\n  },\r\n  refreshButton: {\r\n    backgroundColor: '#f0f0f0',\r\n    padding: 8,\r\n    borderRadius: 5\r\n  },\r\n  refreshText: {\r\n    color: '#000',\r\n    fontSize: 12,\r\n    fontWeight: 'bold'\r\n  },\r\n  errorText: {\r\n    color: 'red',\r\n    padding: 10\r\n  },\r\n  loadingText: {\r\n    marginTop: 10,\r\n    color: '#666'\r\n  },\r\n  noBoxesText: {\r\n    color: '#666',\r\n    fontStyle: 'italic',\r\n    textAlign: 'center',\r\n    marginTop: 20\r\n  }\r\n});","import React, { createContext, useState, useEffect, useContext } from 'react';\r\nimport { auth } from '../firebaseConfig';  // Make sure this imports Firebase auth\r\nimport { getFirestore, doc, getDoc } from 'firebase/firestore';\r\nimport { onAuthStateChanged } from 'firebase/auth';  // Add this import\r\n\r\nconst db = getFirestore();\r\nconst UserContext = createContext();\r\n\r\nexport const UserContextProvider = ({ children }) => {\r\n  const [user, setUser] = useState(null);\r\n  const [profileComplete, setProfileComplete] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = onAuthStateChanged(auth, async (firebaseUser) => {\r\n      try {\r\n        if (firebaseUser) {\r\n          const userDocRef = doc(db, \"users\", firebaseUser.uid);\r\n          const userDocSnap = await getDoc(userDocRef);\r\n          \r\n          setProfileComplete(userDocSnap.exists() && userDocSnap.data().profileCreated);\r\n          setUser({\r\n            uid: firebaseUser.uid,\r\n            email: firebaseUser.email,\r\n            ...(userDocSnap.exists() ? userDocSnap.data() : {})\r\n          });\r\n        } else {\r\n          setUser(null);\r\n          setProfileComplete(false);\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error in auth state change:\", error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    });\r\n\r\n    return () => unsubscribe();\r\n  }, []);\r\n\r\n  return (\r\n    <UserContext.Provider value={{ user, profileComplete, loading }}>\r\n      {children}\r\n    </UserContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useUserContext = () => useContext(UserContext);","import React, { useEffect, useState, useCallback } from \"react\";\r\nimport {\r\n  View,\r\n  FlatList,\r\n  TouchableOpacity,\r\n  Text,\r\n  StyleSheet,\r\n  ActivityIndicator,\r\n  SafeAreaView,\r\n  StatusBar,\r\n  Image,\r\n  RefreshControl,\r\n  Alert,\r\n  TextInput\r\n} from \"react-native\";\r\nimport { collection, query, where, onSnapshot, getDocs, doc, setDoc } from \"firebase/firestore\";\r\nimport { useNavigation, useFocusEffect } from \"@react-navigation/native\";\r\nimport { db, auth } from \"../firebaseConfig\";\r\nimport { useUserContext } from \"../contexts/UserContext\";\r\nimport { Ionicons } from '@expo/vector-icons';\r\n\r\nconst ChatListScreen = ({ route }) => {\r\n  const [chats, setChats] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [refreshing, setRefreshing] = useState(false);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [usersData, setUsersData] = useState({});\r\n  const { user } = useUserContext();\r\n  const navigation = useNavigation();\r\n\r\n  // Function to get unique chat key for deduplication\r\n  const getChatKey = (participants) => {\r\n    return participants.sort().join('_');\r\n  };\r\n\r\n  // Fetch all users data\r\n  useEffect(() => {\r\n    const usersRef = collection(db, \"users\");\r\n    const unsubscribeUsers = onSnapshot(usersRef, (snapshot) => {\r\n      const users = {};\r\n      snapshot.forEach(doc => {\r\n        users[doc.id] = doc.data();\r\n      });\r\n      setUsersData(users);\r\n    });\r\n\r\n    return () => unsubscribeUsers();\r\n  }, []);\r\n\r\n  // Check for existing chat between current user and other user\r\n  const checkExistingChat = async (otherUserId) => {\r\n    try {\r\n      const chatsRef = collection(db, \"chats\");\r\n      const q = query(\r\n        chatsRef,\r\n        where(\"participants\", \"array-contains\", user.uid)\r\n      );\r\n      \r\n      const querySnapshot = await getDocs(q);\r\n      \r\n      for (const doc of querySnapshot.docs) {\r\n        const data = doc.data();\r\n        if (data.participants.includes(otherUserId)) {\r\n          return {\r\n            id: doc.id,\r\n            ...data,\r\n            participants: data.participants\r\n          };\r\n        }\r\n      }\r\n      return null;\r\n    } catch (error) {\r\n      console.error(\"Error checking for existing chat:\", error);\r\n      return null;\r\n    }\r\n  };\r\n\r\n  // Create or get existing chat\r\n  const getOrCreateChat = async (otherUserId, otherUserName, eventId, eventName) => {\r\n    try {\r\n      // Check for existing chat first\r\n      const existingChat = await checkExistingChat(otherUserId);\r\n      \r\n      if (existingChat) {\r\n        return {\r\n          chatId: existingChat.id,\r\n          otherUserId,\r\n          otherUserName: usersData[otherUserId]?.name || otherUserName, // Use fresh user data\r\n          eventName: existingChat.eventName || eventName\r\n        };\r\n      }\r\n\r\n      // Create new chat if none exists\r\n      const newChat = {\r\n        participants: [user.uid, otherUserId],\r\n        participantInfo: {\r\n          [user.uid]: {\r\n            name: user.displayName || \"You\",\r\n            photoURL: user.photoURL || null\r\n          },\r\n          [otherUserId]: {\r\n            name: usersData[otherUserId]?.name || otherUserName, // Use fresh user data\r\n            photoURL: usersData[otherUserId]?.photoURL || null\r\n          }\r\n        },\r\n        eventId,\r\n        eventName,\r\n        lastMessage: \"\",\r\n        lastMessageAt: new Date(),\r\n        createdAt: new Date(),\r\n        chatKey: getChatKey([user.uid, otherUserId])\r\n      };\r\n\r\n      const newChatRef = doc(collection(db, \"chats\"));\r\n      await setDoc(newChatRef, newChat);\r\n      \r\n      return {\r\n        chatId: newChatRef.id,\r\n        otherUserId,\r\n        otherUserName: usersData[otherUserId]?.name || otherUserName, // Use fresh user data\r\n        eventName\r\n      };\r\n    } catch (error) {\r\n      console.error(\"Error in getOrCreateChat:\", error);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  // Fetch chats with deduplication\r\n  const fetchChats = useCallback(() => {\r\n    let unsubscribe = () => {};\r\n\r\n    try {\r\n      if (!user?.uid) {\r\n        setLoading(false);\r\n        setError(\"User not authenticated\");\r\n        return unsubscribe;\r\n      }\r\n\r\n      setLoading(true);\r\n      setError(null);\r\n\r\n      const q = query(\r\n        collection(db, \"chats\"),\r\n        where(\"participants\", \"array-contains\", user.uid)\r\n      );\r\n\r\n      unsubscribe = onSnapshot(q, (snapshot) => {\r\n        const chatMap = new Map();\r\n\r\n        snapshot.docs.forEach((doc) => {\r\n          const data = doc.data();\r\n          const participants = data.participants || [];\r\n          const otherUserId = participants.find(id => id !== user.uid);\r\n          const chatKey = data.chatKey || getChatKey(participants);\r\n\r\n          const existingChat = chatMap.get(chatKey);\r\n          const currentLastMessageAt = data.lastMessageAt?.toDate() || new Date(0);\r\n\r\n          if (!existingChat || currentLastMessageAt > existingChat.lastMessageAt) {\r\n            chatMap.set(chatKey, {\r\n              id: doc.id,\r\n              lastMessage: data.lastMessage || \"No messages yet\",\r\n              lastMessageAt: currentLastMessageAt,\r\n              otherUserId,\r\n              otherUserName: usersData[otherUserId]?.name || // Use fresh user data\r\n                            data.participantInfo?.[otherUserId]?.name ||\r\n                            (user.role === \"organizer\" ? \"Attendee\" : \"Organizer\"),\r\n              otherUserPhoto: usersData[otherUserId]?.photoURL || // Use fresh user data\r\n                            data.participantInfo?.[otherUserId]?.photoURL ||\r\n                            null,\r\n              eventName: data.eventName || \"Unknown Event\",\r\n              participants,\r\n              chatKey\r\n            });\r\n          }\r\n        });\r\n\r\n        const uniqueChats = Array.from(chatMap.values()).sort(\r\n          (a, b) => b.lastMessageAt - a.lastMessageAt\r\n        );\r\n\r\n        setChats(uniqueChats);\r\n        setLoading(false);\r\n        setRefreshing(false);\r\n      }, (error) => {\r\n        console.error(\"Firestore error:\", error);\r\n        setError(\"Failed to load chats\");\r\n        setLoading(false);\r\n        setRefreshing(false);\r\n      });\r\n\r\n    } catch (error) {\r\n      console.error(\"Error setting up listener:\", error);\r\n      setError(\"Failed to initialize chat service\");\r\n      setLoading(false);\r\n      setRefreshing(false);\r\n    }\r\n\r\n    return unsubscribe;\r\n  }, [user, usersData]); // Add usersData to dependencies\r\n\r\n  // Fetch on focus and initial load\r\n  useFocusEffect(\r\n    useCallback(() => {\r\n      const unsubscribe = fetchChats();\r\n      return () => unsubscribe();\r\n    }, [fetchChats])\r\n  );\r\n\r\n  const handleOpenChat = (chat) => {\r\n    if (!user?.uid || !chat?.id) {\r\n      Alert.alert(\"Error\", \"Cannot open chat at this time\");\r\n      return;\r\n    }\r\n\r\n    navigation.navigate('ChatScreen', {\r\n      chatId: chat.id,\r\n      otherUserId: chat.otherUserId,\r\n      otherUserName: usersData[chat.otherUserId]?.name || chat.otherUserName, // Use fresh user data\r\n      eventName: chat.eventName,\r\n      isOrganizer: user.role === \"organizer\"\r\n    });\r\n  };\r\n\r\n  const onRefresh = () => {\r\n    setRefreshing(true);\r\n    fetchChats();\r\n  };\r\n\r\n  // Filter chats based on search query\r\n  const filteredChats = chats.filter(chat => {\r\n    if (!searchQuery) return true;\r\n    \r\n    const query = searchQuery.toLowerCase();\r\n    return (\r\n      chat.otherUserName.toLowerCase().includes(query) ||\r\n      chat.eventName.toLowerCase().includes(query) ||\r\n      chat.lastMessage.toLowerCase().includes(query)\r\n    );\r\n  });\r\n\r\n  if (loading && !refreshing) {\r\n    return (\r\n      <View style={styles.centered}>\r\n        <ActivityIndicator size=\"large\" />\r\n        <Text style={styles.loadingText}>Loading your chats...</Text>\r\n      </View>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <View style={styles.centered}>\r\n        <Ionicons name=\"warning\" size={48} color=\"#FF3B30\" />\r\n        <Text style={styles.errorText}>{error}</Text>\r\n        <TouchableOpacity\r\n          style={styles.retryButton}\r\n          onPress={() => {\r\n            setError(null);\r\n            setLoading(true);\r\n            fetchChats();\r\n          }}\r\n        >\r\n          <Text style={styles.retryButtonText}>Try Again</Text>\r\n        </TouchableOpacity>\r\n      </View>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <SafeAreaView style={styles.container}>\r\n      <StatusBar barStyle=\"dark-content\" />\r\n      \r\n      <View style={styles.header}>\r\n        {/* <Text style={styles.headerTitle}>Messages</Text>\r\n        <TouchableOpacity onPress={() => navigation.navigate('NewChat')}>\r\n          <Ionicons name=\"create-outline\" size={24} color=\"#007AFF\" />\r\n        </TouchableOpacity> */}\r\n      </View>\r\n      \r\n      <View style={styles.searchContainer}>\r\n        <Ionicons name=\"search\" size={20} color=\"#8E8E93\" style={styles.searchIcon} />\r\n        <TextInput\r\n          style={styles.searchInput}\r\n          placeholder=\"Search chats...\"\r\n          placeholderTextColor=\"#8E8E93\"\r\n          value={searchQuery}\r\n          onChangeText={setSearchQuery}\r\n        />\r\n      </View>\r\n      \r\n      <FlatList\r\n        data={filteredChats}\r\n        keyExtractor={(item) => item.id}\r\n        renderItem={({ item }) => (\r\n          <TouchableOpacity \r\n            style={styles.chatItem}\r\n            onPress={() => handleOpenChat(item)}\r\n          >\r\n            {item.otherUserPhoto ? (\r\n              <Image source={{ uri: item.otherUserPhoto }} style={styles.avatar} />\r\n            ) : (\r\n              <View style={styles.avatarPlaceholder}>\r\n                <Text style={styles.avatarText}>\r\n                  {item.otherUserName.charAt(0).toUpperCase()}\r\n                </Text>\r\n              </View>\r\n            )}\r\n            \r\n            <View style={styles.chatContent}>\r\n              <Text style={styles.chatName}>{item.otherUserName}</Text>\r\n              <Text style={styles.eventName}>{item.eventName}</Text>\r\n              <Text style={styles.lastMessage}>{item.lastMessage}</Text>\r\n            </View>\r\n            \r\n            <Text style={styles.time}>\r\n              {item.lastMessageAt.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\r\n            </Text>\r\n          </TouchableOpacity>\r\n        )}\r\n        ListEmptyComponent={\r\n          <View style={styles.emptyContainer}>\r\n            <Ionicons name=\"chatbubbles-outline\" size={64} color=\"#C7C7CC\" />\r\n            <Text style={styles.emptyText}>No conversations found</Text>\r\n            <Text style={styles.emptySubtext}>\r\n              {searchQuery ? \"Try a different search\" : \"Start a new chat to get started\"}\r\n            </Text>\r\n          </View>\r\n        }\r\n        refreshControl={\r\n          <RefreshControl\r\n            refreshing={refreshing}\r\n            onRefresh={onRefresh}\r\n          />\r\n        }\r\n      />\r\n    </SafeAreaView>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: \"#fff\",\r\n  },\r\n  centered: {\r\n    flex: 1,\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    padding: 20,\r\n  },\r\n  loadingText: {\r\n    marginTop: 16,\r\n    color: \"#8E8E93\",\r\n  },\r\n  errorText: {\r\n    fontSize: 18,\r\n    color: \"#FF3B30\",\r\n    marginVertical: 16,\r\n    textAlign: \"center\",\r\n    paddingHorizontal: 24,\r\n  },\r\n  retryButton: {\r\n    backgroundColor: \"#007AFF\",\r\n    paddingHorizontal: 24,\r\n    paddingVertical: 12,\r\n    borderRadius: 8,\r\n    marginTop: 16,\r\n  },\r\n  retryButtonText: {\r\n    color: \"#fff\",\r\n    fontSize: 16,\r\n    fontWeight: \"500\",\r\n  },\r\n  header: {\r\n    flexDirection: \"row\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"center\",\r\n    padding: 16,\r\n    borderBottomWidth: StyleSheet.hairlineWidth,\r\n    borderBottomColor: \"#C6C6C8\",\r\n  },\r\n  headerTitle: {\r\n    fontSize: 34,\r\n    fontWeight: \"bold\",\r\n  },\r\n  searchContainer: {\r\n    flexDirection: \"row\",\r\n    alignItems: \"center\",\r\n    backgroundColor: \"#F2F2F7\",\r\n    borderRadius: 10,\r\n    marginHorizontal: 16,\r\n    marginVertical: 8,\r\n    paddingHorizontal: 12,\r\n    paddingVertical: 8,\r\n  },\r\n  searchIcon: {\r\n    marginRight: 8,\r\n  },\r\n  searchInput: {\r\n    flex: 1,\r\n    fontSize: 17,\r\n    color: \"#000\",\r\n    paddingVertical: 0,\r\n  },\r\n  chatItem: {\r\n    flexDirection: \"row\",\r\n    alignItems: \"center\",\r\n    paddingHorizontal: 16,\r\n    paddingVertical: 12,\r\n    borderBottomWidth: StyleSheet.hairlineWidth,\r\n    borderBottomColor: \"#C6C6C8\",\r\n  },\r\n  avatar: {\r\n    width: 56,\r\n    height: 56,\r\n    borderRadius: 28,\r\n    marginRight: 12,\r\n  },\r\n  avatarPlaceholder: {\r\n    width: 56,\r\n    height: 56,\r\n    borderRadius: 28,\r\n    backgroundColor: \"#E1E1E6\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    marginRight: 12,\r\n  },\r\n  avatarText: {\r\n    fontSize: 24,\r\n    fontWeight: \"500\",\r\n    color: \"#8E8E93\",\r\n  },\r\n  chatContent: {\r\n    flex: 1,\r\n  },\r\n  chatName: {\r\n    fontSize: 17,\r\n    fontWeight: \"500\",\r\n    marginBottom: 2,\r\n  },\r\n  eventName: {\r\n    fontSize: 15,\r\n    color: \"#8E8E93\",\r\n    marginBottom: 2,\r\n  },\r\n  lastMessage: {\r\n    fontSize: 16,\r\n    color: \"#00000099\",\r\n  },\r\n  time: {\r\n    fontSize: 15,\r\n    color: \"#8E8E93\",\r\n  },\r\n  emptyContainer: {\r\n    flex: 1,\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    padding: 40,\r\n  },\r\n  emptyText: {\r\n    fontSize: 20,\r\n    fontWeight: \"500\",\r\n    color: \"#8E8E93\",\r\n    marginTop: 16,\r\n  },\r\n  emptySubtext: {\r\n    fontSize: 16,\r\n    color: \"#8E8E93\",\r\n    marginTop: 8,\r\n    textAlign: \"center\",\r\n  },\r\n});\r\n\r\nexport default ChatListScreen;","import React, { useState, useEffect, useRef } from 'react';\r\nimport { \r\n  View, \r\n  Text, \r\n  TextInput, \r\n  Pressable, \r\n  FlatList, \r\n  KeyboardAvoidingView, \r\n  Platform,\r\n  StyleSheet,\r\n  Alert\r\n} from 'react-native';\r\nimport { auth, db } from '../firebaseConfig';\r\nimport { \r\n  collection, \r\n  addDoc, \r\n  query, \r\n  where, \r\n  onSnapshot, \r\n  orderBy, \r\n  doc, \r\n  setDoc,\r\n  serverTimestamp \r\n} from 'firebase/firestore';\r\n\r\nconst ChatScreen = ({ route, navigation }) => {\r\n  const { chatId, otherUserId, eventName } = route.params;\r\n  const [messages, setMessages] = useState([]);\r\n  const [newMessage, setNewMessage] = useState('');\r\n  const [usersData, setUsersData] = useState({});\r\n  const flatListRef = useRef(null);\r\n\r\n  // Fetch messages and user data\r\n  useEffect(() => {\r\n    // 1. Fetch messages for this chat\r\n    const messagesRef = collection(db, 'chats', chatId, 'messages');\r\n    const messagesQuery = query(messagesRef, orderBy('createdAt', 'asc'));\r\n    \r\n    const unsubscribeMessages = onSnapshot(messagesQuery, (querySnapshot) => {\r\n      const msgs = [];\r\n      querySnapshot.forEach((doc) => {\r\n        msgs.push({ id: doc.id, ...doc.data() });\r\n      });\r\n      setMessages(msgs);\r\n      \r\n      // Scroll to bottom after short delay\r\n      setTimeout(() => {\r\n        flatListRef.current?.scrollToEnd({ animated: true });\r\n      }, 100);\r\n    });\r\n\r\n    // 2. Fetch all users data - specifically looking for 'name' field\r\n    const usersRef = collection(db, 'users');\r\n    const unsubscribeUsers = onSnapshot(usersRef, (snapshot) => {\r\n      const users = {};\r\n      snapshot.forEach(doc => {\r\n        users[doc.id] = doc.data(); // Store all user data\r\n      });\r\n      setUsersData(users);\r\n    });\r\n\r\n    return () => {\r\n      unsubscribeMessages();\r\n      unsubscribeUsers();\r\n    };\r\n  }, [chatId]);\r\n\r\n  const handleSendMessage = async () => {\r\n    if (!newMessage.trim() || !auth.currentUser) return;\r\n  \r\n    try {\r\n      const messagesRef = collection(db, 'chats', chatId, 'messages');\r\n      \r\n      await addDoc(messagesRef, {\r\n        text: newMessage,\r\n        senderId: auth.currentUser.uid,\r\n        createdAt: serverTimestamp()\r\n      });\r\n  \r\n      const chatRef = doc(db, 'chats', chatId);\r\n      await setDoc(chatRef, {\r\n        lastMessage: newMessage,\r\n        lastMessageAt: serverTimestamp()\r\n      }, { merge: true });\r\n  \r\n      setNewMessage('');\r\n    } catch (error) {\r\n      console.error('Error sending message:', error);\r\n      Alert.alert('Error', 'Failed to send message. Please try again.');\r\n    }\r\n  };\r\n\r\n  const renderMessage = ({ item }) => {\r\n    const isCurrentUser = item.senderId === auth.currentUser?.uid;\r\n    const senderData = usersData[item.senderId] || {};\r\n    const displayName = senderData.name || 'Unknown';\r\n    const messageTime = item.createdAt?.toDate \r\n      ? item.createdAt.toDate().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\r\n      : '...';\r\n\r\n    return (\r\n      <View style={[\r\n        styles.messageContainer,\r\n        isCurrentUser ? styles.currentUserMessage : styles.otherUserMessage\r\n      ]}>\r\n        {!isCurrentUser && (\r\n          <Text style={styles.senderName}>{displayName}</Text>\r\n        )}\r\n        <Text style={styles.messageText}>{item.text}</Text>\r\n        <Text style={styles.messageTime}>{messageTime}</Text>\r\n      </View>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <KeyboardAvoidingView \r\n      behavior={Platform.OS === 'ios' ? 'padding' : 'height'}\r\n      style={styles.container}\r\n      keyboardVerticalOffset={90}\r\n    >\r\n      <View style={styles.header}>\r\n        <View style={styles.headerTextContainer}>\r\n          <Text style={styles.headerTitle}>{eventName}</Text>\r\n          <Text style={styles.headerSubtitle}>\r\n            Chat with {usersData[otherUserId]?.name || 'User'}\r\n          </Text>\r\n        </View>\r\n      </View>\r\n      \r\n      <FlatList\r\n        ref={flatListRef}\r\n        data={messages}\r\n        keyExtractor={(item) => item.id}\r\n        renderItem={renderMessage}\r\n        contentContainerStyle={styles.messagesList}\r\n        onContentSizeChange={() => flatListRef.current?.scrollToEnd({ animated: true })}\r\n        onLayout={() => flatListRef.current?.scrollToEnd({ animated: true })}\r\n      />\r\n      \r\n      <View style={styles.inputContainer}>\r\n        <TextInput\r\n          style={styles.input}\r\n          value={newMessage}\r\n          onChangeText={setNewMessage}\r\n          placeholder=\"Type a message...\"\r\n          multiline\r\n          placeholderTextColor=\"#999\"\r\n        />\r\n        <Pressable\r\n          style={({ pressed }) => [\r\n            styles.sendButton,\r\n            { opacity: pressed ? 0.7 : 1 },\r\n            !newMessage.trim() && styles.disabledButton\r\n          ]}\r\n          onPress={handleSendMessage}\r\n          disabled={!newMessage.trim()}\r\n        >\r\n          <Text style={styles.sendButtonText}>Send</Text>\r\n        </Pressable>\r\n      </View>\r\n    </KeyboardAvoidingView>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: '#fff',\r\n  },\r\n  header: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    padding: 16,\r\n    borderBottomWidth: 1,\r\n    borderBottomColor: '#f0f0f0',\r\n  },\r\n  headerTextContainer: {\r\n    flex: 1,\r\n  },\r\n  headerTitle: {\r\n    fontSize: 18,\r\n    fontWeight: 'bold',\r\n  },\r\n  headerSubtitle: {\r\n    fontSize: 14,\r\n    color: '#666',\r\n    marginTop: 4,\r\n  },\r\n  messagesList: {\r\n    padding: 16,\r\n    paddingBottom: 80,\r\n  },\r\n  messageContainer: {\r\n    padding: 12,\r\n    marginVertical: 4,\r\n    borderRadius: 12,\r\n    maxWidth: '80%',\r\n  },\r\n  currentUserMessage: {\r\n    alignSelf: 'flex-end',\r\n    backgroundColor: '#DCF8C6',\r\n    borderBottomRightRadius: 0,\r\n  },\r\n  otherUserMessage: {\r\n    alignSelf: 'flex-start',\r\n    backgroundColor: '#ECECEC',\r\n    borderBottomLeftRadius: 0,\r\n  },\r\n  senderName: {\r\n    fontWeight: 'bold',\r\n    color: '#333',\r\n    fontSize: 14,\r\n    marginBottom: 4,\r\n  },\r\n  messageText: {\r\n    fontSize: 16,\r\n    color: '#000',\r\n  },\r\n  messageTime: {\r\n    fontSize: 10,\r\n    textAlign: 'right',\r\n    marginTop: 4,\r\n    color: '#666',\r\n  },\r\n  inputContainer: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    padding: 10,\r\n    borderTopWidth: 1,\r\n    borderTopColor: '#eee',\r\n    backgroundColor: '#fff',\r\n    position: 'absolute',\r\n    bottom: 0,\r\n    left: 0,\r\n    right: 0,\r\n  },\r\n  input: {\r\n    flex: 1,\r\n    borderWidth: 1,\r\n    borderColor: '#ddd',\r\n    borderRadius: 20,\r\n    paddingHorizontal: 15,\r\n    paddingVertical: 10,\r\n    marginRight: 10,\r\n    maxHeight: 100,\r\n    backgroundColor: '#f9f9f9',\r\n  },\r\n  sendButton: {\r\n    backgroundColor: '#4CAF50',\r\n    borderRadius: 20,\r\n    paddingVertical: 10,\r\n    paddingHorizontal: 20,\r\n  },\r\n  disabledButton: {\r\n    backgroundColor: '#cccccc',\r\n  },\r\n  sendButtonText: {\r\n    color: 'white',\r\n    fontWeight: 'bold',\r\n  },\r\n});\r\n\r\nexport default ChatScreen;","// src/navigation/ChatNavigator.js\r\nimport React from \"react\";\r\nimport { createNativeStackNavigator } from \"@react-navigation/native-stack\";\r\nimport ChatListScreen from \"../screens/ChatListScreen\";\r\nimport ChatScreen from \"../screens/ChatScreen\";\r\n\r\nconst Stack = createNativeStackNavigator();\r\n\r\nconst ChatNavigator = () => {\r\n  return (\r\n    <Stack.Navigator>\r\n      <Stack.Screen \r\n        name=\"ChatList\" \r\n        component={ChatListScreen} \r\n        options={{ title: \"Messages\" }} \r\n      />\r\n      <Stack.Screen \r\n        name=\"ChatScreen\" \r\n        component={ChatScreen} \r\n        options={({ route }) => ({ \r\n          title: route.params?.eventName || \"Chat\",\r\n          headerBackTitle: \"Back\"\r\n        })} \r\n      />\r\n    </Stack.Navigator>\r\n  );\r\n};\r\n\r\nexport default ChatNavigator;","// src/navigation/BottomTabNavigator.js\r\nimport React from \"react\";\r\nimport { createBottomTabNavigator } from \"@react-navigation/bottom-tabs\";\r\nimport { Ionicons } from \"@expo/vector-icons\";\r\nimport HomeScreen from \"../screens/user/UserHomeScreen\";\r\nimport ProfileScreen from \"../screens/user/UserProfileScreen\";\r\nimport AddDonationScreen from \"../screens/user/AddDonationScreen\";\r\nimport BoxFinderScreen from \"../screens/user/BoxFinderScreen\";\r\nimport ChatNavigator from \"./ChatNavigator\";\r\n\r\nconst Tab = createBottomTabNavigator();\r\n\r\nconst BottomTabNavigator = () => {\r\n  return (\r\n    <Tab.Navigator\r\n      screenOptions={({ route }) => ({\r\n        tabBarIcon: ({ focused, color, size }) => {\r\n          let iconName;\r\n          \r\n          if (route.name === \"Home\") {\r\n            iconName = focused ? \"home\" : \"home-outline\";\r\n          } else if (route.name === \"Search\") {\r\n            iconName = focused ? \"search\" : \"search-outline\";\r\n          } else if (route.name === \"Add\") {\r\n            iconName = focused ? \"add-circle\" : \"add-circle-outline\";\r\n          } else if (route.name === \"Chats\") {\r\n            iconName = focused ? \"chatbubble\" : \"chatbubble-outline\";\r\n          } else if (route.name === \"Profile\") {\r\n            iconName = focused ? \"person\" : \"person-outline\";\r\n          }\r\n          \r\n          return <Ionicons name={iconName} size={size} color={color} />;\r\n        },\r\n        tabBarActiveTintColor: \"black\",\r\n        tabBarInactiveTintColor: \"gray\",\r\n        tabBarShowLabel: false,\r\n        headerShown: false,\r\n      })}\r\n    >\r\n      <Tab.Screen name=\"Home\" component={HomeScreen} />\r\n      <Tab.Screen name=\"Search\" component={BoxFinderScreen} />\r\n      <Tab.Screen name=\"Add\" component={AddDonationScreen} />\r\n      <Tab.Screen name=\"Chats\" component={ChatNavigator} />\r\n      <Tab.Screen name=\"Profile\" component={ProfileScreen} />\r\n    </Tab.Navigator>\r\n  );\r\n};\r\n\r\nexport default BottomTabNavigator;","import React, { useEffect, useState } from 'react';\r\nimport {\r\n  View,\r\n  Text,\r\n  Button,\r\n  FlatList,\r\n  ActivityIndicator,\r\n  TouchableOpacity,\r\n  TextInput,\r\n  StyleSheet,\r\n} from 'react-native';\r\nimport axios from 'axios';\r\nimport { Picker } from '@react-native-picker/picker';\r\n\r\nexport default function HomeScreen() {\r\n  const [events, setEvents] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [selectedEvent, setSelectedEvent] = useState(null);\r\n\r\n  const fetchEvents = async () => {\r\n    try {\r\n      const response = await axios.get('http://localhost:5000/api/user/events');\r\n      setEvents(response.data);\r\n    } catch (error) {\r\n      console.error('Error fetching events:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchEvents();\r\n  }, []);\r\n\r\n  const deleteEvent = async () => {\r\n    try {\r\n      await axios.delete(`http://localhost:5000/api/admin/events/${selectedEvent._id}`,\r\n        selectedEvent\r\n      );\r\n      setSelectedEvent(null);\r\n      fetchEvents();\r\n    } catch (error) {\r\n      console.error('Error deleting Event:', error);\r\n    }\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    try {\r\n      await axios.put(\r\n        `http://localhost:5000/api/admin/events/${selectedEvent._id}`,\r\n        editedDonation\r\n      );\r\n      setSelectedEvent(null);\r\n      fetchEvents();\r\n    } catch (error) {\r\n      console.error('Error deleting Event:', error);\r\n    }\r\n  };\r\n\r\n  const renderEvent = ({ item }) => (\r\n    <TouchableOpacity onPress={() => setSelectedEvent(item)}>\r\n      <View style={styles.donationItem}>\r\n        <Text style={styles.donationTitle}>{item.name}</Text>\r\n        <Text style={styles.donationText}>{item.description}</Text>\r\n        <Text style={styles.donationText}>Location: {item.location.address || \"\"}</Text>\r\n      </View>\r\n    </TouchableOpacity>\r\n  );\r\n\r\n  if (selectedEvent) {\r\n    return (\r\n      <View style={styles.container}>\r\n        <TouchableOpacity \r\n          onPress={() => setSelectedEvent(null)} \r\n          style={styles.backButton}\r\n        >\r\n          <Text style={styles.backButtonText}> Back</Text>\r\n        </TouchableOpacity>\r\n\r\n        <Text style={styles.detailTitle}>{selectedEvent.name}</Text>\r\n        \r\n        <View style={styles.detailContainer}>\r\n          <Text style={styles.detailLabel}>Description</Text>\r\n          <Text style={styles.detailText}>{selectedEvent.description}</Text>\r\n\r\n          <Text style={styles.detailLabel}>Location</Text>\r\n          <Text style={styles.detailText}>{selectedEvent.location.address}</Text>\r\n   \r\n        </View>\r\n\r\n        <View style={styles.buttonGroup}>          \r\n          <TouchableOpacity \r\n            style={styles.deleteButton}\r\n            onPress={deleteEvent}\r\n          >\r\n            <Text style={styles.buttonText}>Delete</Text>\r\n          </TouchableOpacity>\r\n        </View>\r\n      </View>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <Text style={styles.welcomeText}>Event Management</Text>\r\n      {loading ? (\r\n        <ActivityIndicator size=\"large\" color=\"#000000\" style={{ marginTop: 20 }} />\r\n      ) : (\r\n        <FlatList\r\n          data={events}\r\n          keyExtractor={(item) => item._id}\r\n          renderItem={renderEvent}\r\n          contentContainerStyle={styles.listContainer}\r\n          ListEmptyComponent={\r\n            <Text style={styles.emptyText}>No events found</Text>\r\n          }\r\n        />\r\n      )}\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    padding: 20,\r\n    backgroundColor: '#ffffff',\r\n  },\r\n  welcomeText: {\r\n    fontSize: 22,\r\n    fontWeight: '600',\r\n    marginBottom: 20,\r\n    color: '#000000',\r\n  },\r\n  listContainer: {\r\n    paddingBottom: 20,\r\n  },\r\n  donationItem: {\r\n    padding: 15,\r\n    marginVertical: 8,\r\n    backgroundColor: '#f8f8f8',\r\n    borderRadius: 8,\r\n    borderWidth: 1,\r\n    borderColor: '#e0e0e0',\r\n  },\r\n  donationTitle: {\r\n    fontSize: 16,\r\n    fontWeight: '600',\r\n    marginBottom: 5,\r\n    color: '#000000',\r\n  },\r\n  donationText: {\r\n    fontSize: 14,\r\n    color: '#333333',\r\n    marginBottom: 3,\r\n  },\r\n  backButton: {\r\n    marginBottom: 20,\r\n  },\r\n  backButtonText: {\r\n    fontSize: 18,\r\n    color: '#000000',\r\n  },\r\n  sectionTitle: {\r\n    fontSize: 20,\r\n    fontWeight: '600',\r\n    marginBottom: 20,\r\n    color: '#000000',\r\n  },\r\n  detailTitle: {\r\n    fontSize: 24,\r\n    fontWeight: '600',\r\n    marginBottom: 20,\r\n    color: '#000000',\r\n  },\r\n  detailContainer: {\r\n    marginBottom: 30,\r\n  },\r\n  detailLabel: {\r\n    fontSize: 16,\r\n    fontWeight: '600',\r\n    marginTop: 15,\r\n    marginBottom: 5,\r\n    color: '#000000',\r\n  },\r\n  detailText: {\r\n    fontSize: 16,\r\n    color: '#333333',\r\n  },\r\n  infoContainer: {\r\n    marginBottom: 20,\r\n  },\r\n  label: {\r\n    fontSize: 14,\r\n    fontWeight: '600',\r\n    marginTop: 10,\r\n    marginBottom: 5,\r\n    color: '#000000',\r\n  },\r\n  infoText: {\r\n    fontSize: 16,\r\n    marginBottom: 15,\r\n    color: '#333333',\r\n  },\r\n  input: {\r\n    borderWidth: 1,\r\n    borderColor: '#cccccc',\r\n    borderRadius: 5,\r\n    padding: 12,\r\n    marginBottom: 15,\r\n    fontSize: 16,\r\n    backgroundColor: '#ffffff',\r\n  },\r\n  buttonGroup: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    marginTop: 20,\r\n  },\r\n  editButton: {\r\n    backgroundColor: '#333333',\r\n    padding: 15,\r\n    borderRadius: 5,\r\n    flex: 1,\r\n    marginRight: 10,\r\n  },\r\n  saveButton: {\r\n    backgroundColor: '#333333',\r\n    padding: 15,\r\n    borderRadius: 5,\r\n  },\r\n  deleteButton: {\r\n    backgroundColor: '#333333',\r\n    padding: 15,\r\n    borderRadius: 5,\r\n    flex: 1,\r\n    marginLeft: 10,\r\n  },\r\n  buttonText: {\r\n    color: '#ffffff',\r\n    textAlign: 'center',\r\n    fontWeight: '600',\r\n  },\r\n  emptyText: {\r\n    textAlign: 'center',\r\n    marginTop: 20,\r\n    fontSize: 16,\r\n    color: '#666666',\r\n  },\r\n});","import React, { useEffect, useState } from 'react';\r\nimport {\r\n  View,\r\n  Text,\r\n  Alert,\r\n  ActivityIndicator,\r\n  TouchableOpacity,\r\n  SafeAreaView,\r\n  ScrollView,\r\n  StyleSheet\r\n} from 'react-native';\r\nimport { auth } from '../../firebaseConfig';\r\nimport axios from 'axios';\r\nimport { Ionicons } from '@expo/vector-icons';\r\nimport { sendPasswordResetEmail } from \"firebase/auth\";\r\n\r\n\r\nexport default function AdminProfileScreen({ navigation }) {\r\n  const [profile, setProfile] = useState(null);\r\n  const [error, setError] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const logout = async () => {\r\n    try {\r\n      await auth.signOut();\r\n    } catch (error) {\r\n      Alert.alert(\"Logout Error\", error.message);\r\n    }\r\n  }; \r\n\r\n    const handleResetPassword = async () => {\r\n    try {\r\n      const user = auth.currentUser;\r\n      if (!user) {\r\n        Alert.alert(\"Error\", \"User not authenticated\");\r\n        return;\r\n      }\r\n      await sendPasswordResetEmail(auth, user.email);\r\n      Alert.alert(\"Success\", \"Password reset email sent. Please check your inbox.\");\r\n      setShowSettingsModal(false);\r\n    } catch (error) {\r\n      console.error(\"Error sending password reset email:\", error);\r\n      Alert.alert(\"Error\", \"Failed to send password reset email\");\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const fetchProfile = async () => {\r\n      try {\r\n        setLoading(true);\r\n        const token = await auth.currentUser.getIdToken();\r\n\r\n        const res = await axios.get('http://localhost:5000/api/user/user-details', {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        });\r\n\r\n        setProfile(res.data);\r\n      } catch (err) {\r\n        const message = err.response?.data?.message || err.message;\r\n        Alert.alert('Error', message);\r\n        setError(message);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchProfile();\r\n  }, []);\r\n\r\n  if (loading) {\r\n    return (\r\n      <View style={styles.loadingContainer}>\r\n        <ActivityIndicator size=\"large\" color=\"#000\" />\r\n        <Text style={styles.loadingText}>Loading profile...</Text>\r\n      </View>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <View style={styles.errorContainer}>\r\n        <Ionicons name=\"warning\" size={40} color=\"#000\" />\r\n        <Text style={styles.errorText}>{error}</Text>\r\n        <TouchableOpacity \r\n          style={styles.retryButton}\r\n          onPress={() => {\r\n            setError(null);\r\n            setLoading(true);\r\n            fetchProfile();\r\n          }}\r\n        >\r\n          <Text style={styles.retryButtonText}>Try Again</Text>\r\n        </TouchableOpacity>\r\n      </View>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <SafeAreaView style={styles.container}>\r\n      <ScrollView contentContainerStyle={styles.scrollContent}>\r\n        <View style={styles.profileHeader}>\r\n          <View style={styles.profileImageContainer}>\r\n            <Ionicons name=\"person-circle-outline\" size={80} color=\"#000\" />\r\n          </View>\r\n          <Text style={styles.profileName}>{profile?.name || 'Admin'}</Text>\r\n          <Text style={styles.profileEmail}>{profile?.email}</Text>\r\n        </View>\r\n\r\n        <View style={styles.section}>\r\n          <Text style={styles.sectionTitle}>Account Information</Text>\r\n          \r\n          <View style={styles.infoRow}>\r\n            <Ionicons name=\"mail-outline\" size={20} color=\"#666\" />\r\n            <Text style={styles.infoText}>{profile?.email}</Text>\r\n          </View>\r\n          \r\n          <View style={styles.infoRow}>\r\n            <Ionicons name=\"person-outline\" size={20} color=\"#666\" />\r\n            <Text style={styles.infoText}>{profile?.name || 'Admin User'}</Text>\r\n          </View>\r\n        </View>\r\n\r\n      </ScrollView>\r\n\r\n      <View style={styles.footer}>\r\n         <TouchableOpacity \r\n          style={styles.actionButton}\r\n          onPress={handleResetPassword}\r\n        >\r\n          <Ionicons name=\"key-outline\" size={20} color=\"#000\" />\r\n          <Text style={styles.actionButtonText}>Reset Password</Text>\r\n          <Ionicons name=\"chevron-forward\" size={20} color=\"#666\" />\r\n        </TouchableOpacity>\r\n        <TouchableOpacity \r\n          style={styles.logoutButton}\r\n          onPress={logout}\r\n        >\r\n          <Ionicons name=\"log-out-outline\" size={20} color=\"#fff\" />\r\n          <Text style={styles.logoutText}>Log Out</Text>\r\n        </TouchableOpacity>\r\n      </View>\r\n    </SafeAreaView>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: '#fff',\r\n  },\r\n  scrollContent: {\r\n    padding: 16,\r\n    paddingBottom: 100,\r\n  },\r\n  loadingContainer: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    backgroundColor: '#fff',\r\n  },\r\n  loadingText: {\r\n    marginTop: 16,\r\n    color: '#000',\r\n    fontSize: 16,\r\n  },\r\n  errorContainer: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    padding: 24,\r\n    backgroundColor: '#fff',\r\n  },\r\n  errorText: {\r\n    fontSize: 16,\r\n    color: '#000',\r\n    marginTop: 16,\r\n    textAlign: 'center',\r\n    marginBottom: 24,\r\n  },\r\n  retryButton: {\r\n    backgroundColor: '#000',\r\n    paddingHorizontal: 24,\r\n    paddingVertical: 12,\r\n    borderRadius: 8,\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n  },\r\n  retryButtonText: {\r\n    color: '#fff',\r\n    fontWeight: '600',\r\n    marginLeft: 8,\r\n  },\r\n  profileHeader: {\r\n    alignItems: 'center',\r\n    marginBottom: 24,\r\n    padding: 20,\r\n    backgroundColor: '#fff',\r\n    borderRadius: 12,\r\n    borderWidth: 1,\r\n    borderColor: '#eee',\r\n  },\r\n  profileImageContainer: {\r\n    backgroundColor: '#f5f5f5',\r\n    borderRadius: 40,\r\n    padding: 8,\r\n  },\r\n  profileName: {\r\n    fontSize: 22,\r\n    fontWeight: '600',\r\n    marginTop: 12,\r\n    color: '#000',\r\n    textAlign: 'center',\r\n  },\r\n  profileEmail: {\r\n    fontSize: 16,\r\n    color: '#666',\r\n    marginTop: 4,\r\n    textAlign: 'center',\r\n  },\r\n  section: {\r\n    marginBottom: 16,\r\n    backgroundColor: '#fff',\r\n    borderRadius: 12,\r\n    padding: 20,\r\n    borderWidth: 1,\r\n    borderColor: '#eee',\r\n  },\r\n  sectionTitle: {\r\n    fontSize: 16,\r\n    fontWeight: '600',\r\n    color: '#000',\r\n    marginBottom: 16,\r\n  },\r\n  infoRow: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    marginBottom: 12,\r\n  },\r\n  infoText: {\r\n    fontSize: 16,\r\n    color: '#000',\r\n    marginLeft: 12,\r\n  },\r\n  actionButton: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    justifyContent: 'space-between',\r\n    padding: 16,\r\n    backgroundColor: '#fff',\r\n    borderRadius: 8,\r\n    borderWidth: 1,\r\n    borderColor: '#eee',\r\n    marginBottom: 16,\r\n  },\r\n  actionButtonText: {\r\n    flex: 1,\r\n    fontSize: 16,\r\n    color: '#000',\r\n    marginLeft: 12,\r\n  },\r\n  footer: {\r\n    position: 'absolute',\r\n    bottom: 0,\r\n    left: 0,\r\n    right: 0,\r\n    padding: 16,\r\n    backgroundColor: '#fff',\r\n    borderTopWidth: 1,\r\n    borderTopColor: '#eee',\r\n  },\r\n  logoutButton: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    padding: 16,\r\n    backgroundColor: '#000',\r\n    borderRadius: 8,\r\n  },\r\n  logoutText: {\r\n    fontSize: 16,\r\n    fontWeight: '500',\r\n    color: '#fff',\r\n    marginLeft: 8,\r\n  },\r\n});","import React, { useState, useEffect, useRef } from 'react';\r\nimport {\r\n  View, Text, TextInput, TouchableOpacity, StyleSheet,\r\n  Alert, ActivityIndicator, FlatList, Modal, Platform,\r\n} from 'react-native';\r\nimport axios from 'axios';\r\nimport { Ionicons } from '@expo/vector-icons';\r\nimport { GooglePlacesAutocomplete } from 'react-native-google-places-autocomplete';\r\n\r\nconst MAPS_KEY = \"AIzaSyDSahTexUybVADs-MwPT4MNnWai_-kTr1I\"; // Replace with your actual API key\r\n\r\nconst ManageDonationBoxesScreen = () => {\r\n  const [donationBoxes, setDonationBoxes] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [selectedDonationBox, setSelectedDonationBox] = useState(null);\r\n  const [isAddModalVisible, setIsAddModalVisible] = useState(false);\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    address: '',\r\n    latitude: '',\r\n    longitude: '',\r\n    type: '',\r\n    hours: '',\r\n    phone: ''\r\n  });\r\n  const [errors, setErrors] = useState({\r\n    name: '',\r\n    address: '',\r\n    type: '',\r\n    hours: ''\r\n  });\r\n  const [meetingPoint, setMeetingPoint] = useState({\r\n    address: '',\r\n    lat: null,\r\n    lng: null,\r\n    placeId: null\r\n  });\r\n  const [isWebMapsLoaded, setIsWebMapsLoaded] = useState(false);\r\n  const [mapsLoadingError, setMapsLoadingError] = useState(false);\r\n  \r\n  const meetingPointRef = useRef(null);\r\n  const autocompleteInitialized = useRef(false);\r\n\r\n  const fetchDonationBoxes = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await axios.get('http://localhost:5000/api/user/donation-boxes');\r\n      setDonationBoxes(response.data);\r\n    } catch (error) {\r\n      console.error('Error fetching donation boxes:', error);\r\n      Alert.alert('Error', 'Failed to fetch donation boxes');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchDonationBoxes();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (Platform.OS === 'web') {\r\n      if (window.google && window.google.maps) {\r\n        setIsWebMapsLoaded(true);\r\n        return;\r\n      }\r\n\r\n      const scriptId = 'google-maps-script';\r\n      if (document.getElementById(scriptId)) {\r\n        return;\r\n      }\r\n\r\n      const script = document.createElement('script');\r\n      script.id = scriptId;\r\n      script.src = `https://maps.googleapis.com/maps/api/js?key=${MAPS_KEY}&libraries=places`;\r\n      script.async = true;\r\n      script.defer = true;\r\n      \r\n      script.onload = () => {\r\n        setIsWebMapsLoaded(true);\r\n      };\r\n      \r\n      script.onerror = () => {\r\n        setMapsLoadingError(true);\r\n        Alert.alert('Error', 'Failed to load maps functionality');\r\n      };\r\n\r\n      document.head.appendChild(script);\r\n\r\n      return () => {\r\n        if (document.head.contains(script)) {\r\n          document.head.removeChild(script);\r\n        }\r\n      };\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (Platform.OS === 'web' && isWebMapsLoaded && isAddModalVisible) {\r\n      const timer = setTimeout(() => {\r\n        initWebAutocomplete();\r\n      }, 500);\r\n      \r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [isWebMapsLoaded, isAddModalVisible]);\r\n\r\n  const initWebAutocomplete = () => {\r\n    try {\r\n      const meetingInput = document.getElementById('meeting-point-input');\r\n      \r\n      if (!meetingInput || autocompleteInitialized.current) return;\r\n      \r\n      const options = {\r\n        types: ['geocode', 'establishment'],\r\n        componentRestrictions: { country: 'us' },\r\n        fields: ['formatted_address', 'geometry', 'place_id', 'name']\r\n      };\r\n\r\n      const autocomplete = new window.google.maps.places.Autocomplete(\r\n        meetingInput,\r\n        options\r\n      );\r\n      \r\n      meetingPointRef.current = autocomplete;\r\n      autocompleteInitialized.current = true;\r\n\r\n      autocomplete.addListener('place_changed', () => {\r\n        const place = autocomplete.getPlace();\r\n        \r\n        if (!place.geometry) {\r\n          setErrors(prev => ({...prev, address: 'Invalid location selected'}));\r\n          return;\r\n        }\r\n        \r\n        const location = {\r\n          address: place.formatted_address || place.name,\r\n          lat: place.geometry.location.lat(),\r\n          lng: place.geometry.location.lng(),\r\n          placeId: place.place_id\r\n        };\r\n\r\n        setMeetingPoint(location);\r\n        setFormData(prev => ({\r\n          ...prev,\r\n          address: location.address,\r\n          latitude: location.lat.toString(),\r\n          longitude: location.lng.toString()\r\n        }));\r\n        \r\n        setErrors(prev => ({...prev, address: ''}));\r\n      });\r\n      \r\n    } catch (error) {\r\n      console.error('Autocomplete initialization error:', error);\r\n      setMapsLoadingError(true);\r\n    }\r\n  };\r\n\r\n  const validateForm = () => {\r\n    let valid = true;\r\n    const newErrors = {\r\n      name: '',\r\n      address: '',\r\n      type: '',\r\n      hours: ''\r\n    };\r\n\r\n    if (!formData.name.trim()) {\r\n      newErrors.name = 'Name is required';\r\n      valid = false;\r\n    }\r\n\r\n    if ((!meetingPoint.address && !formData.address) || \r\n        (!meetingPoint.lat && !formData.latitude) || \r\n        (!meetingPoint.lng && !formData.longitude)) {\r\n      newErrors.address = 'Valid location is required';\r\n      valid = false;\r\n    }\r\n\r\n    if (!formData.type.trim()) {\r\n      newErrors.type = 'Type is required';\r\n      valid = false;\r\n    }\r\n\r\n    if (!formData.hours.trim()) {\r\n      newErrors.hours = 'Hours are required';\r\n      valid = false;\r\n    }\r\n\r\n    setErrors(newErrors);\r\n    return valid;\r\n  };\r\n\r\n  const handleMeetingPointSelect = async (data, details = null) => {\r\n    if (!details) return;\r\n    \r\n    const address = details.formatted_address || details.description || data?.description;\r\n    const lat = details.geometry?.location?.lat;\r\n    const lng = details.geometry?.location?.lng;\r\n    const placeId = details.place_id;\r\n    \r\n    if (!lat || !lng) return;\r\n    \r\n    setMeetingPoint({\r\n      address,\r\n      lat,\r\n      lng,\r\n      placeId\r\n    });\r\n    \r\n    setFormData(prev => ({\r\n      ...prev,\r\n      address,\r\n      latitude: lat.toString(),\r\n      longitude: lng.toString()\r\n    }));\r\n    \r\n    setErrors(prev => ({...prev, address: ''}));\r\n  };\r\n\r\n  const handleAddDonationBox = async () => {\r\n    if (!validateForm()) return;\r\n\r\n    try {\r\n      const latitude = meetingPoint.lat || parseFloat(formData.latitude);\r\n      const longitude = meetingPoint.lng || parseFloat(formData.longitude);\r\n      const address = meetingPoint.address || formData.address;\r\n      \r\n      if (!latitude || !longitude || !address) {\r\n        setErrors(prev => ({...prev, address: 'Valid location coordinates required'}));\r\n        return;\r\n      }\r\n      \r\n      const donationBoxData = {\r\n        ...formData,\r\n        address,\r\n        latitude,\r\n        longitude\r\n      };\r\n\r\n      const response = await axios.post('http://localhost:5000/api/admin/donation-boxes', donationBoxData);\r\n      setDonationBoxes([...donationBoxes, response.data]);\r\n      setIsAddModalVisible(false);\r\n      resetForm();\r\n      Alert.alert('Success', 'Donation box added successfully');\r\n    } catch (error) {\r\n      console.error('Error adding donation box:', error);\r\n      Alert.alert('Error', error.response?.data?.message || 'Failed to add donation box');\r\n    }\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setFormData({\r\n      name: '',\r\n      address: '',\r\n      latitude: '',\r\n      longitude: '',\r\n      type: '',\r\n      hours: '',\r\n      phone: ''\r\n    });\r\n    \r\n    setMeetingPoint({\r\n      address: '',\r\n      lat: null,\r\n      lng: null,\r\n      placeId: null\r\n    });\r\n    \r\n    setErrors({\r\n      name: '',\r\n      address: '',\r\n      type: '',\r\n      hours: ''\r\n    });\r\n    \r\n    if (Platform.OS === 'web') {\r\n      setTimeout(() => {\r\n        const meetingInput = document.getElementById('meeting-point-input');\r\n        if (meetingInput) meetingInput.value = '';\r\n      }, 100);\r\n    }\r\n  };\r\n\r\n  const deleteDonationBox = async () => {\r\n    try {\r\n      await axios.delete(`http://localhost:5000/api/admin/donation-boxes/${selectedDonationBox._id}`);\r\n      setSelectedDonationBox(null);\r\n      await fetchDonationBoxes();\r\n      Alert.alert('Success', 'Donation box deleted successfully');\r\n    } catch (error) {\r\n      console.error('Error deleting donation box:', error);\r\n      Alert.alert('Error', 'Failed to delete donation box');\r\n    }\r\n  };\r\n\r\n  const renderDonationBox = ({ item }) => (\r\n    <TouchableOpacity onPress={() => setSelectedDonationBox(item)}>\r\n      <View style={styles.boxContainer}>\r\n        <Text style={styles.boxName}>{item.name}</Text>\r\n        <Text style={styles.boxAddress}>{item.address}</Text>\r\n        <Text style={styles.boxType}>{item.type}</Text>\r\n      </View>\r\n    </TouchableOpacity>\r\n  );\r\n\r\n  if (selectedDonationBox) {\r\n    return (\r\n      <View style={styles.container}>\r\n        <TouchableOpacity \r\n          onPress={() => setSelectedDonationBox(null)} \r\n          style={styles.backButton}\r\n        >\r\n          <Ionicons name=\"arrow-back\" size={24} color=\"black\" />\r\n          <Text style={styles.backButtonText}>Back</Text>\r\n        </TouchableOpacity>\r\n        \r\n        <View style={styles.detailCard}>\r\n          <Text style={styles.detailTitle}>{selectedDonationBox.name}</Text>\r\n          \r\n          <View style={styles.detailRow}>\r\n            <Ionicons name=\"location-outline\" size={18} color=\"#333\" />\r\n            <Text style={styles.detailText}>{selectedDonationBox.address}</Text>\r\n          </View>\r\n          \r\n          <View style={styles.detailRow}>\r\n            <Ionicons name=\"pricetag-outline\" size={18} color=\"#333\" />\r\n            <Text style={styles.detailText}>{selectedDonationBox.type}</Text>\r\n          </View>\r\n          \r\n          <View style={styles.detailRow}>\r\n            <Ionicons name=\"time-outline\" size={18} color=\"#333\" />\r\n            <Text style={styles.detailText}>{selectedDonationBox.hours}</Text>\r\n          </View>\r\n          \r\n          {selectedDonationBox.phone && (\r\n            <View style={styles.detailRow}>\r\n              <Ionicons name=\"call-outline\" size={18} color=\"#333\" />\r\n              <Text style={styles.detailText}>{selectedDonationBox.phone}</Text>\r\n            </View>\r\n          )}\r\n          \r\n          <TouchableOpacity \r\n            style={styles.deleteButton}\r\n            onPress={deleteDonationBox}\r\n          >\r\n            <Text style={styles.deleteButtonText}>Delete Donation Box</Text>\r\n          </TouchableOpacity>\r\n        </View>\r\n      </View>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <View style={styles.header}>\r\n        <Text style={styles.headerTitle}>Donation Boxes</Text>\r\n        <TouchableOpacity \r\n          style={styles.addButton} \r\n          onPress={() => setIsAddModalVisible(true)}\r\n        >\r\n          <Ionicons name=\"add\" size={24} color=\"white\" />\r\n        </TouchableOpacity>\r\n      </View>\r\n\r\n      {loading ? (\r\n        <ActivityIndicator size=\"large\" color=\"#333\" style={{ marginTop: 20 }} />\r\n      ) : donationBoxes.length === 0 ? (\r\n        <View style={styles.emptyContainer}>\r\n          <Ionicons name=\"archive-outline\" size={50} color=\"#999\" />\r\n          <Text style={styles.emptyText}>No donation boxes found</Text>\r\n        </View>\r\n      ) : (\r\n        <FlatList\r\n          data={donationBoxes}\r\n          keyExtractor={(item) => item._id}\r\n          renderItem={renderDonationBox}\r\n          contentContainerStyle={styles.listContainer}\r\n        />\r\n      )}\r\n\r\n      <Modal visible={isAddModalVisible} animationType=\"slide\">\r\n        <View style={styles.modalContainer}>\r\n          <View style={styles.modalHeader}>\r\n            <TouchableOpacity \r\n              style={styles.closeButton}\r\n              onPress={() => {\r\n                setIsAddModalVisible(false);\r\n                resetForm();\r\n              }}\r\n            >\r\n              <Ionicons name=\"close\" size={24} color=\"black\" />\r\n            </TouchableOpacity>\r\n            <Text style={styles.modalTitle}>Add New Donation Box</Text>\r\n          </View>\r\n\r\n          <View style={styles.formSection}>\r\n            <Text style={styles.label}>Name *</Text>\r\n            <TextInput\r\n              style={styles.input}\r\n              placeholder=\"Enter donation box name\"\r\n              placeholderTextColor=\"#999\"\r\n              value={formData.name}\r\n              onChangeText={(text) => setFormData({ ...formData, name: text })}\r\n            />\r\n            {errors.name ? (\r\n              <Text style={styles.errorText}>{errors.name}</Text>\r\n            ) : null}\r\n\r\n            {Platform.OS === 'web' ? (\r\n              <>\r\n                <Text style={styles.label}>Location * {mapsLoadingError && '(Maps functionality unavailable)'}</Text>\r\n                <input\r\n                  id=\"meeting-point-input\"\r\n                  type=\"text\"\r\n                  placeholder=\"Search location\"\r\n                  disabled={mapsLoadingError}\r\n                  style={{\r\n                    width: '100%',\r\n                    padding: '15px',\r\n                    borderRadius: '8px',\r\n                    border: '1px solid #eee',\r\n                    marginBottom: '15px',\r\n                    backgroundColor: mapsLoadingError ? '#f1f1f1' : '#f8f8f8'\r\n                  }}\r\n                />\r\n                {meetingPoint.address && (\r\n                  <Text style={styles.selectedLocationText}>\r\n                    Selected: {meetingPoint.address}\r\n                  </Text>\r\n                )}\r\n                {errors.address ? (\r\n                  <Text style={styles.errorText}>{errors.address}</Text>\r\n                ) : null}\r\n              </>\r\n            ) : (\r\n              <>\r\n                <Text style={styles.label}>Location *</Text>\r\n                <GooglePlacesAutocomplete\r\n                  placeholder=\"Search location\"\r\n                  onPress={handleMeetingPointSelect}\r\n                  query={{\r\n                    key: MAPS_KEY,\r\n                    language: 'en',\r\n                    components: 'country:us',\r\n                    types: ['geocode', 'establishment']\r\n                  }}\r\n                  styles={{\r\n                    textInput: [styles.input, { height: 50 }],\r\n                    listView: styles.dropdown,\r\n                    description: styles.placeDescription,\r\n                    poweredContainer: { display: 'none' }\r\n                  }}\r\n                  ref={meetingPointRef}\r\n                  fetchDetails={true}\r\n                  enablePoweredByContainer={false}\r\n                  debounce={300}\r\n                  renderRow={(item) => (\r\n                    <View style={styles.placeItem}>\r\n                      <Ionicons name=\"location-outline\" size={18} color=\"#666\" />\r\n                      <Text style={styles.placeText}>{item.description}</Text>\r\n                    </View>\r\n                  )}\r\n                  textInputProps={{\r\n                    placeholderTextColor: '#999',\r\n                    returnKeyType: 'search',\r\n                    autoCorrect: false,\r\n                    autoCapitalize: 'none'\r\n                  }}\r\n                />\r\n                {errors.address ? (\r\n                  <Text style={styles.errorText}>{errors.address}</Text>\r\n                ) : null}\r\n              </>\r\n            )}\r\n\r\n            <Text style={styles.label}>Type *</Text>\r\n            <TextInput\r\n              style={styles.input}\r\n              placeholder=\"e.g., Clothing, Electronics\"\r\n              placeholderTextColor=\"#999\"\r\n              value={formData.type}\r\n              onChangeText={(text) => setFormData({ ...formData, type: text })}\r\n            />\r\n            {errors.type ? (\r\n              <Text style={styles.errorText}>{errors.type}</Text>\r\n            ) : null}\r\n\r\n            <Text style={styles.label}>Hours *</Text>\r\n            <TextInput\r\n              style={styles.input}\r\n              placeholder=\"e.g., Mon-Sat 9am - 8pm\"\r\n              placeholderTextColor=\"#999\"\r\n              value={formData.hours}\r\n              onChangeText={(text) => setFormData({ ...formData, hours: text })}\r\n            />\r\n            {errors.hours ? (\r\n              <Text style={styles.errorText}>{errors.hours}</Text>\r\n            ) : null}\r\n\r\n            <Text style={styles.label}>Phone</Text>\r\n            <TextInput\r\n              style={styles.input}\r\n              placeholder=\"e.g., +1 123-456-7890\"\r\n              placeholderTextColor=\"#999\"\r\n              keyboardType=\"phone-pad\"\r\n              value={formData.phone}\r\n              onChangeText={(text) => setFormData({ ...formData, phone: text })}\r\n            />\r\n          </View>\r\n\r\n          <TouchableOpacity \r\n            style={styles.submitButton}\r\n            onPress={handleAddDonationBox}\r\n          >\r\n            <Text style={styles.submitButtonText}>Add Donation Box</Text>\r\n          </TouchableOpacity>\r\n        </View>\r\n      </Modal>\r\n    </View>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    padding: 20,\r\n    backgroundColor: '#fff',\r\n  },\r\n  header: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    marginBottom: 20,\r\n    paddingBottom: 10,\r\n    borderBottomWidth: 1,\r\n    borderBottomColor: '#eee',\r\n  },\r\n  headerTitle: {\r\n    fontSize: 22,\r\n    fontWeight: '600',\r\n    color: '#000',\r\n  },\r\n  addButton: {\r\n    backgroundColor: '#000',\r\n    width: 40,\r\n    height: 40,\r\n    borderRadius: 20,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n  },\r\n  boxContainer: {\r\n    padding: 16,\r\n    marginVertical: 8,\r\n    backgroundColor: '#f8f8f8',\r\n    borderRadius: 8,\r\n    borderWidth: 1,\r\n    borderColor: '#eee',\r\n  },\r\n  boxName: {\r\n    fontWeight: '600',\r\n    fontSize: 16,\r\n    marginBottom: 4,\r\n    color: '#000',\r\n  },\r\n  boxAddress: {\r\n    fontSize: 14,\r\n    color: '#555',\r\n    marginBottom: 4,\r\n  },\r\n  boxType: {\r\n    fontSize: 14,\r\n    color: '#555',\r\n    fontStyle: 'italic',\r\n  },\r\n  backButton: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    marginBottom: 20,\r\n  },\r\n  backButtonText: {\r\n    marginLeft: 5,\r\n    fontSize: 16,\r\n    color: '#000',\r\n  },\r\n  detailCard: {\r\n    backgroundColor: '#f8f8f8',\r\n    borderRadius: 8,\r\n    padding: 20,\r\n    borderWidth: 1,\r\n    borderColor: '#eee',\r\n  },\r\n  detailTitle: {\r\n    fontSize: 22,\r\n    fontWeight: '600',\r\n    marginBottom: 16,\r\n    color: '#000',\r\n    borderBottomWidth: 1,\r\n    borderBottomColor: '#eee',\r\n    paddingBottom: 10,\r\n  },\r\n  detailRow: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    marginBottom: 12,\r\n  },\r\n  detailText: {\r\n    fontSize: 16,\r\n    color: '#333',\r\n    marginLeft: 10,\r\n  },\r\n  deleteButton: {\r\n    backgroundColor: '#f8f8f8',\r\n    padding: 15,\r\n    borderRadius: 8,\r\n    alignItems: 'center',\r\n    marginTop: 20,\r\n    borderWidth: 1,\r\n    borderColor: '#ccc',\r\n  },\r\n  deleteButtonText: {\r\n    color: '#000',\r\n    fontWeight: '600',\r\n  },\r\n  modalContainer: {\r\n    flex: 1,\r\n    padding: 20,\r\n    backgroundColor: '#fff',\r\n  },\r\n  modalHeader: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    marginBottom: 20,\r\n    paddingBottom: 15,\r\n    borderBottomWidth: 1,\r\n    borderBottomColor: '#eee',\r\n  },\r\n  closeButton: {\r\n    padding: 5,\r\n  },\r\n  modalTitle: {\r\n    fontSize: 20,\r\n    fontWeight: '600',\r\n    marginLeft: 10,\r\n    color: '#000',\r\n  },\r\n  input: {\r\n    backgroundColor: '#f8f8f8',\r\n    padding: 15,\r\n    borderRadius: 8,\r\n    marginBottom: 15,\r\n    fontSize: 16,\r\n    color: '#000',\r\n    borderWidth: 1,\r\n    borderColor: '#eee',\r\n  },\r\n  submitButton: {\r\n    backgroundColor: '#000',\r\n    padding: 16,\r\n    borderRadius: 8,\r\n    alignItems: 'center',\r\n    marginTop: 10,\r\n  },\r\n  submitButtonText: {\r\n    color: '#fff',\r\n    fontWeight: '600',\r\n    fontSize: 16,\r\n  },\r\n  emptyContainer: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    marginTop: 50,\r\n  },\r\n  emptyText: {\r\n    fontSize: 16,\r\n    color: '#999',\r\n    marginTop: 10,\r\n  },\r\n  listContainer: {\r\n    paddingBottom: 20,\r\n  },\r\n  errorText: {\r\n    color: 'red',\r\n    fontSize: 12,\r\n    marginTop: -10,\r\n    marginBottom: 10,\r\n  },\r\n  label: {\r\n    fontSize: 14,\r\n    fontWeight: '500',\r\n    marginBottom: 8,\r\n    color: '#333',\r\n  },\r\n  formSection: {\r\n    flex: 1,\r\n  },\r\n  autocompleteWrapper: {\r\n    zIndex: 1000,\r\n    marginBottom: 15,\r\n  },\r\n  dropdown: {\r\n    backgroundColor: '#fff',\r\n    borderWidth: 1,\r\n    borderColor: '#ddd',\r\n    borderRadius: 8,\r\n    marginTop: 5,\r\n    maxHeight: 200,\r\n  },\r\n  placeItem: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    padding: 10,\r\n    borderBottomWidth: 1,\r\n    borderBottomColor: '#eee',\r\n  },\r\n  placeText: {\r\n    marginLeft: 10,\r\n    color: '#333',\r\n  },\r\n  placeDescription: {\r\n    fontSize: 14,\r\n    color: '#666',\r\n  },\r\n  selectedLocationText: {\r\n    fontSize: 14,\r\n    color: '#007bff',\r\n    marginTop: -10,\r\n    marginBottom: 15,\r\n  },\r\n});\r\n\r\nexport default ManageDonationBoxesScreen;","import React, { useEffect, useState } from 'react';\r\nimport {\r\n  View,\r\n  Text,\r\n  Button,\r\n  FlatList,\r\n  ActivityIndicator,\r\n  TouchableOpacity,\r\n  TextInput,\r\n  StyleSheet,\r\n  Modal,\r\n  Alert,\r\n} from 'react-native';\r\nimport axios from 'axios';\r\nimport { Picker } from '@react-native-picker/picker';\r\nimport {MaterialIcons } from '@expo/vector-icons';\r\n\r\nexport default function HomeScreen() {\r\n  const [donations, setDonations] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [selectedDonation, setSelectedDonation] = useState(null);\r\n  const [editMode, setEditMode] = useState(false);\r\n  const [editedDonation, setEditedDonation] = useState({});\r\n  const [deleteModalVisible, setDeleteModalVisible] = useState(false);\r\n\r\n  const fetchDonations = async () => {\r\n    try {\r\n      const response = await axios.get('http://localhost:5000/api/user/donations');\r\n      setDonations(response.data);\r\n    } catch (error) {\r\n      console.error('Error fetching donations:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchDonations();\r\n  }, []);\r\n\r\n  const deleteDonation = async () => {\r\n    try {\r\n      await axios.delete(`http://localhost:5000/api/admin/donations/${selectedDonation._id}`,\r\n        selectedDonation\r\n      );\r\n      setSelectedDonation(null);\r\n      setEditMode(false);\r\n      setDeleteModalVisible(false);\r\n      fetchDonations();\r\n    } catch (error) {\r\n      console.error('Error deleting donation:', error);\r\n    }\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    try {\r\n      await axios.put(\r\n        `http://localhost:5000/api/admin/donations/${selectedDonation._id}`,\r\n        editedDonation\r\n      );\r\n      setSelectedDonation(null);\r\n      setEditMode(false);\r\n      fetchDonations();\r\n    } catch (error) {\r\n      console.error('Error updating donation:', error);\r\n    }\r\n  };\r\n\r\n  const renderDonation = ({ item }) => (\r\n    <TouchableOpacity \r\n      onPress={() => setSelectedDonation(item)}\r\n      style={styles.donationItem}\r\n    >\r\n      <View style={styles.donationContent}>\r\n        <Text style={styles.donationTitle}>{item.name}</Text>\r\n        <Text style={styles.donationDescription}>{item.description}</Text>\r\n        <View style={styles.donationMeta}>\r\n          <MaterialIcons name=\"location-on\" size={16} color=\"#555\" />\r\n          <Text style={styles.donationMetaText}>{item.address.address || \"Location not specified\"}</Text>\r\n        </View>\r\n        <View style={styles.donationMeta}>\r\n          <MaterialIcons name=\"person\" size={16} color=\"#555\" />\r\n          <Text style={styles.donationMetaText}>{item.assignee || 'Unassigned'}</Text>\r\n        </View>\r\n        {item.dateTime && (\r\n          <View style={styles.donationMeta}>\r\n            <MaterialIcons name=\"schedule\" size={16} color=\"#555\" />\r\n            <Text style={styles.donationMetaText}>{item.dateTime}</Text>\r\n          </View>\r\n        )}\r\n      </View>\r\n      <MaterialIcons name=\"chevron-right\" size={24} color=\"#555\" />\r\n    </TouchableOpacity>\r\n  );\r\n\r\n  if (selectedDonation) {\r\n    if (editMode) {\r\n      return (\r\n        <View style={styles.container}>\r\n          <TouchableOpacity \r\n            onPress={() => setEditMode(false)} \r\n            style={styles.backButton}\r\n          >\r\n            <MaterialIcons name=\"arrow-back\" size={24} color=\"#000\" />\r\n            <Text style={styles.backButtonText}>Back</Text>\r\n          </TouchableOpacity>\r\n\r\n          <Text style={styles.sectionTitle}>Edit Donation Details</Text>\r\n\r\n          <View style={styles.detailRow}>\r\n            <Text style={styles.detailLabel}>Name</Text>\r\n            <Text style={styles.detailValue}>{selectedDonation.name}</Text>\r\n          </View>\r\n\r\n          <View style={styles.detailRow}>\r\n            <Text style={styles.detailLabel}>Description</Text>\r\n            <Text style={styles.detailValue}>{selectedDonation.description}</Text>\r\n          </View>\r\n\r\n          <View style={styles.detailRow}>\r\n            <Text style={styles.detailLabel}>Address</Text>\r\n            <Text style={styles.detailValue}>{selectedDonation.address.address}</Text>\r\n          </View>\r\n\r\n          <View style={styles.detailRow}>\r\n            <Text style={styles.detailLabel}>Donor Availability</Text>\r\n            <Text style={styles.detailValue}>{selectedDonation.availability}</Text>\r\n          </View>\r\n\r\n          <View style={styles.inputContainer}>\r\n            <Text style={styles.inputLabel}>Assignee</Text>\r\n            <TextInput\r\n              placeholder=\"Enter assignee name\"\r\n              value={editedDonation.assignee}\r\n              onChangeText={(text) =>\r\n                setEditedDonation({ ...editedDonation, assignee: text })\r\n              }\r\n              style={styles.input}\r\n            />\r\n          </View>\r\n\r\n          <View style={styles.inputContainer}>\r\n            <Text style={styles.inputLabel}>Pickup Date & Time</Text>\r\n            <TextInput\r\n              placeholder=\"Enter date and time\"\r\n              value={editedDonation.dateTime}\r\n              onChangeText={(text) =>\r\n                setEditedDonation({ ...editedDonation, dateTime: text })\r\n              }\r\n              style={styles.input}\r\n            />\r\n          </View>\r\n\r\n          <View style={styles.buttonGroup}>\r\n            <TouchableOpacity \r\n              onPress={handleSave}\r\n              style={[styles.button, styles.saveButton]}\r\n            >\r\n              <Text style={styles.buttonText}>Save Changes</Text>\r\n            </TouchableOpacity>\r\n          </View>\r\n        </View>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <View style={styles.container}>\r\n        <TouchableOpacity \r\n          onPress={() => setSelectedDonation(null)} \r\n          style={styles.backButton}\r\n        >\r\n          <MaterialIcons name=\"arrow-back\" size={24} color=\"#000\" />\r\n          <Text style={styles.backButtonText}>Back</Text>\r\n        </TouchableOpacity>\r\n\r\n        <Text style={styles.detailTitle}>{selectedDonation.name}</Text>\r\n        \r\n        <View style={styles.detailCard}>\r\n          <View style={styles.detailRow}>\r\n            <Text style={styles.detailLabel}>Description</Text>\r\n            <Text style={styles.detailValue}>{selectedDonation.description}</Text>\r\n          </View>\r\n\r\n          <View style={styles.detailRow}>\r\n            <Text style={styles.detailLabel}>Location</Text>\r\n            <Text style={styles.detailValue}>{selectedDonation.address.address}</Text>\r\n          </View>\r\n\r\n          <View style={styles.detailRow}>\r\n            <Text style={styles.detailLabel}>Donor Availability</Text>\r\n            <Text style={styles.detailValue}>{selectedDonation.availability}</Text>\r\n          </View>\r\n\r\n          <View style={styles.detailRow}>\r\n            <Text style={styles.detailLabel}>Assignee</Text>\r\n            <Text style={styles.detailValue}>\r\n              {selectedDonation.assignee || 'Unassigned'}\r\n            </Text>\r\n          </View>\r\n\r\n          {selectedDonation.dateTime && (\r\n            <View style={styles.detailRow}>\r\n              <Text style={styles.detailLabel}>Pickup Date & Time</Text>\r\n              <Text style={styles.detailValue}>{selectedDonation.dateTime}</Text>\r\n            </View>\r\n          )}\r\n        </View>\r\n\r\n        <View style={styles.buttonGroup}>\r\n          <TouchableOpacity \r\n            onPress={() => {\r\n              setEditMode(true);\r\n              setEditedDonation({\r\n                assignee: selectedDonation.assignee || '',\r\n                dateTime: selectedDonation.dateTime || '',\r\n              });\r\n            }}\r\n            style={[styles.button, styles.editButton]}\r\n          >\r\n            <MaterialIcons name=\"edit\" size={18} color=\"#fff\" />\r\n            <Text style={[styles.buttonText, { marginLeft: 8 }]}>Edit</Text>\r\n          </TouchableOpacity>\r\n          \r\n          <TouchableOpacity \r\n            onPress={() => setDeleteModalVisible(true)}\r\n            style={[styles.button, styles.deleteButton]}\r\n          >\r\n            <MaterialIcons name=\"delete\" size={18} color=\"#fff\" />\r\n            <Text style={[styles.buttonText, { marginLeft: 8 }]}>Delete</Text>\r\n          </TouchableOpacity>\r\n        </View>\r\n\r\n        {/* Delete Confirmation Modal */}\r\n        <Modal\r\n          animationType=\"fade\"\r\n          transparent={true}\r\n          visible={deleteModalVisible}\r\n          onRequestClose={() => setDeleteModalVisible(false)}\r\n        >\r\n          <View style={styles.modalOverlay}>\r\n            <View style={styles.modalContent}>\r\n              <Text style={styles.modalTitle}>Confirm Deletion</Text>\r\n              <Text style={styles.modalText}>\r\n                Are you sure you want to delete this donation? This action cannot be undone.\r\n              </Text>\r\n              <View style={styles.modalButtons}>\r\n                <TouchableOpacity \r\n                  onPress={() => setDeleteModalVisible(false)}\r\n                  style={[styles.modalButton, styles.cancelButton]}\r\n                >\r\n                  <Text style={styles.modalButtonText}>Cancel</Text>\r\n                </TouchableOpacity>\r\n                <TouchableOpacity \r\n                  onPress={deleteDonation}\r\n                  style={[styles.modalButton, styles.confirmDeleteButton]}\r\n                >\r\n                  <Text style={styles.modalButtonText}>Delete</Text>\r\n                </TouchableOpacity>\r\n              </View>\r\n            </View>\r\n          </View>\r\n        </Modal>\r\n      </View>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <Text style={styles.welcomeTitle}>Pickup Request Management</Text>\r\n      {loading ? (\r\n        <View style={styles.loadingContainer}>\r\n          <ActivityIndicator size=\"large\" color=\"#333\" />\r\n          <Text style={styles.loadingText}>Loading donations...</Text>\r\n        </View>\r\n      ) : (\r\n        <FlatList\r\n          data={donations}\r\n          keyExtractor={(item) => item._id}\r\n          renderItem={renderDonation}\r\n          contentContainerStyle={styles.listContent}\r\n          ListEmptyComponent={\r\n            <View style={styles.emptyState}>\r\n              <MaterialIcons name=\"inbox\" size={48} color=\"#999\" />\r\n              <Text style={styles.emptyStateText}>No donations found</Text>\r\n            </View>\r\n          }\r\n        />\r\n      )}\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    padding: 20,\r\n    backgroundColor: '#fff',\r\n  },\r\n  welcomeTitle: {\r\n    fontSize: 24,\r\n    fontWeight: '600',\r\n    marginBottom: 20,\r\n    color: '#000',\r\n  },\r\n  loadingContainer: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n  },\r\n  loadingText: {\r\n    marginTop: 10,\r\n    color: '#555',\r\n  },\r\n  listContent: {\r\n    paddingBottom: 20,\r\n  },\r\n  donationItem: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    padding: 16,\r\n    marginBottom: 12,\r\n    backgroundColor: '#fff',\r\n    borderRadius: 8,\r\n    borderWidth: 1,\r\n    borderColor: '#eee',\r\n    shadowColor: '#000',\r\n    shadowOffset: { width: 0, height: 1 },\r\n    shadowOpacity: 0.1,\r\n    shadowRadius: 2,\r\n    elevation: 2,\r\n  },\r\n  donationContent: {\r\n    flex: 1,\r\n  },\r\n  donationTitle: {\r\n    fontSize: 16,\r\n    fontWeight: '600',\r\n    marginBottom: 4,\r\n    color: '#000',\r\n  },\r\n  donationDescription: {\r\n    fontSize: 14,\r\n    marginBottom: 8,\r\n    color: '#555',\r\n  },\r\n  donationMeta: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    marginBottom: 4,\r\n  },\r\n  donationMetaText: {\r\n    fontSize: 13,\r\n    marginLeft: 6,\r\n    color: '#555',\r\n  },\r\n  backButton: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    marginBottom: 20,\r\n  },\r\n  backButtonText: {\r\n    fontSize: 18,\r\n    marginLeft: 8,\r\n    color: '#000',\r\n  },\r\n  sectionTitle: {\r\n    fontSize: 20,\r\n    fontWeight: '600',\r\n    marginBottom: 20,\r\n    color: '#000',\r\n  },\r\n  detailTitle: {\r\n    fontSize: 22,\r\n    fontWeight: '600',\r\n    marginBottom: 16,\r\n    color: '#000',\r\n  },\r\n  detailCard: {\r\n    backgroundColor: '#fff',\r\n    borderRadius: 8,\r\n    padding: 16,\r\n    marginBottom: 20,\r\n    borderWidth: 1,\r\n    borderColor: '#eee',\r\n    shadowColor: '#000',\r\n    shadowOffset: { width: 0, height: 1 },\r\n    shadowOpacity: 0.1,\r\n    shadowRadius: 2,\r\n    elevation: 2,\r\n  },\r\n  detailRow: {\r\n    marginBottom: 12,\r\n  },\r\n  detailLabel: {\r\n    fontSize: 14,\r\n    fontWeight: '600',\r\n    color: '#333',\r\n    marginBottom: 4,\r\n  },\r\n  detailValue: {\r\n    fontSize: 16,\r\n    color: '#555',\r\n  },\r\n  inputContainer: {\r\n    marginBottom: 16,\r\n  },\r\n  inputLabel: {\r\n    fontSize: 14,\r\n    fontWeight: '600',\r\n    marginBottom: 8,\r\n    color: '#333',\r\n  },\r\n  input: {\r\n    borderWidth: 1,\r\n    borderColor: '#ddd',\r\n    borderRadius: 6,\r\n    padding: 12,\r\n    fontSize: 16,\r\n    backgroundColor: '#fff',\r\n  },\r\n  buttonGroup: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    marginTop: 20,\r\n  },\r\n  button: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    paddingVertical: 12,\r\n    paddingHorizontal: 20,\r\n    borderRadius: 6,\r\n    flex: 1,\r\n  },\r\n  editButton: {\r\n    backgroundColor: '#333',\r\n    marginRight: 10,\r\n  },\r\n  deleteButton: {\r\n    backgroundColor: '#d32f2f',\r\n    marginLeft: 10,\r\n  },\r\n  saveButton: {\r\n    backgroundColor: '#333',\r\n  },\r\n  buttonText: {\r\n    color: '#fff',\r\n    fontSize: 16,\r\n    fontWeight: '500',\r\n  },\r\n  emptyState: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    padding: 40,\r\n  },\r\n  emptyStateText: {\r\n    marginTop: 16,\r\n    fontSize: 16,\r\n    color: '#999',\r\n  },\r\n  modalOverlay: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    backgroundColor: 'rgba(0,0,0,0.5)',\r\n  },\r\n  modalContent: {\r\n    width: '80%',\r\n    backgroundColor: '#fff',\r\n    borderRadius: 8,\r\n    padding: 20,\r\n  },\r\n  modalTitle: {\r\n    fontSize: 18,\r\n    fontWeight: '600',\r\n    marginBottom: 10,\r\n    color: '#000',\r\n  },\r\n  modalText: {\r\n    fontSize: 16,\r\n    marginBottom: 20,\r\n    color: '#555',\r\n  },\r\n  modalButtons: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'flex-end',\r\n  },\r\n  modalButton: {\r\n    paddingVertical: 10,\r\n    paddingHorizontal: 20,\r\n    borderRadius: 6,\r\n    marginLeft: 10,\r\n  },\r\n  cancelButton: {\r\n    backgroundColor: '#999',\r\n  },\r\n  confirmDeleteButton: {\r\n    backgroundColor: '#d32f2f',\r\n  },\r\n  modalButtonText: {\r\n    color: '#fff',\r\n    fontSize: 16,\r\n    fontWeight: '500',\r\n  },\r\n});","import React from 'react';\r\nimport { createBottomTabNavigator } from \"@react-navigation/bottom-tabs\";\r\nimport { Ionicons } from '@expo/vector-icons';\r\nimport ManageEventsScreen from '../screens/admin/ManageEventsScreen';  \r\nimport AdminProfileScreen from '../screens/admin/AdminProfileScreen';  \r\nimport ManageDonationBoxesScreen from '../screens/admin/ManageDonationBoxesScreen';  \r\nimport ManageDonationsScreen from '../screens/admin/ManageDonationsScreen';  \r\nimport ChatNavigator from \"./ChatNavigator\";\r\nconst Tab = createBottomTabNavigator();\r\n\r\nconst AdminTabNavigator = () => {\r\n  return (\r\n      <Tab.Navigator\r\n        screenOptions={({ route }) => ({\r\n          tabBarIcon: ({ focused, color, size }) => {\r\n           let iconName;\r\n            if (route.name === 'ManageEvents') {\r\n              iconName = focused ? 'calendar' : 'calendar-outline';\r\n            } else if (route.name === 'ManageDonations') {\r\n              iconName = focused ? 'people' : 'people-outline';\r\n            } else if (route.name === \"ManageBoxes\") {\r\n            iconName = focused ? \"cube\" : \"cube-outline\";\r\n            }  else if (route.name === \"Chat\") {\r\n            iconName = focused ? \"chatbubble\" : \"chatbubble-outline\";\r\n            } else if (route.name === 'AdminProfile') {\r\n              iconName = focused ? 'person' : 'person-outline';\r\n            }\r\n            return <Ionicons name={iconName} size={size} color={color} />;\r\n          },\r\n          tabBarActiveTintColor: 'black',\r\n          tabBarInactiveTintColor: 'gray',\r\n          tabBarShowLabel: false,\r\n          headerShown: false,\r\n        })}\r\n      >\r\n        <Tab.Screen name=\"ManageEvents\" component={ManageEventsScreen} />\r\n        <Tab.Screen name=\"ManageBoxes\" component={ManageDonationBoxesScreen} />\r\n        <Tab.Screen name=\"ManageDonations\" component={ManageDonationsScreen} />\r\n        <Tab.Screen name=\"Chat\" component={ChatNavigator} />       \r\n        <Tab.Screen name=\"AdminProfile\" component={AdminProfileScreen} />\r\n\r\n      </Tab.Navigator>\r\n  );\r\n};\r\n\r\nexport default AdminTabNavigator;\r\n","import React, { useEffect, useState } from 'react';\r\nimport {\r\n  View,\r\n  Text,\r\n  Alert,\r\n  ActivityIndicator,\r\n  FlatList,\r\n  TouchableOpacity,\r\n  ScrollView,\r\n  SafeAreaView,\r\n  StyleSheet,\r\n  Image\r\n} from 'react-native';\r\nimport { auth, db } from '../../firebaseConfig';\r\nimport axios from 'axios';\r\nimport { Ionicons } from '@expo/vector-icons';\r\nimport { collection, query, where, getDocs, doc, addDoc, setDoc, serverTimestamp } from 'firebase/firestore';\r\nimport { sendPasswordResetEmail } from \"firebase/auth\";\r\n\r\n\r\nconst OrganizerProfileScreen = ({ navigation }) => {\r\n  const [profile, setProfile] = useState(null);\r\n  const [events, setEvents] = useState([]);\r\n  const [selectedEvent, setSelectedEvent] = useState(null);\r\n  const [error, setError] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const ADMIN_USER_ID = \"VlNgmUErG7QjqCC5hhLkPoyDb0P2\";\r\n\r\n  const logout = async () => {\r\n    await auth.signOut();\r\n  };\r\n\r\n  const handleContactAdmin = async () => {\r\n    try {\r\n      const currentUser = auth.currentUser;\r\n      if (!currentUser) {\r\n        Alert.alert(\"Error\", \"You must be logged in to contact admin\");\r\n        return;\r\n      }\r\n\r\n      const chatData = await getOrCreateAdminChat(\r\n        ADMIN_USER_ID, \r\n        \"Admin\", \r\n        selectedEvent ? selectedEvent._id : null,\r\n        selectedEvent ? `Event: ${selectedEvent.name || 'Untitled'}` : \"General Inquiry\"\r\n      );\r\n\r\n      navigation.navigate('Chat', {\r\n        screen: 'ChatScreen',\r\n        params: {\r\n          chatId: chatData.chatId,\r\n          otherUserId: ADMIN_USER_ID,\r\n          otherUserName: \"Admin\",\r\n          eventName: chatData.eventName\r\n        }\r\n      });\r\n      \r\n    } catch (error) {\r\n      console.error(\"Error contacting admin:\", error);\r\n      Alert.alert(\"Error\", \"Failed to open chat with admin. Please try again later.\");\r\n    }\r\n  };\r\n\r\n  const handleResetPassword = async () => {\r\n        try {\r\n          const user = auth.currentUser;\r\n          if (!user) {\r\n            Alert.alert(\"Error\", \"User not authenticated\");\r\n            return;\r\n          }\r\n          await sendPasswordResetEmail(auth, user.email);\r\n          Alert.alert(\"Success\", \"Password reset email sent. Please check your inbox.\");\r\n        } catch (error) {\r\n          console.error(\"Error sending password reset email:\", error);\r\n          Alert.alert(\"Error\", \"Failed to send password reset email\");\r\n        }\r\n      };\r\n\r\n  const checkExistingAdminChat = async (adminUserId) => {\r\n    try {\r\n      const currentUser = auth.currentUser;\r\n      if (!currentUser) return null;\r\n\r\n      const chatsRef = collection(db, \"chats\");\r\n      const chatKey = [currentUser.uid, adminUserId].sort().join('_');\r\n      \r\n      const chatDocsQuery = await getDocs(query(\r\n        chatsRef,\r\n        where(\"chatKey\", \"==\", chatKey)\r\n      ));\r\n      \r\n      if (!chatDocsQuery.empty) {\r\n        const chatDoc = chatDocsQuery.docs[0];\r\n        return {\r\n          id: chatDoc.id,\r\n          ...chatDoc.data()\r\n        };\r\n      }\r\n      \r\n      return null;\r\n    } catch (error) {\r\n      console.error(\"Error checking for existing admin chat:\", error);\r\n      return null;\r\n    }\r\n  };\r\n\r\n  const getOrCreateAdminChat = async (adminUserId, adminName, eventId, eventName) => {\r\n    try {\r\n      const currentUser = auth.currentUser;\r\n      if (!currentUser) throw new Error(\"User not authenticated\");\r\n      \r\n      const existingChat = await checkExistingAdminChat(adminUserId);\r\n      \r\n      if (existingChat) {\r\n        return {\r\n          chatId: existingChat.id,\r\n          otherUserId: adminUserId,\r\n          otherUserName: existingChat.participantInfo?.[adminUserId]?.name || adminName,\r\n          eventName: eventName || existingChat.eventName || \"Admin Chat\"\r\n        };\r\n      }\r\n\r\n      const chatKey = [currentUser.uid, adminUserId].sort().join('_');\r\n      \r\n      const newChat = {\r\n        participants: [currentUser.uid, adminUserId],\r\n        participantInfo: {\r\n          [currentUser.uid]: {\r\n            name: currentUser.displayName || \"Organizer\",\r\n            photoURL: currentUser.photoURL || null\r\n          },\r\n          [adminUserId]: {\r\n            name: adminName,\r\n            photoURL: null\r\n          }\r\n        },\r\n        eventId: eventId,\r\n        eventName: eventName || \"Admin Chat\",\r\n        lastMessage: \"\",\r\n        lastMessageAt: serverTimestamp(),\r\n        createdAt: serverTimestamp(),\r\n        chatKey: chatKey\r\n      };\r\n\r\n      const newChatRef = doc(collection(db, \"chats\"));\r\n      await setDoc(newChatRef, newChat);\r\n      \r\n      const messagesRef = collection(db, 'chats', newChatRef.id, 'messages');\r\n      await addDoc(messagesRef, {\r\n        text: eventId \r\n          ? `Hello! I need help with my event (${eventName}).` \r\n          : \"Hello! I need some assistance.\",\r\n        senderId: currentUser.uid,\r\n        senderName: currentUser.displayName || \"Organizer\",\r\n        createdAt: serverTimestamp()\r\n      });\r\n      \r\n      await setDoc(newChatRef, {\r\n        lastMessage: eventId \r\n          ? `Hello! I need help with my event (${eventName}).` \r\n          : \"Hello! I need some assistance.\",\r\n        lastMessageAt: serverTimestamp()\r\n      }, { merge: true });\r\n      \r\n      return {\r\n        chatId: newChatRef.id,\r\n        otherUserId: adminUserId,\r\n        otherUserName: adminName,\r\n        eventName: eventName || \"Admin Chat\"\r\n      };\r\n    } catch (error) {\r\n      console.error(\"Error in getOrCreateAdminChat:\", error);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const fetchProfile = async () => {\r\n      try {\r\n        setLoading(true);\r\n        const currentUser = auth.currentUser;\r\n        if (!currentUser) {\r\n          throw new Error('User not authenticated');\r\n        }\r\n        const token = await currentUser.getIdToken();\r\n\r\n        const res = await axios.get('http://localhost:5000/api/user/user-details', {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        });\r\n\r\n        const eventsRes = await axios.get('http://localhost:5000/api/user/events', {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        });\r\n        const userEvents = eventsRes.data.filter(\r\n          (event) => event.organizer_id === currentUser.uid\r\n        );\r\n        setEvents(userEvents);\r\n        setProfile(res.data);\r\n      } catch (err) {\r\n        const message = err.response?.data?.message || err.message;\r\n        Alert.alert('Error', message);\r\n        setError(message);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchProfile();\r\n  }, []);\r\n\r\n  if (loading) {\r\n    return (\r\n      <View style={styles.loadingContainer}>\r\n        <ActivityIndicator size=\"large\" color=\"#000\" />\r\n        <Text style={styles.loadingText}>Loading profile...</Text>\r\n      </View>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <View style={styles.errorContainer}>\r\n        <Ionicons name=\"warning\" size={40} color=\"#000\" />\r\n        <Text style={styles.errorText}>{error}</Text>\r\n        <TouchableOpacity \r\n          style={styles.retryButton}\r\n          onPress={() => {\r\n            setError(null);\r\n            setLoading(true);\r\n          }}\r\n        >\r\n          <Text style={styles.retryButtonText}>Try Again</Text>\r\n        </TouchableOpacity>\r\n      </View>\r\n    );\r\n  }\r\n\r\n  const renderEvent = ({ item }) => (\r\n    <TouchableOpacity \r\n      onPress={() => setSelectedEvent(item)}\r\n      style={styles.eventCard}\r\n    >\r\n      <View style={styles.eventHeader}>\r\n        <Ionicons name=\"calendar-outline\" size={20} color=\"#000\" />\r\n        <Text style={styles.eventTitle}>{item.name || 'Untitled Event'}</Text>\r\n      </View>\r\n      {item.description && (\r\n        <Text style={styles.eventDescription} numberOfLines={2}>\r\n          {item.description}\r\n        </Text>\r\n      )}\r\n      {item.date && (\r\n        <View style={styles.eventDateContainer}>\r\n          <Ionicons name=\"time\" size={14} color=\"#666\" />\r\n          <Text style={styles.eventDate}>\r\n            {new Date(item.date).toLocaleDateString()}\r\n          </Text>\r\n        </View>\r\n      )}\r\n      {item.location?.address && (\r\n        <View style={styles.eventLocationContainer}>\r\n          <Ionicons name=\"location-outline\" size={14} color=\"#666\" />\r\n          <Text style={styles.eventLocation} numberOfLines={1}>\r\n            {item.location.address}\r\n          </Text>\r\n        </View>\r\n      )}\r\n    </TouchableOpacity>\r\n  );\r\n\r\n  if (selectedEvent) {\r\n    return (\r\n      <SafeAreaView style={styles.detailContainer}>\r\n        <TouchableOpacity \r\n          onPress={() => setSelectedEvent(null)} \r\n          style={styles.backButton}\r\n        >\r\n          <Ionicons name=\"arrow-back\" size={24} color=\"#000\" />\r\n          <Text style={styles.backButtonText}>Back to Events</Text>\r\n        </TouchableOpacity>\r\n\r\n        <ScrollView \r\n          showsVerticalScrollIndicator={false}\r\n          contentContainerStyle={styles.detailScrollContent}\r\n        >\r\n          <View style={styles.detailContent}>\r\n            <Text style={styles.detailTitle}>{selectedEvent.name || 'Event'}</Text>\r\n            \r\n            <View style={styles.detailSection}>\r\n              <Text style={styles.sectionLabel}>DESCRIPTION</Text>\r\n              <Text style={styles.sectionText}>\r\n                {selectedEvent.description || 'No description provided'}\r\n              </Text>\r\n            </View>\r\n            \r\n            <View style={styles.detailSection}>\r\n              <Text style={styles.sectionLabel}>DATE</Text>\r\n              <View style={styles.infoRow}>\r\n                <Ionicons name=\"calendar-outline\" size={16} color=\"#666\" style={styles.infoIcon} />\r\n                <Text style={styles.sectionText}>\r\n                  {new Date(selectedEvent.date).toLocaleDateString()}\r\n                </Text>\r\n              </View>\r\n            </View>\r\n            \r\n            {selectedEvent.location?.address && (\r\n              <View style={styles.detailSection}>\r\n                <Text style={styles.sectionLabel}>LOCATION</Text>\r\n                <View style={styles.infoRow}>\r\n                  <Ionicons name=\"location-outline\" size={16} color=\"#666\" style={styles.infoIcon} />\r\n                  <Text style={styles.sectionText}>\r\n                    {selectedEvent.location.address}\r\n                  </Text>\r\n                </View>\r\n              </View>\r\n            )}\r\n\r\n            {selectedEvent.items_accepted?.length > 0 && (\r\n              <View style={styles.detailSection}>\r\n                <Text style={styles.sectionLabel}>ITEMS ACCEPTED</Text>\r\n                <View style={styles.itemsContainer}>\r\n                  {selectedEvent.items_accepted.map((item, index) => (\r\n                    <View key={index} style={styles.itemTag}>\r\n                      <Text style={styles.itemText}>{item}</Text>\r\n                    </View>\r\n                  ))}\r\n                </View>\r\n              </View>\r\n            )}\r\n\r\n            <TouchableOpacity \r\n              style={styles.contactButton}\r\n              onPress={handleContactAdmin}\r\n            >\r\n              <Ionicons name=\"chatbubble-outline\" size={20} color=\"#fff\" />\r\n              <Text style={styles.contactButtonText}>Contact Admin About This Event</Text>\r\n            </TouchableOpacity>\r\n          </View>\r\n        </ScrollView>\r\n      </SafeAreaView>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <SafeAreaView style={styles.container}>\r\n      <ScrollView \r\n        showsVerticalScrollIndicator={false}\r\n        contentContainerStyle={styles.scrollContent}\r\n      >\r\n        <View style={styles.profileHeader}>\r\n          <View style={styles.profileImageContainer}>\r\n            <Ionicons name=\"person-circle-outline\" size={80} color=\"#000\" />\r\n          </View>\r\n          <Text style={styles.profileName}>{profile?.name || 'Organizer'}</Text>\r\n          <Text style={styles.profileEmail}>{profile?.email}</Text>\r\n        </View>\r\n\r\n        <View style={styles.section}>\r\n          <View style={styles.sectionHeader}>\r\n            <Ionicons name=\"calendar-outline\" size={20} color=\"#000\" />\r\n            <Text style={styles.sectionTitle}>Your Events</Text>\r\n          </View>\r\n          \r\n          {events.length === 0 ? (\r\n            <View style={styles.emptyState}>\r\n              <Ionicons name=\"calendar-outline\" size={40} color=\"#999\" />\r\n              <Text style={styles.emptyText}>No events posted yet</Text>\r\n            </View>\r\n          ) : (\r\n            <FlatList\r\n              data={events}\r\n              keyExtractor={(item) => item._id}\r\n              renderItem={renderEvent}\r\n              contentContainerStyle={styles.listContent}\r\n              scrollEnabled={false}\r\n            />\r\n          )}\r\n        </View>\r\n      </ScrollView>\r\n\r\n      <View style={styles.footer}>\r\n       <TouchableOpacity \r\n          style={styles.actionButton}\r\n          onPress={handleResetPassword}\r\n        >\r\n          <Ionicons name=\"key-outline\" size={20} color=\"#000\" />\r\n          <Text style={styles.actionButtonText}>Reset Password</Text>\r\n          <Ionicons name=\"chevron-forward\" size={20} color=\"#666\" />\r\n        </TouchableOpacity>\r\n\r\n        <TouchableOpacity \r\n          style={styles.actionButton}\r\n          onPress={handleContactAdmin}\r\n        >\r\n          <Ionicons name=\"headset-outline\" size={20} color=\"#000\" />\r\n          <Text style={styles.actionButtonText}>Contact Admin</Text>\r\n            <Ionicons name=\"chevron-forward\" size={20} color=\"#666\" />\r\n        </TouchableOpacity>\r\n              \r\n        \r\n        <TouchableOpacity \r\n          style={styles.logoutButton}\r\n          onPress={logout}\r\n        >\r\n          <Ionicons name=\"log-out-outline\" size={20} color=\"#fff\" />\r\n          <Text style={styles.logoutText}>Log Out</Text>\r\n        </TouchableOpacity>\r\n      </View>\r\n    </SafeAreaView>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: '#fff',\r\n  },\r\n  scrollContent: {\r\n    padding: 16,\r\n    paddingBottom: 100,\r\n  },\r\n  detailScrollContent: {\r\n    padding: 16,\r\n  },\r\n  loadingContainer: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    backgroundColor: '#fff',\r\n  },\r\n  loadingText: {\r\n    marginTop: 16,\r\n    color: '#000',\r\n    fontSize: 16,\r\n  },\r\n  errorContainer: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    padding: 24,\r\n    backgroundColor: '#fff',\r\n  },\r\n  errorText: {\r\n    fontSize: 16,\r\n    color: '#000',\r\n    marginTop: 16,\r\n    textAlign: 'center',\r\n    marginBottom: 24,\r\n  },\r\n  retryButton: {\r\n    backgroundColor: '#000',\r\n    paddingHorizontal: 24,\r\n    paddingVertical: 12,\r\n    borderRadius: 8,\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n  },\r\n  retryButtonText: {\r\n    color: '#fff',\r\n    fontWeight: '600',\r\n    marginLeft: 8,\r\n  },\r\n  profileHeader: {\r\n    alignItems: 'center',\r\n    marginBottom: 24,\r\n    padding: 20,\r\n    backgroundColor: '#fff',\r\n    borderRadius: 12,\r\n    borderWidth: 1,\r\n    borderColor: '#eee',\r\n  },\r\n  profileImageContainer: {\r\n    backgroundColor: '#f5f5f5',\r\n    borderRadius: 40,\r\n    padding: 8,\r\n  },\r\n  profileName: {\r\n    fontSize: 22,\r\n    fontWeight: '600',\r\n    marginTop: 12,\r\n    color: '#000',\r\n    textAlign: 'center',\r\n  },\r\n  profileEmail: {\r\n    fontSize: 16,\r\n    color: '#666',\r\n    marginTop: 4,\r\n    textAlign: 'center',\r\n  },\r\n  section: {\r\n    marginBottom: 16,\r\n    backgroundColor: '#fff',\r\n    borderRadius: 12,\r\n    padding: 20,\r\n    borderWidth: 1,\r\n    borderColor: '#eee',\r\n  },\r\n  sectionHeader: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    marginBottom: 16,\r\n  },\r\n  sectionTitle: {\r\n    fontSize: 18,\r\n    fontWeight: '600',\r\n    color: '#000',\r\n    marginLeft: 8,\r\n  },\r\n  eventCard: {\r\n    backgroundColor: '#fff',\r\n    borderRadius: 8,\r\n    padding: 16,\r\n    marginBottom: 12,\r\n    borderWidth: 1,\r\n    borderColor: '#eee',\r\n  },\r\n  eventHeader: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    marginBottom: 8,\r\n  },\r\n  eventTitle: {\r\n    fontSize: 16,\r\n    fontWeight: '600',\r\n    color: '#000',\r\n    marginLeft: 8,\r\n  },\r\n  eventDescription: {\r\n    fontSize: 14,\r\n    color: '#333',\r\n    marginBottom: 8,\r\n    lineHeight: 20,\r\n  },\r\n  eventDateContainer: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    marginTop: 4,\r\n  },\r\n  eventDate: {\r\n    fontSize: 12,\r\n    color: '#666',\r\n    marginLeft: 4,\r\n  },\r\n  eventLocationContainer: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    marginTop: 4,\r\n  },\r\n  eventLocation: {\r\n    fontSize: 12,\r\n    color: '#666',\r\n    marginLeft: 4,\r\n    flex: 1,\r\n  },\r\n  listContent: {\r\n    paddingBottom: 8,\r\n  },\r\n  emptyState: {\r\n    alignItems: 'center',\r\n    padding: 24,\r\n  },\r\n  emptyText: {\r\n    fontSize: 16,\r\n    color: '#999',\r\n    marginTop: 16,\r\n  },\r\n  footer: {\r\n    position: 'absolute',\r\n    bottom: 0,\r\n    left: 0,\r\n    right: 0,\r\n    padding: 16,\r\n    backgroundColor: '#fff',\r\n    borderTopWidth: 1,\r\n    borderTopColor: '#eee',\r\n  },\r\n  contactAdminButton: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    padding: 16,\r\n    backgroundColor: '#000',\r\n    borderRadius: 8,\r\n    marginBottom: 12,\r\n  },\r\n  contactAdminText: {\r\n    fontSize: 16,\r\n    fontWeight: '500',\r\n    color: '#fff',\r\n    marginLeft: 8,\r\n  },\r\n  actionButton: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    justifyContent: 'space-between',\r\n    padding: 16,\r\n    backgroundColor: '#fff',\r\n    borderRadius: 8,\r\n    borderWidth: 1,\r\n    borderColor: '#eee',\r\n    marginBottom: 16,\r\n  },\r\n  actionButtonText: {\r\n    flex: 1,\r\n    fontSize: 16,\r\n    color: '#000',\r\n    marginLeft: 12,\r\n  },\r\n  logoutButton: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    padding: 16,\r\n    backgroundColor: '#333',\r\n    borderRadius: 8,\r\n  },\r\n  logoutText: {\r\n    fontSize: 16,\r\n    fontWeight: '500',\r\n    color: '#fff',\r\n    marginLeft: 8,\r\n  },\r\n  detailContainer: {\r\n    flex: 1,\r\n    backgroundColor: '#fff',\r\n  },\r\n  detailContent: {\r\n    paddingBottom: 100,\r\n  },\r\n  backButton: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    padding: 16,\r\n    paddingBottom: 8,\r\n  },\r\n  backButtonText: {\r\n    fontSize: 16,\r\n    color: '#000',\r\n    marginLeft: 8,\r\n    fontWeight: '500',\r\n  },\r\n  detailTitle: {\r\n    fontSize: 24,\r\n    fontWeight: '700',\r\n    color: '#000',\r\n    marginBottom: 24,\r\n    marginTop: 8,\r\n    paddingHorizontal: 16,\r\n  },\r\n  detailSection: {\r\n    marginBottom: 24,\r\n    backgroundColor: '#fff',\r\n    borderRadius: 8,\r\n    padding: 20,\r\n    borderWidth: 1,\r\n    borderColor: '#eee',\r\n    marginHorizontal: 16,\r\n  },\r\n  sectionLabel: {\r\n    fontSize: 13,\r\n    fontWeight: '700',\r\n    color: '#666',\r\n    marginBottom: 12,\r\n    textTransform: 'uppercase',\r\n    letterSpacing: 1,\r\n  },\r\n  sectionText: {\r\n    fontSize: 16,\r\n    color: '#000',\r\n    lineHeight: 24,\r\n  },\r\n  infoRow: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    marginTop: 8,\r\n  },\r\n  infoIcon: {\r\n    marginRight: 8,\r\n  },\r\n  itemsContainer: {\r\n    flexDirection: 'row',\r\n    flexWrap: 'wrap',\r\n    marginTop: 8,\r\n  },\r\n  itemTag: {\r\n    backgroundColor: '#f5f5f5',\r\n    borderRadius: 4,\r\n    paddingHorizontal: 12,\r\n    paddingVertical: 6,\r\n    marginRight: 8,\r\n    marginBottom: 8,\r\n    borderWidth: 1,\r\n    borderColor: '#eee',\r\n  },\r\n  itemText: {\r\n    fontSize: 14,\r\n    color: '#000',\r\n  },\r\n  contactButton: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    padding: 16,\r\n    backgroundColor: '#000',\r\n    borderRadius: 8,\r\n    marginTop: 16,\r\n    marginBottom: 24,\r\n    marginHorizontal: 16,\r\n  },\r\n  contactButtonText: {\r\n    fontSize: 16,\r\n    fontWeight: '500',\r\n    color: '#fff',\r\n    marginLeft: 8,\r\n  },\r\n});\r\n\r\nexport default OrganizerProfileScreen;","import React, { useState, useRef, useEffect } from 'react';\r\nimport {\r\n  View,\r\n  Text,\r\n  TextInput,\r\n  ScrollView,\r\n  Alert,\r\n  Platform,\r\n  TouchableOpacity,\r\n  ActivityIndicator,\r\n  StyleSheet\r\n} from 'react-native';\r\nimport Checkbox from 'expo-checkbox';\r\nimport axios from 'axios';\r\nimport { auth } from '../../firebaseConfig';\r\nimport { getIdToken } from 'firebase/auth';\r\nimport { GeoPoint } from 'firebase/firestore';\r\nimport DateTimePicker from '@react-native-community/datetimepicker';\r\nimport { GooglePlacesAutocomplete } from 'react-native-google-places-autocomplete';\r\n\r\nconst MAPS_KEY = \"AIzaSyDw26V3Tw0g6tXKWX5ruHx8nAl6eJrn7vI\";\r\nconst predefinedItems = ['Clothes', 'Toys', 'Books', 'Groceries', 'Electronics'];\r\n\r\nconst AddEventScreen = () => {\r\n  // State management\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    description: '',\r\n    items_accepted: [],\r\n  });\r\n  const [meetingPoint, setMeetingPoint] = useState({\r\n    address: '',\r\n    lat: null,\r\n    lng: null,\r\n    placeId: null\r\n  });\r\n  const [eventDate, setEventDate] = useState(new Date());\r\n  const [showStartPicker, setShowStartPicker] = useState(false);\r\n  const [isWebMapsLoaded, setIsWebMapsLoaded] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [locationError, setLocationError] = useState('');\r\n\r\n  const meetingPointRef = useRef(null);\r\n\r\n  // Initialize Google Maps for web\r\n  useEffect(() => {\r\n    if (Platform.OS === 'web') {\r\n      const initAutocomplete = () => {\r\n        const input = document.getElementById('meeting-point-input');\r\n        if (input && window.google?.maps?.places) {\r\n          const autocomplete = new window.google.maps.places.Autocomplete(input, {\r\n            types: ['geocode', 'establishment'],\r\n            componentRestrictions: { country: 'us' },\r\n            fields: ['formatted_address', 'geometry', 'place_id']\r\n          });\r\n\r\n          autocomplete.addListener('place_changed', () => {\r\n            const place = autocomplete.getPlace();\r\n            if (!place.geometry) {\r\n              setLocationError('Please select a valid location from dropdown');\r\n              return;\r\n            }\r\n            handleMeetingPointSelect(null, {\r\n              formatted_address: place.formatted_address,\r\n              geometry: { location: place.geometry.location },\r\n              place_id: place.place_id\r\n            });\r\n          });\r\n        }\r\n      };\r\n\r\n      if (window.google?.maps) {\r\n        setIsWebMapsLoaded(true);\r\n        initAutocomplete();\r\n        return;\r\n      }\r\n\r\n      const scriptId = 'google-maps-script';\r\n      if (document.getElementById(scriptId)) return;\r\n\r\n      const script = document.createElement('script');\r\n      script.id = scriptId;\r\n      script.src = `https://maps.googleapis.com/maps/api/js?key=${MAPS_KEY}&libraries=places`;\r\n      script.async = true;\r\n      script.defer = true;\r\n      \r\n      script.onload = () => {\r\n        setIsWebMapsLoaded(true);\r\n        initAutocomplete();\r\n      };\r\n      \r\n      script.onerror = () => {\r\n        Alert.alert('Error', 'Failed to load maps functionality');\r\n      };\r\n\r\n      document.head.appendChild(script);\r\n    }\r\n  }, []);\r\n\r\n  // Handle location selection\r\n  const handleMeetingPointSelect = (data, details = null) => {\r\n    try {\r\n      if (!details) {\r\n        setLocationError('Please select a valid location from dropdown');\r\n        return;\r\n      }\r\n      \r\n      const address = details.formatted_address || data?.description;\r\n      const lat = details.geometry?.location?.lat?.() || details.geometry?.location?.lat;\r\n      const lng = details.geometry?.location?.lng?.() || details.geometry?.location?.lng;\r\n      const placeId = details.place_id;\r\n\r\n      if (!address || !lat || !lng) {\r\n        setLocationError('Invalid location selected');\r\n        return;\r\n      }\r\n\r\n      setMeetingPoint({ address, lat, lng, placeId });\r\n      setLocationError('');\r\n      \r\n      if (Platform.OS !== 'web' && meetingPointRef.current) {\r\n        meetingPointRef.current.setAddressText(address);\r\n        meetingPointRef.current.blur();\r\n      }\r\n    } catch (err) {\r\n      console.error('Location selection error:', err);\r\n      setLocationError('Please select a valid location');\r\n    }\r\n  };\r\n\r\n  // Form handlers\r\n  const handleTextChange = (name, value) => {\r\n    setFormData(prev => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  const onStartDateChange = (event, selectedDate) => {\r\n    const currentDate = selectedDate || eventDate;\r\n    setShowStartPicker(false);\r\n    setEventDate(currentDate);\r\n  };\r\n\r\n  const toggleCheckbox = (item) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      items_accepted: prev.items_accepted.includes(item)\r\n        ? prev.items_accepted.filter(i => i !== item)\r\n        : [...prev.items_accepted, item]\r\n    }));\r\n  };\r\n\r\n  // Form submission\r\n  const handleSubmit = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setLocationError('');\r\n      \r\n      // Validate inputs\r\n      if (!formData.name.trim()) throw new Error('Event name is required');\r\n      if (!formData.description.trim()) throw new Error('Description is required');\r\n      if (!meetingPoint.lat || !meetingPoint.lng) {\r\n        throw new Error('Please select a valid location');\r\n      }\r\n      if (formData.items_accepted.length === 0) {\r\n        throw new Error('Please select at least one accepted item');\r\n      }\r\n\r\n      const user = auth.currentUser;\r\n      if (!user) throw new Error('You must be logged in');\r\n\r\n      const token = await getIdToken(user);\r\n      const payload = {\r\n        token,\r\n        name: formData.name,\r\n        description: formData.description,\r\n        location: {\r\n          address: meetingPoint.address,\r\n          coordinates: new GeoPoint(meetingPoint.lat, meetingPoint.lng),\r\n          placeId: meetingPoint.placeId\r\n        },\r\n        date: eventDate.toISOString(),\r\n        items_accepted: formData.items_accepted,\r\n      };\r\n\r\n      const response = await axios.post('http://localhost:5000/api/user/events', payload);\r\n      \r\n      if (response.status === 201) {\r\n        Alert.alert('Success', 'Event added successfully!');\r\n        // Reset form\r\n        setFormData({\r\n          name: '',\r\n          description: '',\r\n          items_accepted: [],\r\n        });\r\n        setMeetingPoint({\r\n          address: '',\r\n          lat: null,\r\n          lng: null,\r\n          placeId: null\r\n        });\r\n        setEventDate(new Date());\r\n      } else {\r\n        throw new Error('Failed to add event');\r\n      }\r\n    } catch (err) {\r\n      console.error('Submission error:', err);\r\n      Alert.alert('Error', err.message);\r\n      if (err.message.includes('location')) {\r\n        setLocationError(err.message);\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Date picker component\r\n  const DatePickerButton = ({ label }) => {\r\n    if (Platform.OS === 'web') {\r\n      return (\r\n        <View style={styles.dateInputWrapper}>\r\n          <Text style={styles.label}>{label}</Text>\r\n          <input\r\n            type=\"date\"\r\n            value={eventDate.toISOString().split('T')[0]}\r\n            onChange={(e) => setEventDate(new Date(e.target.value))}\r\n            min={new Date().toISOString().split('T')[0]}\r\n            style={styles.webDateInput}\r\n          />\r\n        </View>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <View style={styles.dateInputWrapper}>\r\n        <Text style={styles.label}>{label}</Text>\r\n        <TouchableOpacity \r\n          onPress={() => setShowStartPicker(true)} \r\n          style={styles.dateInput}\r\n        >\r\n          <Text style={styles.dateText}>\r\n            {eventDate.toLocaleDateString('en-US', {\r\n              year: 'numeric',\r\n              month: 'long',\r\n              day: 'numeric'\r\n            })}\r\n          </Text>\r\n        </TouchableOpacity>\r\n        {showStartPicker && (\r\n          <DateTimePicker\r\n            value={eventDate}\r\n            mode=\"date\"\r\n            display=\"default\"\r\n            minimumDate={new Date()}\r\n            onChange={onStartDateChange}\r\n          />\r\n        )}\r\n      </View>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <ScrollView contentContainerStyle={styles.container}>\r\n      <Text style={styles.screenTitle}>Create Donation Event</Text>\r\n      \r\n      {/* Name Input */}\r\n      <View style={styles.inputGroup}>\r\n        <Text style={styles.label}>EVENT NAME *</Text>\r\n        <TextInput\r\n          style={styles.input}\r\n          placeholder=\"Enter event name\"\r\n          placeholderTextColor=\"#999\"\r\n          value={formData.name}\r\n          onChangeText={(text) => handleTextChange('name', text)}\r\n        />\r\n      </View>\r\n\r\n      {/* Description Input */}\r\n      <View style={styles.inputGroup}>\r\n        <Text style={styles.label}>DESCRIPTION *</Text>\r\n        <TextInput\r\n          style={[styles.input, styles.multilineInput]}\r\n          placeholder=\"Describe your donation event\"\r\n          placeholderTextColor=\"#999\"\r\n          multiline\r\n          numberOfLines={4}\r\n          value={formData.description}\r\n          onChangeText={(text) => handleTextChange('description', text)}\r\n        />\r\n      </View>\r\n\r\n      {/* Location Input */}\r\n      <View style={styles.inputGroup}>\r\n        <Text style={styles.label}>LOCATION *</Text>\r\n        {Platform.OS === 'web' ? (\r\n          <>\r\n            <TextInput\r\n              id=\"meeting-point-input\"\r\n              style={styles.input}\r\n              placeholder=\"Search for a location\"\r\n              placeholderTextColor=\"#999\"\r\n              value={meetingPoint.address}\r\n              onChangeText={(text) => {\r\n                setMeetingPoint(prev => ({ ...prev, address: text }));\r\n                if (text && !meetingPoint.lat) {\r\n                  setLocationError('Please select from dropdown');\r\n                }\r\n              }}\r\n            />\r\n            {!isWebMapsLoaded && <Text style={styles.loadingText}>Loading maps...</Text>}\r\n            {locationError ? (\r\n              <Text style={styles.errorText}>{locationError}</Text>\r\n            ) : null}\r\n          </>\r\n        ) : (\r\n          <View style={styles.autocompleteWrapper}>\r\n            <GooglePlacesAutocomplete\r\n              ref={meetingPointRef}\r\n              placeholder=\"Search for a location\"\r\n              onPress={handleMeetingPointSelect}\r\n              query={{\r\n                key: MAPS_KEY,\r\n                language: 'en',\r\n                components: 'country:us',\r\n                types: ['geocode', 'establishment']\r\n              }}\r\n              styles={{\r\n                textInput: styles.input,\r\n                listView: styles.dropdown,\r\n                description: styles.placeDescription\r\n              }}\r\n              fetchDetails\r\n              enablePoweredByContainer={false}\r\n            />\r\n            {locationError ? (\r\n              <Text style={styles.errorText}>{locationError}</Text>\r\n            ) : null}\r\n          </View>\r\n        )}\r\n      </View>\r\n\r\n      {/* Date Picker */}\r\n      <View style={styles.inputGroup}>\r\n        <DatePickerButton label=\"EVENT DATE *\" />\r\n      </View>\r\n\r\n      {/* Items Accepted */}\r\n      <View style={styles.inputGroup}>\r\n        <Text style={styles.label}>ITEMS ACCEPTED *</Text>\r\n        <View style={styles.checkboxGroup}>\r\n          {predefinedItems.map((item) => (\r\n            <View key={item} style={styles.checkboxContainer}>\r\n              <Checkbox\r\n                value={formData.items_accepted.includes(item)}\r\n                onValueChange={() => toggleCheckbox(item)}\r\n                color={formData.items_accepted.includes(item) ? '#000' : undefined}\r\n              />\r\n              <Text style={styles.checkboxLabel}>{item}</Text>\r\n            </View>\r\n          ))}\r\n        </View>\r\n      </View>\r\n\r\n      {/* Submit Button */}\r\n      <TouchableOpacity \r\n        style={styles.submitButton}\r\n        onPress={handleSubmit}\r\n        disabled={loading}\r\n      >\r\n        {loading ? (\r\n          <ActivityIndicator color=\"#fff\" />\r\n        ) : (\r\n          <Text style={styles.submitButtonText}>CREATE EVENT</Text>\r\n        )}\r\n      </TouchableOpacity>\r\n    </ScrollView>\r\n  );\r\n};\r\n\r\n// Styles\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flexGrow: 1,\r\n    padding: 24,\r\n    backgroundColor: '#fff',\r\n  },\r\n  screenTitle: {\r\n    fontSize: 24,\r\n    fontWeight: '700',\r\n    color: '#000',\r\n    marginBottom: 24,\r\n    textAlign: 'center',\r\n  },\r\n  inputGroup: {\r\n    marginBottom: 24,\r\n  },\r\n  label: {\r\n    fontSize: 13,\r\n    fontWeight: '600',\r\n    color: '#666',\r\n    marginBottom: 8,\r\n    textTransform: 'uppercase',\r\n    letterSpacing: 0.8,\r\n  },\r\n  input: {\r\n    borderWidth: 1,\r\n    borderColor: '#ddd',\r\n    borderRadius: 8,\r\n    paddingHorizontal: 16,\r\n    paddingVertical: 12,\r\n    fontSize: 16,\r\n    color: '#000',\r\n    backgroundColor: '#fff',\r\n  },\r\n  multilineInput: {\r\n    minHeight: 100,\r\n    textAlignVertical: 'top',\r\n  },\r\n  autocompleteWrapper: {\r\n    borderWidth: 1,\r\n    borderColor: '#ddd',\r\n    borderRadius: 8,\r\n    overflow: 'hidden',\r\n  },\r\n  dropdown: {\r\n    backgroundColor: '#fff',\r\n    borderWidth: 1,\r\n    borderColor: '#ddd',\r\n    marginTop: 4,\r\n  },\r\n  placeDescription: {\r\n    color: '#000',\r\n  },\r\n  dateInputWrapper: {\r\n    borderWidth: 1,\r\n    borderColor: '#ddd',\r\n    borderRadius: 8,\r\n    padding: 16,\r\n  },\r\n  dateInput: {\r\n    paddingVertical: 12,\r\n  },\r\n  dateText: {\r\n    fontSize: 16,\r\n    color: '#000',\r\n  },\r\n  webDateInput: {\r\n    width: '100%',\r\n    padding: 12,\r\n    border: '1px solid #ddd',\r\n    borderRadius: 8,\r\n    fontSize: 16,\r\n  },\r\n  checkboxGroup: {\r\n    flexDirection: 'row',\r\n    flexWrap: 'wrap',\r\n  },\r\n  checkboxContainer: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    marginRight: 24,\r\n    marginBottom: 12,\r\n    paddingVertical: 8,\r\n  },\r\n  checkboxLabel: {\r\n    fontSize: 16,\r\n    color: '#000',\r\n    marginLeft: 8,\r\n  },\r\n  submitButton: {\r\n    backgroundColor: '#000',\r\n    borderRadius: 8,\r\n    padding: 16,\r\n    alignItems: 'center',\r\n    marginTop: 16,\r\n  },\r\n  submitButtonText: {\r\n    color: '#fff',\r\n    fontSize: 16,\r\n    fontWeight: '600',\r\n  },\r\n  loadingText: {\r\n    color: '#666',\r\n    fontSize: 14,\r\n    marginTop: 8,\r\n  },\r\n  errorText: {\r\n    color: '#ff0000',\r\n    fontSize: 12,\r\n    marginTop: 4,\r\n  },\r\n});\r\n\r\nexport default AddEventScreen;","import React from \"react\";\r\nimport { createBottomTabNavigator } from \"@react-navigation/bottom-tabs\";\r\nimport { Ionicons } from \"@expo/vector-icons\";\r\nimport ProfileScreen from \"../screens/organizer/OrganizerProfileScreen\";\r\nimport AddEventScreen from \"../screens/organizer/AddEventScreen\";\r\nimport ChatScreen from \"../screens/ChatScreen\";\r\nimport ChatNavigator from \"./ChatNavigator\";\r\n\r\nconst Tab = createBottomTabNavigator();\r\n\r\nconst BottomTabNavigator = () => {\r\n  return (\r\n    <Tab.Navigator\r\n      screenOptions={({ route }) => ({\r\n        tabBarIcon: ({ focused, color, size }) => {\r\n          let iconName;\r\n          if (route.name === \"Add\") {\r\n            iconName = focused ? \"add-circle\" : \"add-circle-outline\";\r\n          } else if (route.name === \"Chat\") {\r\n            iconName = focused ? \"chatbubble\" : \"chatbubble-outline\";\r\n          } else if (route.name === \"Profile\") {\r\n            iconName = focused ? \"person\" : \"person-outline\";\r\n          }\r\n          return <Ionicons name={iconName} size={size} color={color} />;\r\n        },\r\n        tabBarActiveTintColor: \"black\",\r\n        tabBarInactiveTintColor: \"gray\",\r\n        tabBarShowLabel: false,\r\n        headerShown: false,\r\n      })}\r\n    >\r\n      <Tab.Screen name=\"Add\" component={AddEventScreen} />\r\n      <Tab.Screen name=\"Chat\" component={ChatNavigator} />\r\n      <Tab.Screen name=\"Profile\" component={ProfileScreen} />\r\n    </Tab.Navigator>\r\n  );\r\n};\r\n\r\nexport default BottomTabNavigator;","import React, { useState } from 'react';\r\nimport { View, TextInput, Alert, Text, TouchableOpacity, StyleSheet } from 'react-native';\r\nimport { signInWithEmailAndPassword } from 'firebase/auth';\r\nimport { auth } from '../../firebaseConfig'; \r\nimport {MaterialIcons } from '@expo/vector-icons';\r\n\r\nexport default function SignInScreen({ navigation }) {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [showPassword, setShowPassword] = useState(false);\r\n\r\n  const handleSignin = async () => {\r\n    try {\r\n      const userCredential = await signInWithEmailAndPassword(auth, email, password);\r\n      console.log('Firebase sign-in success:', userCredential);\r\n\r\n      const idToken = await userCredential.user.getIdToken(true);\r\n      console.log(\"idToken\", idToken);\r\n    } catch (err) {\r\n      console.log('Firebase sign-in error:', err.code, err.message);\r\n\r\n      if (err.code === 'auth/wrong-password') {\r\n        Alert.alert('Sign In Failed', 'Incorrect password');\r\n      } else if (err.code === 'auth/user-not-found') {\r\n        Alert.alert('Sign In Failed', 'No user found with this email');\r\n      } else {\r\n        Alert.alert('Sign In Failed', 'An error occurred. Please try again later');\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      {/* Header with Logo */}\r\n      <View style={styles.header}>\r\n        <MaterialIcons  name=\"hand-heart\" size={50} color=\"#000\" style={styles.logoIcon} />\r\n        <Text style={styles.appName}>DonateIt</Text>\r\n      </View>\r\n\r\n      {/* Email Input */}\r\n      <View style={styles.inputWrapper}>\r\n        <Text style={styles.inputLabel}>Email Address</Text>\r\n        <View style={styles.inputContainer}>\r\n          <MaterialIcons  name=\"email-outline\" size={20} color=\"#555\" style={styles.inputIcon} />\r\n          <TextInput \r\n            placeholder=\"Enter your email\"\r\n            placeholderTextColor=\"#999\"\r\n            onChangeText={setEmail} \r\n            value={email}\r\n            autoCapitalize=\"none\"\r\n            keyboardType=\"email-address\"\r\n            style={styles.input} \r\n          />\r\n        </View>\r\n      </View>\r\n\r\n      {/* Password Input */}\r\n      <View style={styles.inputWrapper}>\r\n        <Text style={styles.inputLabel}>Password</Text>\r\n        <View style={styles.inputContainer}>\r\n          <MaterialIcons  name=\"lock-outline\" size={20} color=\"#555\" style={styles.inputIcon} />\r\n          <TextInput \r\n            placeholder=\"Enter your password\"\r\n            placeholderTextColor=\"#999\"\r\n            secureTextEntry={!showPassword}\r\n            onChangeText={setPassword} \r\n            value={password}\r\n            style={styles.input} \r\n          />\r\n          <TouchableOpacity \r\n            onPress={() => setShowPassword(!showPassword)}\r\n            style={styles.passwordToggle}\r\n          >\r\n            <MaterialIcons  \r\n              name={showPassword ? \"eye-off-outline\" : \"eye-outline\"} \r\n              size={20} \r\n              color=\"#555\" \r\n            />\r\n          </TouchableOpacity>\r\n        </View>\r\n      </View>\r\n\r\n      {/* Sign In Button */}\r\n      <TouchableOpacity\r\n        style={styles.signInButton}\r\n        onPress={handleSignin}\r\n      >\r\n        <Text style={styles.buttonText}>Sign In</Text>\r\n      </TouchableOpacity>\r\n\r\n      {/* Forgot Password Link */}\r\n      <TouchableOpacity\r\n        style={styles.forgotPassword}\r\n        onPress={() => navigation.navigate(\"ForgotPassword\")}\r\n      >\r\n        <Text style={styles.linkText}>Forgot Password?</Text>\r\n      </TouchableOpacity>\r\n\r\n      {/* Sign Up Link */}\r\n      <View style={styles.footer}>\r\n        <Text style={styles.footerText}>Don't have an account? </Text>\r\n        <TouchableOpacity onPress={() => navigation.navigate(\"SignUp\")}>\r\n          <Text style={[styles.linkText, styles.createAccountText]}>Create Account</Text>\r\n        </TouchableOpacity>\r\n      </View>\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n    paddingHorizontal: 30,\r\n    backgroundColor: '#fff',\r\n  },\r\n  header: {\r\n    alignItems: 'center',\r\n    marginBottom: 40,\r\n  },\r\n  logoIcon: {\r\n    marginBottom: 15,\r\n  },\r\n  appName: {\r\n    fontSize: 28,\r\n    fontWeight: '700',\r\n    color: '#000',\r\n  },\r\n  inputWrapper: {\r\n    marginBottom: 20,\r\n  },\r\n  inputLabel: {\r\n    fontSize: 14,\r\n    fontWeight: '500',\r\n    color: '#333',\r\n    marginBottom: 8,\r\n    marginLeft: 5,\r\n  },\r\n  inputContainer: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    borderWidth: 1,\r\n    borderColor: '#ddd',\r\n    borderRadius: 10,\r\n    paddingHorizontal: 15,\r\n    height: 50,\r\n  },\r\n  inputIcon: {\r\n    marginRight: 10,\r\n  },\r\n  input: {\r\n    flex: 1,\r\n    height: '100%',\r\n    color: '#000',\r\n    fontSize: 16,\r\n  },\r\n  passwordToggle: {\r\n    padding: 10,\r\n  },\r\n  signInButton: {\r\n    backgroundColor: '#000',\r\n    padding: 16,\r\n    borderRadius: 10,\r\n    alignItems: 'center',\r\n    marginTop: 10,\r\n    shadowColor: '#000',\r\n    shadowOffset: { width: 0, height: 2 },\r\n    shadowOpacity: 0.1,\r\n    shadowRadius: 4,\r\n    elevation: 2,\r\n  },\r\n  buttonText: {\r\n    color: '#fff',\r\n    fontSize: 16,\r\n    fontWeight: '600',\r\n  },\r\n  forgotPassword: {\r\n    alignSelf: 'flex-end',\r\n    marginTop: 15,\r\n  },\r\n  footer: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'center',\r\n    marginTop: 20,\r\n  },\r\n  footerText: {\r\n    color: '#555',\r\n    fontSize: 14,\r\n  },\r\n  linkText: {\r\n    color: '#000',\r\n    fontWeight: '600',\r\n    fontSize: 14,\r\n  },\r\n  createAccountText: {\r\n    textDecorationLine: 'underline',\r\n  },\r\n});","import React, { useState } from 'react';\r\nimport {\r\n  View,\r\n  TextInput,\r\n  Alert,\r\n  Text,\r\n  TouchableOpacity,\r\n  StyleSheet,\r\n  ActivityIndicator,\r\n  KeyboardAvoidingView,\r\n  Platform,\r\n  ScrollView,\r\n} from 'react-native';\r\nimport DateTimePicker from '@react-native-community/datetimepicker';\r\nimport {MaterialIcons } from '@expo/vector-icons';\r\nimport { auth, db } from '../../firebaseConfig';\r\nimport { doc, setDoc } from 'firebase/firestore';\r\nimport { createUserWithEmailAndPassword } from 'firebase/auth';\r\nimport axios from 'axios';\r\n\r\nexport default function SignUpScreen({ navigation }) {\r\n  const [email, setEmail] = useState('');\r\n  const [name, setName] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleSignup = async () => {\r\n    if (!email.trim() || !name.trim() || !password.trim()) {\r\n      Alert.alert('Validation Error', 'Please fill in all required fields.');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      const userCredential = await createUserWithEmailAndPassword(auth, email, password);\r\n      const user = userCredential.user;\r\n      const token = await user.getIdToken();\r\n\r\n      // Send to backend\r\n      await axios.post('http://localhost:5000/api/auth/signup', {\r\n        token,\r\n        name,\r\n      });\r\n\r\n      // Save to Firestore\r\n      await setDoc(doc(db, 'users', user.uid), {\r\n        uid: user.uid,\r\n        email: user.email,\r\n        name,\r\n        createdAt: new Date().toISOString(),\r\n      });\r\n\r\n      Alert.alert('Success', 'Account created. Please sign in.');\r\n      navigation.reset({\r\n        index: 0,\r\n        routes: [{ name: 'SignIn' }],\r\n      });\r\n\r\n    } catch (err) {\r\n      console.error('Signup error:', err);\r\n      Alert.alert('Error', err.message || 'Signup failed');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <KeyboardAvoidingView\r\n      behavior={Platform.OS === 'ios' ? 'padding' : undefined}\r\n      style={{ flex: 1, backgroundColor: '#fff' }}\r\n    >\r\n      <ScrollView contentContainerStyle={styles.container}>\r\n        {/* Header */}\r\n        <View style={styles.header}>\r\n          <MaterialIcons  name=\"hand-heart\" size={50} color=\"#000\" style={styles.logoIcon} />\r\n          <Text style={styles.appName}>DonateIt</Text>\r\n        </View>\r\n\r\n        {/* Full Name Input */}\r\n        <View style={styles.inputWrapper}>\r\n          <Text style={styles.inputLabel}>Full Name</Text>\r\n          <View style={styles.inputContainer}>\r\n            <MaterialIcons  name=\"account-outline\" size={20} color=\"#555\" style={styles.inputIcon} />\r\n            <TextInput\r\n              placeholder=\"Enter your full name\"\r\n              placeholderTextColor=\"#999\"\r\n              onChangeText={setName}\r\n              value={name}\r\n              style={styles.input}\r\n            />\r\n          </View>\r\n        </View>\r\n\r\n        {/* Email Input */}\r\n        <View style={styles.inputWrapper}>\r\n          <Text style={styles.inputLabel}>Email Address</Text>\r\n          <View style={styles.inputContainer}>\r\n            <MaterialIcons  name=\"email-outline\" size={20} color=\"#555\" style={styles.inputIcon} />\r\n            <TextInput\r\n              placeholder=\"Enter your email\"\r\n              placeholderTextColor=\"#999\"\r\n              onChangeText={setEmail}\r\n              value={email}\r\n              keyboardType=\"email-address\"\r\n              autoCapitalize=\"none\"\r\n              style={styles.input}\r\n            />\r\n          </View>\r\n        </View>\r\n\r\n        {/* Password Input */}\r\n        <View style={styles.inputWrapper}>\r\n          <Text style={styles.inputLabel}>Password</Text>\r\n          <View style={styles.inputContainer}>\r\n            <MaterialIcons  name=\"lock-outline\" size={20} color=\"#555\" style={styles.inputIcon} />\r\n            <TextInput\r\n              placeholder=\"Enter your password\"\r\n              placeholderTextColor=\"#999\"\r\n              secureTextEntry={!showPassword}\r\n              onChangeText={setPassword}\r\n              value={password}\r\n              style={styles.input}\r\n            />\r\n            <TouchableOpacity\r\n              onPress={() => setShowPassword(!showPassword)}\r\n              style={styles.passwordToggle}\r\n            >\r\n              <MaterialIcons  name={showPassword ? 'eye-off-outline' : 'eye-outline'} size={20} color=\"#555\" />\r\n            </TouchableOpacity>\r\n          </View>\r\n        </View>\r\n\r\n        {/* Sign Up Button */}\r\n        <TouchableOpacity\r\n          style={styles.signUpButton}\r\n          onPress={handleSignup}\r\n          disabled={loading}\r\n        >\r\n          {loading ? (\r\n            <ActivityIndicator color=\"#fff\" />\r\n          ) : (\r\n            <Text style={styles.buttonText}>Create Account</Text>\r\n          )}\r\n        </TouchableOpacity>\r\n\r\n        {/* Sign In Link */}\r\n        <View style={styles.footer}>\r\n          <Text style={styles.footerText}>Already have an account? </Text>\r\n          <TouchableOpacity onPress={() => navigation.navigate('SignIn')}>\r\n            <Text style={[styles.linkText, styles.signInLink]}>Sign In</Text>\r\n          </TouchableOpacity>\r\n        </View>\r\n      </ScrollView>\r\n    </KeyboardAvoidingView>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    paddingHorizontal: 30,\r\n    paddingTop: 60,\r\n    paddingBottom: 30,\r\n  },\r\n  header: {\r\n    alignItems: 'center',\r\n    marginBottom: 40,\r\n  },\r\n  logoIcon: {\r\n    marginBottom: 15,\r\n  },\r\n  appName: {\r\n    fontSize: 28,\r\n    fontWeight: '700',\r\n    color: '#000',\r\n  },\r\n  inputWrapper: {\r\n    marginBottom: 20,\r\n  },\r\n  inputLabel: {\r\n    fontSize: 14,\r\n    fontWeight: '500',\r\n    color: '#333',\r\n    marginBottom: 8,\r\n    marginLeft: 5,\r\n  },\r\n  inputContainer: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    borderWidth: 1,\r\n    borderColor: '#ddd',\r\n    borderRadius: 10,\r\n    paddingHorizontal: 15,\r\n    height: 50,\r\n  },\r\n  inputIcon: {\r\n    marginRight: 10,\r\n  },\r\n  input: {\r\n    flex: 1,\r\n    height: '100%',\r\n    color: '#000',\r\n    fontSize: 16,\r\n  },\r\n  passwordToggle: {\r\n    padding: 10,\r\n  },\r\n  signUpButton: {\r\n    backgroundColor: '#000',\r\n    padding: 16,\r\n    borderRadius: 10,\r\n    alignItems: 'center',\r\n    marginTop: 10,\r\n    shadowColor: '#000',\r\n    shadowOffset: { width: 0, height: 2 },\r\n    shadowOpacity: 0.1,\r\n    shadowRadius: 4,\r\n    elevation: 2,\r\n  },\r\n  buttonText: {\r\n    color: '#fff',\r\n    fontSize: 16,\r\n    fontWeight: '600',\r\n  },\r\n  footer: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'center',\r\n    marginTop: 20,\r\n  },\r\n  footerText: {\r\n    color: '#555',\r\n    fontSize: 14,\r\n  },\r\n  linkText: {\r\n    color: '#000',\r\n    fontWeight: '600',\r\n    fontSize: 14,\r\n  },\r\n  signInLink: {\r\n    textDecorationLine: 'underline',\r\n  },\r\n});\r\n","import React, { useState } from 'react';\r\nimport { View, Text, TextInput, TouchableOpacity, Alert, StyleSheet } from 'react-native';\r\nimport { sendPasswordResetEmail } from 'firebase/auth';\r\nimport { auth } from '../../firebaseConfig';\r\nimport {MaterialIcons } from '@expo/vector-icons';\r\n\r\nexport default function ForgotPasswordScreen({ navigation }) {\r\n  const [email, setEmail] = useState('');\r\n\r\n  const handlePasswordReset = async () => {\r\n    if (!email) {\r\n      Alert.alert(\"Error\", \"Please enter your email address.\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await sendPasswordResetEmail(auth, email);\r\n      Alert.alert(\"Success\", \"Password reset email sent. Check your inbox.\");\r\n      navigation.goBack(); // optional: navigate back to Sign In\r\n    } catch (error) {\r\n      console.log('Password reset error:', error.code, error.message);\r\n      if (error.code === 'auth/user-not-found') {\r\n        Alert.alert(\"Error\", \"No user found with this email.\");\r\n      } else {\r\n        Alert.alert(\"Error\", \"Something went wrong. Please try again.\");\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <MaterialIcons  name=\"lock-reset\" size={50} color=\"#000\" style={styles.icon} />\r\n      <Text style={styles.title}>Reset Your Password</Text>\r\n      <Text style={styles.subtitle}>Enter your email to receive a password reset link.</Text>\r\n\r\n      <TextInput\r\n        style={styles.input}\r\n        placeholder=\"Enter your email\"\r\n        placeholderTextColor=\"#999\"\r\n        keyboardType=\"email-address\"\r\n        autoCapitalize=\"none\"\r\n        onChangeText={setEmail}\r\n        value={email}\r\n      />\r\n\r\n      <TouchableOpacity style={styles.resetButton} onPress={handlePasswordReset}>\r\n        <Text style={styles.resetButtonText}>Send Reset Link</Text>\r\n      </TouchableOpacity>\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n    paddingHorizontal: 30,\r\n    backgroundColor: '#fff',\r\n  },\r\n  icon: {\r\n    alignSelf: 'center',\r\n    marginBottom: 20,\r\n  },\r\n  title: {\r\n    fontSize: 22,\r\n    fontWeight: '700',\r\n    color: '#000',\r\n    textAlign: 'center',\r\n    marginBottom: 10,\r\n  },\r\n  subtitle: {\r\n    fontSize: 14,\r\n    color: '#555',\r\n    textAlign: 'center',\r\n    marginBottom: 30,\r\n  },\r\n  input: {\r\n    borderWidth: 1,\r\n    borderColor: '#ddd',\r\n    borderRadius: 10,\r\n    padding: 15,\r\n    fontSize: 16,\r\n    color: '#000',\r\n    marginBottom: 20,\r\n  },\r\n  resetButton: {\r\n    backgroundColor: '#000',\r\n    padding: 16,\r\n    borderRadius: 10,\r\n    alignItems: 'center',\r\n  },\r\n  resetButtonText: {\r\n    color: '#fff',\r\n    fontSize: 16,\r\n    fontWeight: '600',\r\n  },\r\n});\r\n","import React from \"react\";\r\nimport { createStackNavigator } from \"@react-navigation/stack\";\r\nimport SignInScreen from \"../screens/auth/SignInScreen\";\r\nimport SignUpScreen from \"../screens/auth/SignUpScreen\";\r\nimport ForgotPasswordScreen from \"../screens/auth/ForgotPasswordScreen\";\r\n\r\n\r\nconst Stack = createStackNavigator();\r\n\r\nconst AuthNavigator = () => {\r\n  return (\r\n    <Stack.Navigator initialRouteName=\"SignIn\" screenOptions={{ headerShown: false }}>\r\n        <Stack.Screen name=\"SignIn\" component={SignInScreen} />\r\n        <Stack.Screen name=\"SignUp\" component={SignUpScreen} />\r\n        <Stack.Screen name=\"ForgotPassword\" component={ForgotPasswordScreen} />\r\n      </Stack.Navigator>\r\n   \r\n  );\r\n};\r\n\r\nexport default AuthNavigator;","import React, { useState, useEffect } from 'react';\r\nimport { ActivityIndicator, View } from 'react-native';\r\nimport { NavigationContainer } from '@react-navigation/native';\r\nimport { createNativeStackNavigator } from '@react-navigation/native-stack';\r\nimport UserNavigator from './app/navigation/UserNavigator';\r\nimport AdminNavigator from './app/navigation/AdminNavigator';\r\nimport OrganizerNavigator from './app/navigation/OrganizerNavigator';\r\nimport AuthNavigator from './app/navigation/AuthNavigator';\r\nimport { getAuth, onAuthStateChanged } from 'firebase/auth';\r\nimport { UserContextProvider } from './app/contexts/UserContext';\r\n\r\nconst Stack = createNativeStackNavigator();\r\n\r\nexport default function App() {\r\n  const [initializing, setInitializing] = useState(true);\r\n  const [user, setUser] = useState(null);\r\n  const [userRole, setUserRole] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [loadingAuth, setLoadingAuth] = useState(true);\r\n  const [loadingRole, setLoadingRole] = useState(false);\r\n  const [authInitialized, setAuthInitialized] = useState(false); \r\n  const auth = getAuth();\r\n\r\n  // Track user auth state and fetch role if needed\r\n  useEffect(() => {\r\n    const unsubscribe = onAuthStateChanged(auth, async (currentUser) => {\r\n      setLoadingAuth(false);\r\n      if (currentUser) {\r\n        setUser(currentUser);\r\n        setLoadingRole(true); // were about to fetch role\r\n\r\n        try {\r\n          const response = await fetch(`http://localhost:5000/api/auth/user-role/${currentUser.uid}`);\r\n          const data = await response.json();\r\n          setUserRole(data.role);\r\n        } catch (err) {\r\n          console.log('Error fetching user role:', err);\r\n          setUserRole(null);\r\n        } finally {\r\n          setLoadingRole(false);\r\n        }\r\n      } else {\r\n        setUser(null);\r\n        setUserRole(null);\r\n      }\r\n    });\r\n\r\n    return unsubscribe;\r\n  }, []);\r\n   // If loading, show the spinner\r\n  if (loadingAuth || (user && loadingRole)) {\r\n    return (\r\n      <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\r\n        <ActivityIndicator size=\"large\" color=\"#0000ff\" />\r\n      </View>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <UserContextProvider>\r\n      <NavigationContainer>\r\n        <Stack.Navigator screenOptions={{ headerShown: false }}>\r\n          {!user ? (\r\n            <Stack.Screen name=\"Auth\" component={AuthNavigator} />\r\n          ) : userRole === 'admin' ? (\r\n            <Stack.Screen name=\"Admin\" component={AdminNavigator} />\r\n          ) : userRole === 'organizer' ? (\r\n            <Stack.Screen name=\"Organizer\" component={OrganizerNavigator} />\r\n          ) : (\r\n            <Stack.Screen name=\"User\" component={UserNavigator} />\r\n          )}\r\n        </Stack.Navigator>\r\n      </NavigationContainer>\r\n    </UserContextProvider>\r\n  );\r\n}","import { registerRootComponent } from 'expo';\n\nimport App from './App';\n\n// registerRootComponent calls AppRegistry.registerComponent('main', () => App);\n// It also ensures that whether you load the app in Expo Go or in a native build,\n// the environment is set up appropriately\nregisterRootComponent(App);\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/DonateIt/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t792: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkweb\"] = self[\"webpackChunkweb\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [621], () => (__webpack_require__(3044)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["app","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","getAuth","db","getFirestore","getStorage","UserHomeScreen","navigation","events","setEvents","useState","loading","setLoading","selectedEvent","setSelectedEvent","chatLoading","setChatLoading","error","setError","organizerStatus","setOrganizerStatus","exists","name","email","fetchEvents","async","response","axios","get","timeout","data","Error","eventsWithOrganizerStatus","Promise","all","map","event","organizer_id","verifyOrganizer","Object","assign","organizerId","organizerExists","organizerName","getDoc","doc","displayName","err","console","message","organizerRef","handleChatWithOrganizer","currentUser","uid","chatId","_id","defaultOrganizerInfo","photoURL","organizerInfo","organizerSnap","log","setDoc","id","participants","participantInfo","eventId","eventName","createdAt","serverTimestamp","lastMessage","lastMessageAt","merge","navigate","screen","params","refresh","Date","now","setTimeout","otherUserId","otherUserName","Alert","alert","text","useEffect","unsubscribe","addListener","_jsxs","View","style","styles","loadingContainer","children","_jsx","ActivityIndicator","size","color","Text","loadingText","errorContainer","Ionicons","errorText","errorSubText","TouchableOpacity","retryButton","onPress","retryButtonText","detailContainer","backButton","backButtonText","eventImagePlaceholder","detailTitle","detailOrganizer","section","sectionTitle","detailDescription","description","detailRow","detailIcon","detailLabel","detailValue","date","toLocaleDateString","weekday","month","day","year","location","address","footer","chatButton","chatButtonText","container","headerContainer","header","length","emptyContainer","emptyText","emptySubText","refreshButton","refreshButtonText","FlatList","keyExtractor","item","renderItem","renderEvent","organizerData","handleSelectEvent","eventCard","selectedEventCard","eventHeaderContainer","eventTitle","eventBy","eventDescription","numberOfLines","eventDetails","detailItem","detailText","contentContainerStyle","listContent","showsVerticalScrollIndicator","StyleSheet","create","flex","padding","backgroundColor","flexDirection","justifyContent","alignItems","marginBottom","fontSize","fontWeight","borderRadius","borderWidth","borderColor","shadowColor","shadowOffset","width","height","shadowOpacity","shadowRadius","elevation","lineHeight","marginLeft","marginTop","textAlign","paddingHorizontal","paddingVertical","marginHorizontal","marginRight","borderTopWidth","borderTopColor","paddingBottom","UserProfileScreen","profile","setProfile","donations","setDonations","selectedDonation","setSelectedDonation","handleContactAdmin","adminUserId","chatData","getOrCreateAdminChat","category","chatParams","navigateToChat","adminName","donationId","donationName","existingChat","chatsRef","collection","chatKey","sort","join","chatDocsQuery","getDocs","query","where","empty","chatDoc","docs","checkExistingAdminChat","newChat","newChatRef","messagesRef","addDoc","senderId","senderName","token","getIdToken","profileRes","headers","Authorization","userDonations","filter","donation","fetchProfileAndDonations","SafeAreaView","ScrollView","detailScrollContent","detailContent","detailSection","sectionLabel","sectionText","infoRow","infoIcon","availability","dateTime","assignee","images","horizontal","showsHorizontalScrollIndicator","photosContainer","photoUrl","idx","Image","source","uri","donationImage","contactButton","contactButtonText","scrollContent","profileHeader","profileImageContainer","profileName","profileEmail","sectionHeader","emptyState","renderDonation","donationCard","donationHeader","donationTitle","donationDescription","donationDateContainer","donationDate","scrollEnabled","actionButton","user","sendPasswordResetEmail","actionButtonText","logoutButton","signOut","logoutText","position","bottom","left","right","contactAdminButton","contactAdminText","textTransform","letterSpacing","MAPS_KEY","contentContainer","maxWidth","alignSelf","headerText","inputGroup","label","pickerContainer","overflow","picker","input","errorInput","uploadButton","uploadIcon","uploadButtonText","photoPreviewText","photoScroll","photoItem","photo","deleteButton","top","submitContainer","submitButton","submitButtonText","requiredFieldsText","autocompleteWrapper","zIndex","dropdown","placeDescription","placeItem","AddDonationScreen","donationCategory","setDonationCategory","setDonationDescription","donationPhotos","setDonationPhotos","pickupTime","setPickupTime","isLoading","setIsLoading","errors","setErrors","photos","meetingPoint","setMeetingPoint","lat","lng","placeId","isWebMapsLoaded","setIsWebMapsLoaded","webAutocompleteRefs","useRef","meetingInput","document","getElementById","current","window","google","maps","places","Autocomplete","types","componentRestrictions","country","fields","place","getPlace","geometry","handleMeetingPointSelect","formatted_address","place_id","scriptId","script","createElement","src","defer","onload","onerror","head","appendChild","contains","removeChild","details","Picker","selectedValue","onValueChange","Item","value","TextInput","onChangeText","trim","prev","placeholder","multiline","placeholderTextColor","key","_Fragment","toLowerCase","handleChoosePhotos","click","type","multiple","accept","onChange","files","target","fileUrls","Array","from","file","URL","createObjectURL","display","photoUri","index","updatedPhotos","splice","validateForm","isValid","newErrors","uploadPromises","fetch","blob","FormData","append","method","body","result","json","ok","secure_url","uploadToCloudinary","catch","uploadedUrls","url","donationData","donorAddress","coordinates","GeoPoint","post","status","errorMessage","renderLocationInput","MapScreen","boxes","setBoxes","userLocation","setUserLocation","searchQuery","setSearchQuery","searchResults","setSearchResults","showSearchResults","setShowSearchResults","mapZoom","setMapZoom","mapRef","mapInstance","autocompleteService","placesService","AutocompleteService","PlacesService","Location","requestForegroundPermissionsAsync","defaultLocation","latitude","longitude","fetchNearbyBoxes","getCurrentPositionAsync","userCoords","coords","nearbyBoxes","fallbackResponse","push","sortedBoxes","box","distance","calculateDistance","toFixed","a","b","parseFloat","slice","initializeMap","apiError","lat1","lon1","lat2","lon2","dLat","Math","PI","dLon","sin","cos","atan2","sqrt","boxesToDisplay","Map","center","zoom","scrollwheel","gestureHandling","zoomControl","mapTypeControl","streetViewControl","fullscreenControl","Marker","title","icon","forEach","marker","infoWindow","InfoWindow","content","open","centered","mainScrollView","mainScrollViewContent","persistentScrollbar","subheader","searchContainer","searchInput","getPlacePredictions","predictions","searchResultsContainer","searchResultsScroll","keyboardShouldPersistTaps","nestedScrollEnabled","searchResultItem","handleLocationSelect","getDetails","placeDetails","newLocation","setCenter","mapContainer","mapHeaderContainer","mapLabel","mapControlsContainer","mapControlButton","handleZoomIn","currentZoom","getZoom","setZoom","mapControlText","handleZoomOut","ref","mapInstructions","locationInfo","locationText","refreshText","scrollContainer","boxesContainer","boxesContentContainer","alwaysBounceVertical","scrollEventThrottle","boxCard","boxName","boxDistance","boxAddress","directionsButton","openDirections","Linking","openURL","directionsText","divider","random","toString","noBoxesText","flexGrow","maxHeight","borderBottomColor","borderBottomWidth","paddingTop","fontStyle","marginVertical","UserContext","createContext","UserContextProvider","setUser","profileComplete","setProfileComplete","onAuthStateChanged","firebaseUser","userDocRef","userDocSnap","profileCreated","Provider","hairlineWidth","headerTitle","searchIcon","chatItem","avatar","avatarPlaceholder","avatarText","chatContent","chatName","time","emptySubtext","ChatListScreen","route","chats","setChats","refreshing","setRefreshing","usersData","setUsersData","useContext","useNavigation","getChatKey","usersRef","unsubscribeUsers","onSnapshot","snapshot","users","fetchChats","useCallback","q","chatMap","find","currentLastMessageAt","toDate","set","role","otherUserPhoto","uniqueChats","values","useFocusEffect","filteredChats","chat","includes","StatusBar","barStyle","handleOpenChat","isOrganizer","charAt","toUpperCase","toLocaleTimeString","hour","minute","ListEmptyComponent","refreshControl","RefreshControl","onRefresh","headerTextContainer","headerSubtitle","messagesList","messageContainer","currentUserMessage","borderBottomRightRadius","otherUserMessage","borderBottomLeftRadius","messageText","messageTime","inputContainer","sendButton","disabledButton","sendButtonText","ChatScreen","messages","setMessages","newMessage","setNewMessage","flatListRef","messagesQuery","orderBy","unsubscribeMessages","querySnapshot","msgs","scrollToEnd","animated","KeyboardAvoidingView","behavior","keyboardVerticalOffset","renderMessage","isCurrentUser","onContentSizeChange","onLayout","Pressable","pressed","opacity","chatRef","disabled","Stack","createNativeStackNavigator","ChatNavigator","Navigator","Screen","component","options","headerBackTitle","Tab","createBottomTabNavigator","BottomTabNavigator","screenOptions","tabBarIcon","focused","iconName","tabBarActiveTintColor","tabBarInactiveTintColor","tabBarShowLabel","headerShown","HomeScreen","BoxFinderScreen","ProfileScreen","deleteEvent","delete","buttonGroup","buttonText","welcomeText","donationItem","donationText","listContainer","infoContainer","infoText","editButton","saveButton","AdminProfileScreen","res","fetchProfile","setShowSettingsModal","addButton","boxContainer","boxType","detailCard","deleteButtonText","modalContainer","modalHeader","closeButton","modalTitle","formSection","placeText","selectedLocationText","ManageDonationBoxesScreen","donationBoxes","setDonationBoxes","selectedDonationBox","setSelectedDonationBox","isAddModalVisible","setIsAddModalVisible","formData","setFormData","hours","phone","mapsLoadingError","setMapsLoadingError","meetingPointRef","autocompleteInitialized","fetchDonationBoxes","timer","initWebAutocomplete","clearTimeout","autocomplete","resetForm","deleteDonationBox","renderDonationBox","Modal","visible","animationType","border","keyboardType","valid","donationBoxData","editMode","setEditMode","editedDonation","setEditedDonation","deleteModalVisible","setDeleteModalVisible","fetchDonations","deleteDonation","handleSave","put","MaterialIcons","inputLabel","button","transparent","onRequestClose","modalOverlay","modalContent","modalText","modalButtons","modalButton","cancelButton","modalButtonText","confirmDeleteButton","welcomeTitle","donationContent","donationMeta","donationMetaText","emptyStateText","AdminTabNavigator","ManageEventsScreen","ManageDonationsScreen","eventHeader","eventDateContainer","eventDate","eventLocationContainer","eventLocation","itemsContainer","flexWrap","itemTag","itemText","OrganizerProfileScreen","ADMIN_USER_ID","userEvents","items_accepted","predefinedItems","screenTitle","multilineInput","minHeight","textAlignVertical","dateInputWrapper","dateInput","dateText","webDateInput","checkboxGroup","checkboxContainer","checkboxLabel","AddEventScreen","setEventDate","showStartPicker","setShowStartPicker","locationError","setLocationError","initAutocomplete","handleTextChange","DatePickerButton","toISOString","split","e","min","Checkbox","i","toggleCheckbox","undefined","payload","SignInScreen","setEmail","password","setPassword","showPassword","setShowPassword","logoIcon","appName","inputWrapper","inputIcon","autoCapitalize","secureTextEntry","passwordToggle","signInButton","userCredential","signInWithEmailAndPassword","idToken","code","forgotPassword","linkText","footerText","createAccountText","textDecorationLine","SignUpScreen","setName","signUpButton","createUserWithEmailAndPassword","reset","routes","signInLink","ForgotPasswordScreen","subtitle","resetButton","goBack","resetButtonText","createStackNavigator","AuthNavigator","initialRouteName","registerRootComponent","initializing","setInitializing","userRole","setUserRole","loadingAuth","setLoadingAuth","loadingRole","setLoadingRole","authInitialized","setAuthInitialized","NavigationContainer","AdminNavigator","OrganizerNavigator","UserNavigator","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","m","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","keys","every","r","n","getter","__esModule","d","definition","o","defineProperty","enumerable","g","globalThis","this","Function","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","p","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}